<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜æ ¡ç‰©ç† - æ…£æ€§åŠ›(ç›¸å¯¾çš„ãªè¦–ç‚¹ãŒå¤§äº‹)</title>
    <script>
      window.MathJax = {
      tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
     }
     };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .back-link {
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 10px;
        }
        h1 {
            color: #333;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .tab-btn {
            flex: 1;
            min-width: 150px;
            padding: 12px 20px;
            border: none;
            background: #f0f0f0;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
            transition: all 0.3s;
        }
        .tab-btn.active {
            background: #667eea;
            color: white;
        }
        .tab-btn:hover {
            background: #8899f0;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        h2 {
            color: #667eea;
            margin-bottom: 15px;
        }
        h3 {
            color: #555;
            margin: 25px 0 15px 0;
            border-left: 4px solid #667eea;
            padding-left: 10px;
        }
        .pdf-placeholder {
            background: #f9f9f9;
            padding: 40px;
            text-align: center;
            border-radius: 5px;
            color: #666;
        }
        .lecture-content {
            line-height: 1.8;
            color: #333;
        }
        .lecture-content p {
            margin-bottom: 15px;
        }
        .important-box {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border-left: 5px solid #f39c12;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }
        .important-box h4 {
            color: #e67e22;
            margin-bottom: 10px;
        }
        .formula-box {
            background: linear-gradient(135deg, #e8f4fd 0%, #d1ecf1 100%);
            border: 2px solid #667eea;
            padding: 25px;
            margin: 20px 0;
            border-radius: 10px;
            text-align: center;
        }
        .formula-box .formula {
            font-size: 1.5em;
            color: #333;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .comparison-table th, .comparison-table td {
            border: 2px solid #667eea;
            padding: 15px;
            text-align: center;
        }
        .comparison-table th {
            background: #667eea;
            color: white;
        }
        .comparison-table td {
            background: #f9f9f9;
        }
        
        /* å•é¡Œã‚¿ãƒ–ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .problem-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 10px;
        }
        .problem-section h4 {
            color: #667eea;
            margin-bottom: 15px;
        }
        details {
            margin-top: 15px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
        }
        details summary {
            cursor: pointer;
            font-weight: bold;
            color: #667eea;
        }
        details[open] summary {
            margin-bottom: 15px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        .answer-content {
            line-height: 1.8;
        }
        
        /* ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        #sim-container {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        #physicsCanvas {
            display: block;
            width: 100%;
            background: white;
            border-radius: 5px;
            border: 2px solid #ddd;
        }
        .sim-controls {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
        }
        .control-group {
            margin-bottom: 20px;
        }
        .control-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        .control-group input[type="range"] {
            width: 100%;
            margin: 10px 0;
        }
        .value-display {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 5px;
            font-weight: bold;
            min-width: 100px;
            text-align: center;
        }
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .sim-button {
            flex: 1;
            min-width: 120px;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .sim-button.start {
            background: #4CAF50;
            color: white;
        }
        .sim-button.start:hover {
            background: #45a049;
        }
        .sim-button.reset {
            background: #f44336;
            color: white;
        }
        .sim-button.reset:hover {
            background: #da190b;
        }
        .sim-button.view-toggle {
            background: #2196F3;
            color: white;
        }
        .sim-button.view-toggle:hover {
            background: #1976D2;
        }
        .sim-button.view-toggle.active {
            background: #ff9800;
        }
        .view-indicator {
            text-align: center;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 18px;
        }
        .view-indicator.outside {
            background: #e3f2fd;
            color: #1976D2;
        }
        .view-indicator.inside {
            background: #fff3e0;
            color: #f57c00;
        }
        
        /* é‹å‹•æ–¹ç¨‹å¼è¡¨ç¤ºã‚¨ãƒªã‚¢ */
        .equation-display {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            border: 3px solid;
        }
        .equation-display.outside {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-color: #1976D2;
        }
        .equation-display.inside {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border-color: #f57c00;
        }
        .equation-display h4 {
            margin-bottom: 15px;
            font-size: 18px;
        }
        .equation-display.outside h4 {
            color: #1976D2;
        }
        .equation-display.inside h4 {
            color: #f57c00;
        }
        .equation-content {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .equation-content p {
            margin: 10px 0;
            line-height: 1.8;
        }
        .equation-main {
            font-size: 1.4em;
            text-align: center;
            margin: 15px 0;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 5px;
        }
        .equation-note {
            font-size: 0.9em;
            color: #666;
            margin-top: 10px;
        }
        
        .graph-container {
            margin-top: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #ddd;
        }
        .graph-container h3 {
            color: #667eea;
            margin-bottom: 10px;
            border-left: none;
            padding-left: 0;
        }
        #graphCanvas {
            display: block;
            width: 100%;
            border: 1px solid #eee;
        }
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legend-color {
            width: 30px;
            height: 4px;
            border-radius: 2px;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            header, .container {
                padding: 15px;
            }
            .tab-btn {
                min-width: 100px;
                font-size: 14px;
            }
            .comparison-table th, .comparison-table td {
                padding: 10px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <header>
        <a href="index.html" class="back-link">â† ç›®æ¬¡ã«æˆ»ã‚‹</a>
        <h1>æ…£æ€§åŠ›ï¼ˆç›¸å¯¾çš„ãªè¦–ç‚¹ãŒå¤§äº‹ï¼‰</h1>
    </header>
    <div class="container">
        
        <div class="tabs">
            <button class="tab-btn active" onclick="openTab('lecture')">è§£èª¬ç·¨</button>
            <button class="tab-btn" onclick="openTab('problem')">å•é¡Œç·¨</button>
            <button class="tab-btn" onclick="openTab('simulation')">ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
        </div>
        
        <div id="lecture" class="tab-content active">
            <h2>æ…£æ€§åŠ› â”€ è¦‹æ–¹ã«ã‚ˆã£ã¦å¤‰ã‚ã‚‹åŠ›</h2>
            
            <div class="lecture-content">
                <h3>1. æ…£æ€§ã®æ³•å‰‡ã‚’æ€ã„å‡ºãã†</h3>
                <p>
                    å‰ã®ç« ã§å­¦ã‚“ã ã€Œæ…£æ€§ã®æ³•å‰‡ã€ã‚’è¦šãˆã¦ã„ã¾ã™ã‹ï¼Ÿç‰©ä½“ã¯å¤–ã‹ã‚‰åŠ›ã‚’å—ã‘ãªã„é™ã‚Šã€é™æ­¢ã—ã¦ã„ã‚‹ã‚‚ã®ã¯é™æ­¢ã—ç¶šã‘ã€é‹å‹•ã—ã¦ã„ã‚‹ã‚‚ã®ã¯ç­‰é€Ÿç›´ç·šé‹å‹•ã‚’ç¶šã‘ã‚ˆã†ã¨ã—ã¾ã™ã€‚
                </p>
                <p>
                    ãƒã‚¹ãŒæ€¥åœè»Šã—ãŸã¨ãã€ä½“ãŒå‰ã«æŠ•ã’å‡ºã•ã‚Œãã†ã«ãªã£ãŸçµŒé¨“ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿã‚ã®ã¨ãã€ã€Œæ€¥ã«åŠ›ãŒã‹ã‹ã£ãŸï¼ã€ã¨æ„Ÿã˜ãŸã¯ãšã§ã™ã€‚ã§ã‚‚ã€å¤–ã‹ã‚‰è¦‹ã¦ã„ã‚‹äººã«ã¯ã€ã‚ãªãŸã«åŠ›ãŒã‹ã‹ã£ãŸã‚ˆã†ã«ã¯è¦‹ãˆã¾ã›ã‚“ã€‚ã“ã‚Œã“ããŒä»Šå›å­¦ã¶<strong>ã€Œæ…£æ€§åŠ›ã€</strong>ã®æ­£ä½“ã§ã™ã€‚
                </p>

                <h3>2. è¦‹æ–¹ã«ã‚ˆã£ã¦åŠ›ãŒã€Œã‚ã‚‹ã€ã€Œãªã„ã€ãŒå¤‰ã‚ã‚‹ï¼</h3>
                <p>
                    é›»è»Šã®ä¸­ã§åŠã‚Šé©ã«ã¤ã‹ã¾ã£ã¦ç«‹ã£ã¦ã„ã‚‹äººã‚’è€ƒãˆã¾ã—ã‚‡ã†ã€‚é›»è»ŠãŒæ€¥åœè»Šã—ãŸã¨ãã€ä½•ãŒèµ·ãã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ
                </p>

                <table class="comparison-table">
                    <tr>
                        <th>è»Šå¤–ã‹ã‚‰è¦‹ãŸå ´åˆï¼ˆåœ°é¢ã«ç«‹ã£ã¦ã„ã‚‹äººï¼‰</th>
                        <th>è»Šå†…ã‹ã‚‰è¦‹ãŸå ´åˆï¼ˆé›»è»Šã«ä¹—ã£ã¦ã„ã‚‹äººï¼‰</th>
                    </tr>
                    <tr>
                        <td>
                            é›»è»Šã¯æ¸›é€Ÿã—ã¦ã„ã‚‹ã€‚<br>
                            ä¸­ã®äººã¯<strong>æ…£æ€§ã®æ³•å‰‡</strong>ã«ã‚ˆã‚Šã€ãã®ã¾ã¾é€²ã¿ç¶šã‘ã‚ˆã†ã¨ã™ã‚‹ã€‚<br>
                            â†’ äººã«ã¯ç‰¹åˆ¥ãªåŠ›ã¯ã‹ã‹ã£ã¦ã„ãªã„
                        </td>
                        <td>
                            è‡ªåˆ†ï¼ˆé›»è»Šï¼‰ã¯æ­¢ã¾ã£ã¦ã„ã‚‹ã€‚<br>
                            ãªã®ã«ã€äººãŒæ€¥ã«å‰ã«å€’ã‚Œãã†ã«ãªã£ãŸï¼<br>
                            â†’ ä½•ã‹<strong>åŠ›ãŒã‹ã‹ã£ãŸã‚ˆã†ã«æ„Ÿã˜ã‚‹</strong>
                        </td>
                    </tr>
                </table>

                <div class="important-box">
                    <h4>ğŸ”‘ ãƒã‚¤ãƒ³ãƒˆï¼šè¦–ç‚¹ã«ã‚ˆã£ã¦åŠ›ã®æœ‰ç„¡ãŒå¤‰ã‚ã‚‹</h4>
                    <p>
                        è»Šå¤–ã‹ã‚‰è¦‹ã‚Œã°ã€ŒåŠ›ã¯ã‹ã‹ã£ã¦ã„ãªã„ã€ã®ã«ã€è»Šå†…ã‹ã‚‰è¦‹ã‚Œã°ã€ŒåŠ›ãŒã‹ã‹ã£ã¦ã„ã‚‹ã€ã‚ˆã†ã«è¦‹ãˆã‚‹ã€‚ã“ã®<strong>ã€Œé‹å‹•ã—ã¦ã„ã‚‹äººã ã‘ãŒæ„Ÿã˜ã‚‹ã€å®Ÿéš›ã«ã¯å­˜åœ¨ã—ãªã„è¦‹ã‹ã‘ã®åŠ›ã€</strong>ã‚’<strong>æ…£æ€§åŠ›</strong>ã¨ã„ã„ã¾ã™ã€‚
                    </p>
                </div>

                <h3>3. æ…£æ€§åŠ›ã®å…¬å¼</h3>
                <p>
                    åŠ é€Ÿåº¦ $a$ ã§é‹å‹•ã—ã¦ã„ã‚‹åº§æ¨™ç³»ï¼ˆé›»è»Šã®ä¸­ãªã©ï¼‰ã‹ã‚‰è¦‹ã‚‹ã¨ã€è³ªé‡ $m$ ã®ç‰©ä½“ã«ã¯æ¬¡ã®ã‚ˆã†ãªæ…£æ€§åŠ›ãŒã‹ã‹ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã™ã€‚
                </p>

                <div class="formula-box">
                    <p class="formula">$$F = -ma$$</p>
                    <p style="margin-top: 15px; color: #555;">
                        $F$ï¼šæ…£æ€§åŠ› [N]ã€€ã€€$m$ï¼šç‰©ä½“ã®è³ªé‡ [kg]ã€€ã€€$a$ï¼šåº§æ¨™ç³»ã®åŠ é€Ÿåº¦ [m/sÂ²]
                    </p>
                </div>

                <div class="important-box">
                    <h4>ğŸ”‘ ãƒã‚¤ãƒŠã‚¹ã®æ„å‘³ï¼šåŠ é€Ÿåº¦ã¨é€†å‘ãï¼</h4>
                    <p>
                        å¼ã®ä¸­ã®<strong>ãƒã‚¤ãƒŠã‚¹è¨˜å·</strong>ãŒã¨ã¦ã‚‚é‡è¦ã§ã™ã€‚æ…£æ€§åŠ›ã¯ã€<strong>å¤–ã‹ã‚‰è¦‹ãŸåŠ é€Ÿåº¦ã¨ã¯é€†æ–¹å‘</strong>ã«åƒãã¾ã™ã€‚
                    </p>
                    <p>
                        ä¾‹ï¼šé›»è»ŠãŒå³å‘ãã«åŠ é€Ÿ â†’ ä¹—å®¢ã¯å·¦å‘ãã«æŠ¼ã•ã‚Œã‚‹æ„Ÿè¦šï¼ˆæ…£æ€§åŠ›ã¯å·¦å‘ãï¼‰<br>
                        ä¾‹ï¼šãƒã‚¹ãŒå‰å‘ãã«æ¸›é€Ÿï¼ˆå¾Œã‚å‘ãã«åŠ é€Ÿï¼‰â†’ ä¹—å®¢ã¯å‰å‘ãã«æŠ¼ã•ã‚Œã‚‹æ„Ÿè¦šï¼ˆæ…£æ€§åŠ›ã¯å‰å‘ãï¼‰
                    </p>
                </div>

                <h3>4. ãªãœå¼ã®å½¢ã¯å¤‰ã‚ã£ã¦ã¯ã„ã‘ãªã„ã®ã‹ï¼Ÿ</h3>
                <p>
                    ã“ã“ã§ã¨ã¦ã‚‚å¤§åˆ‡ãªã“ã¨ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚è»Šå¤–ã‹ã‚‰è¦‹ã¦ã‚‚ã€è»Šå†…ã‹ã‚‰è¦‹ã¦ã‚‚ã€<strong>ç‰©ä½“ã®ã€Œå‹•ãæ–¹ã€è‡ªä½“ã¯åŒã˜</strong>ã§ã™ã€‚è¦‹ã¦ã„ã‚‹å ´æ‰€ãŒé•ã†ã ã‘ã§ã€ç‰©ä½“ãŒå®Ÿéš›ã«ã©ã†å‹•ãã‹ã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚
                </p>
                <p>
                    ã ã‹ã‚‰ã“ãã€ã©ã¡ã‚‰ã®è¦–ç‚¹ã§é‹å‹•æ–¹ç¨‹å¼ã‚’ç«‹ã¦ã¦ã‚‚ã€<strong>åŒã˜é‹å‹•ã‚’æ­£ã—ãèª¬æ˜ã§ããªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“</strong>ã€‚è»Šå†…ã‹ã‚‰è¦‹ãŸã¨ãã«æ…£æ€§åŠ›ã‚’åŠ ãˆã‚‹ã“ã¨ã§ã€ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³ã®é‹å‹•æ–¹ç¨‹å¼ $ma = F$ ã®å½¢ã‚’ä¿ã£ãŸã¾ã¾é‹å‹•ã‚’è¨˜è¿°ã§ãã‚‹ã®ã§ã™ã€‚
                </p>

                <div class="important-box">
                    <h4>ğŸ“ ã¾ã¨ã‚</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>æ…£æ€§åŠ›ã¯<strong>åŠ é€Ÿåº¦é‹å‹•ã—ã¦ã„ã‚‹è¦³æ¸¬è€…ã ã‘ãŒæ„Ÿã˜ã‚‹ã€Œè¦‹ã‹ã‘ã®åŠ›ã€</strong></li>
                        <li>æ…£æ€§åŠ›ã®å¤§ãã•ã¯ $|F| = ma$ã€å‘ãã¯<strong>åŠ é€Ÿåº¦ã¨é€†æ–¹å‘</strong></li>
                        <li>å¼ $F = -ma$ ã®ãƒã‚¤ãƒŠã‚¹ã¯å‘ãã‚’è¡¨ã—ã¦ã„ã‚‹</li>
                        <li>ã©ã®è¦–ç‚¹ã‹ã‚‰è¦‹ã¦ã‚‚ç‰©ç†æ³•å‰‡ï¼ˆé‹å‹•æ–¹ç¨‹å¼ï¼‰ã®å½¢ã¯åŒã˜ã«ãªã‚‹</li>
                    </ul>
                </div>
            </div>
            
            <h3 style="margin-top: 40px;">ğŸ“„ æˆæ¥­è³‡æ–™ï¼ˆPDFï¼‰</h3>
            <iframe src="https://drive.google.com/file/d/1rd3AUHNkj-NLM0IEztEdsiVOdPwxD6EA/preview" width="100%" height="500"></iframe>
        </div>
        
        <div id="problem" class="tab-content">
            <h2>ç¢ºèªå•é¡Œ</h2>
            
            <div class="problem-section">
                <h4>å•é¡Œ1ï¼šæ…£æ€§åŠ›ã®åŸºæœ¬</h4>
                <p>
                    é›»è»ŠãŒæ°´å¹³æ–¹å‘å³å‘ãã«åŠ é€Ÿåº¦ $a = 2.0 \, \mathrm{m/s^2}$ ã§åŠ é€Ÿã—ã¦ã„ã‚‹ã€‚é›»è»Šå†…ã®åºŠã®ä¸Šã«è³ªé‡ $m = 3.0 \, \mathrm{kg}$ ã®è·ç‰©ãŒç½®ã‹ã‚Œã¦ãŠã‚Šã€è·ç‰©ã¯é›»è»Šã«å¯¾ã—ã¦é™æ­¢ã—ã¦ã„ã‚‹ã€‚
                </p>
                <p>ï¼ˆ1ï¼‰åœ°é¢ã«é™æ­¢ã—ã¦ã„ã‚‹äººã‹ã‚‰è¦‹ãŸã¨ãã€è·ç‰©ã«ã¯ãŸã‚‰ãæ°´å¹³æ–¹å‘ã®åŠ›ã‚’ç­”ãˆã‚ˆã€‚</p>
                <p>ï¼ˆ2ï¼‰é›»è»Šå†…ã®äººã‹ã‚‰è¦‹ãŸã¨ãã€è·ç‰©ã«ã¯ãŸã‚‰ãåŠ›ã‚’ã™ã¹ã¦æŒ™ã’ã€æ°´å¹³æ–¹å‘ã®åŠ›ã®ã¤ã‚Šåˆã„ã®å¼ã‚’æ›¸ã‘ã€‚</p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <div class="answer-content">
                        <p><strong>ï¼ˆ1ï¼‰ã®è§£ç­”</strong></p>
                        <p>
                            åœ°é¢ã‹ã‚‰è¦‹ã‚‹ã¨ã€è·ç‰©ã¯é›»è»Šã¨ä¸€ç·’ã«åŠ é€Ÿåº¦ $a = 2.0 \, \mathrm{m/s^2}$ ã§å³å‘ãã«åŠ é€Ÿã—ã¦ã„ã¾ã™ã€‚
                            ã“ã®åŠ é€Ÿã®åŸå› ã¯ã€åºŠã¨ã®é–“ã®<strong>æ‘©æ“¦åŠ›</strong>ã§ã™ã€‚
                        </p>
                        <p>
                            é‹å‹•æ–¹ç¨‹å¼ã‚ˆã‚Šï¼š<br>
                            $$f = ma = 3.0 \times 2.0 = 6.0 \, \mathrm{N}$$
                        </p>
                        <p><strong>ç­”ãˆï¼šå³å‘ãã« 6.0 N ã®æ‘©æ“¦åŠ›</strong></p>
                        
                        <hr style="margin: 20px 0;">
                        
                        <p><strong>ï¼ˆ2ï¼‰ã®è§£ç­”</strong></p>
                        <p>
                            é›»è»Šå†…ã‹ã‚‰è¦‹ã‚‹ã¨ã€è·ç‰©ã¯é™æ­¢ã—ã¦ã„ã¾ã™ã€‚é™æ­¢ã—ã¦ã„ã‚‹ç‰©ä½“ã«ã¯åŠ›ãŒã¤ã‚Šåˆã£ã¦ã„ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚
                        </p>
                        <p>æ°´å¹³æ–¹å‘ã«ã¯ãŸã‚‰ãåŠ›ï¼š</p>
                        <ul style="margin-left: 20px;">
                            <li>æ‘©æ“¦åŠ› $f$ï¼ˆå³å‘ãï¼‰</li>
                            <li>æ…£æ€§åŠ› $F = -ma$ï¼ˆå·¦å‘ãã€å¤§ãã• $ma = 6.0 \, \mathrm{N}$ï¼‰</li>
                        </ul>
                        <p>
                            åŠ›ã®ã¤ã‚Šåˆã„ã‚ˆã‚Šï¼š<br>
                            $$f - ma = 0$$
                            $$f = ma = 6.0 \, \mathrm{N}$$
                        </p>
                        <p><strong>ç­”ãˆï¼šæ‘©æ“¦åŠ›ï¼ˆå³å‘ãï¼‰ã¨æ…£æ€§åŠ›ï¼ˆå·¦å‘ãï¼‰ãŒã¤ã‚Šåˆã£ã¦ã„ã‚‹ã€‚å¼ã¯ $f = ma$</strong></p>
                    </div>
                </details>
            </div>

            <div class="problem-section">
                <h4>å•é¡Œ2ï¼šé›»è»Šå†…ã®ãŠã‚‚ã‚Š</h4>
                <p>
                    æ°´å¹³æ–¹å‘ã«ä¸€å®šã®åŠ é€Ÿåº¦ $a$ ã§èµ°ã‚‹é›»è»Šã®å¤©äº•ã‹ã‚‰ã€è³ªé‡ $m$ ã®ãŠã‚‚ã‚Šã‚’è»½ã„ç³¸ã§ã¤ã‚‹ã—ãŸã¨ã“ã‚ã€ç³¸ã¯é‰›ç›´æ–¹å‘ã‹ã‚‰è§’åº¦ $\theta$ ã ã‘å‚¾ã„ã¦é™æ­¢ã—ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆãŸã€‚é‡åŠ›åŠ é€Ÿåº¦ã‚’ $g$ ã¨ã™ã‚‹ã€‚
                </p>
                <p>ï¼ˆ1ï¼‰é›»è»Šã®åŠ é€Ÿåº¦ã®å‘ãã¯ã€ç³¸ãŒå‚¾ã„ãŸå´ã‹ã€ãã®åå¯¾å´ã‹ç­”ãˆã‚ˆã€‚</p>
                <p>ï¼ˆ2ï¼‰$\tan\theta$ ã‚’ $a$ ã¨ $g$ ã‚’ç”¨ã„ã¦è¡¨ã›ã€‚</p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <div class="answer-content">
                        <p><strong>ï¼ˆ1ï¼‰ã®è§£ç­”</strong></p>
                        <p>
                            æ…£æ€§åŠ›ã¯åŠ é€Ÿåº¦ã¨é€†å‘ãã«ç”Ÿã˜ã¾ã™ã€‚ãŠã‚‚ã‚ŠãŒå‚¾ãã®ã¯æ…£æ€§åŠ›ã«ã‚ˆã£ã¦å¼•ã£å¼µã‚‰ã‚Œã‚‹ã‹ã‚‰ã§ã™ã€‚
                            ã—ãŸãŒã£ã¦ã€é›»è»Šã®åŠ é€Ÿåº¦ã¯<strong>ç³¸ãŒå‚¾ã„ãŸå´ã®åå¯¾å´</strong>ã‚’å‘ã„ã¦ã„ã¾ã™ã€‚
                        </p>
                        <p>
                            ï¼ˆä¾‹ï¼šç³¸ãŒå¾Œã‚ã«å‚¾ã„ã¦ã„ã‚‹ â†’ æ…£æ€§åŠ›ã¯å¾Œã‚å‘ã â†’ åŠ é€Ÿåº¦ã¯å‰å‘ãï¼‰
                        </p>
                        <p><strong>ç­”ãˆï¼šç³¸ãŒå‚¾ã„ãŸå´ã®åå¯¾å´</strong></p>
                        
                        <hr style="margin: 20px 0;">
                        
                        <p><strong>ï¼ˆ2ï¼‰ã®è§£ç­”</strong></p>
                        <p>
                            é›»è»Šå†…ã‹ã‚‰è¦‹ã‚‹ã¨ã€ãŠã‚‚ã‚Šã¯é™æ­¢ã—ã¦ã„ã‚‹ã®ã§åŠ›ãŒã¤ã‚Šåˆã£ã¦ã„ã¾ã™ã€‚
                        </p>
                        <p>ãŠã‚‚ã‚Šã«ã¯ãŸã‚‰ãåŠ›ï¼š</p>
                        <ul style="margin-left: 20px;">
                            <li>é‡åŠ› $mg$ï¼ˆé‰›ç›´ä¸‹å‘ãï¼‰</li>
                            <li>å¼µåŠ› $T$ï¼ˆç³¸ã®æ–¹å‘ï¼‰</li>
                            <li>æ…£æ€§åŠ› $ma$ï¼ˆåŠ é€Ÿåº¦ã¨é€†å‘ãï¼æ°´å¹³æ–¹å‘ï¼‰</li>
                        </ul>
                        <p>åŠ›ã®ã¤ã‚Šåˆã„ã‚ˆã‚Šï¼š</p>
                        <p>
                            æ°´å¹³æ–¹å‘ï¼š$T\sin\theta = ma$<br>
                            é‰›ç›´æ–¹å‘ï¼š$T\cos\theta = mg$
                        </p>
                        <p>
                            è¾ºã€…å‰²ã‚‹ã¨ï¼š
                            $$\frac{T\sin\theta}{T\cos\theta} = \frac{ma}{mg}$$
                            $$\tan\theta = \frac{a}{g}$$
                        </p>
                        <p><strong>ç­”ãˆï¼š$\tan\theta = \dfrac{a}{g}$</strong></p>
                    </div>
                </details>
            </div>

            <div class="problem-section">
                <h4>å•é¡Œ3ï¼šæ¦‚å¿µã®ç†è§£</h4>
                <p>
                    æ…£æ€§åŠ›ã«ã¤ã„ã¦ã€æ¬¡ã®æ–‡ç« ã®ç©ºæ¬„ã«é©åˆ‡ãªèªå¥ã‚’å…¥ã‚Œã‚ˆã€‚
                </p>
                <p>
                    æ…£æ€§åŠ›ã¯ã€ï¼ˆã€€ã‚¢ã€€ï¼‰ã—ã¦ã„ã‚‹åº§æ¨™ç³»ã‹ã‚‰è¦³æ¸¬ã—ãŸã¨ãã«ã ã‘ç¾ã‚Œã‚‹ï¼ˆã€€ã‚¤ã€€ï¼‰ã®åŠ›ã§ã‚ã‚‹ã€‚
                    ãã®å¤§ãã•ã¯ $ma$ ã§ã‚ã‚Šã€å‘ãã¯è¦³æ¸¬è€…ã®ï¼ˆã€€ã‚¦ã€€ï¼‰ã¨ï¼ˆã€€ã‚¨ã€€ï¼‰å‘ãã§ã‚ã‚‹ã€‚
                </p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <div class="answer-content">
                        <p><strong>è§£ç­”</strong></p>
                        <p>
                            ã‚¢ï¼š<strong>åŠ é€Ÿåº¦é‹å‹•</strong><br>
                            ã‚¤ï¼š<strong>è¦‹ã‹ã‘</strong>ï¼ˆã¾ãŸã¯ã€Œä»®æƒ³ã€ï¼‰<br>
                            ã‚¦ï¼š<strong>åŠ é€Ÿåº¦</strong><br>
                            ã‚¨ï¼š<strong>é€†</strong>ï¼ˆã¾ãŸã¯ã€Œåå¯¾ã€ï¼‰
                        </p>
                        <hr style="margin: 20px 0;">
                        <p><strong>è§£èª¬</strong></p>
                        <p>
                            æ…£æ€§åŠ›ã¯ã€ç­‰é€Ÿç›´ç·šé‹å‹•ã‚„é™æ­¢ã—ã¦ã„ã‚‹åº§æ¨™ç³»ã§ã¯ç¾ã‚Œã¾ã›ã‚“ã€‚åŠ é€Ÿåº¦é‹å‹•ã—ã¦ã„ã‚‹åº§æ¨™ç³»ã«ä¹—ã£ã¦ã„ã‚‹è¦³æ¸¬è€…ã ã‘ãŒæ„Ÿã˜ã‚‹ã€Œè¦‹ã‹ã‘ã®åŠ›ã€ã§ã™ã€‚å®Ÿéš›ã«ä½•ã‹ãŒæŠ¼ã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ã®ã§ã€ã€Œå®Ÿåœ¨ã—ãªã„åŠ›ã€ã¨ã‚‚è¨€ã‚ã‚Œã¾ã™ã€‚
                        </p>
                        <p>
                            å‘ãã«ã¤ã„ã¦ã¯ã€å¼ $F = -ma$ ã®ãƒã‚¤ãƒŠã‚¹ãŒç¤ºã™é€šã‚Šã€åŠ é€Ÿåº¦ã¨é€†å‘ãã«ãªã‚Šã¾ã™ã€‚
                        </p>
                    </div>
                </details>
            </div>
        </div>
        
        <div id="simulation" class="tab-content">
            <h2>æ…£æ€§åŠ›ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>
            <p>é›»è»Šã®åŠ é€Ÿåº¦ã‚’å¤‰ãˆã¦ã€è»Šå¤–ãƒ»è»Šå†…ãã‚Œãã‚Œã®è¦–ç‚¹ã‹ã‚‰äººã®å‹•ãã‚’è¦³å¯Ÿã—ã¾ã—ã‚‡ã†ã€‚</p>
            
            <div class="view-indicator outside" id="viewIndicator">
                ğŸ‘ ç¾åœ¨ã®è¦–ç‚¹ï¼šè»Šå¤–ï¼ˆåœ°é¢ã«ç«‹ã£ã¦ã„ã‚‹äººï¼‰
            </div>
            
            <div id="sim-container">
                <canvas id="physicsCanvas"></canvas>
            </div>
            
            <div class="sim-controls">
                <div class="control-group">
                    <label>é›»è»Šã®åŠ é€Ÿåº¦ (a): <span class="value-display" id="aDisplay">0.0 m/sÂ²</span></label>
                    <input type="range" id="aSlider" min="-5" max="5" value="0" step="0.5">
                    <p style="color: #666; font-size: 14px;">â€» æ­£ã®å€¤ï¼šå³å‘ãã«åŠ é€Ÿã€€è² ã®å€¤ï¼šå·¦å‘ãã«åŠ é€Ÿï¼ˆå³å‘ãã«æ¸›é€Ÿï¼‰</p>
                </div>
                
                <div class="button-group">
                    <button class="sim-button start" id="startBtn">â–¶ ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
                    <button class="sim-button reset" id="resetBtn">â†º ãƒªã‚»ãƒƒãƒˆ</button>
                    <button class="sim-button view-toggle" id="viewBtn">ğŸ”„ è»Šå†…è¦–ç‚¹ã«åˆ‡æ›¿</button>
                </div>
            </div>
            
            <!-- é‹å‹•æ–¹ç¨‹å¼è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
            <div class="equation-display outside" id="equationDisplay">
                <h4 id="equationTitle">ğŸ“ è»Šå¤–ã‹ã‚‰è¦‹ãŸé‹å‹•æ–¹ç¨‹å¼ï¼ˆåœ°é¢ã«ç«‹ã£ã¦ã„ã‚‹äººï¼‰</h4>
                <div class="equation-content">
                    <p id="motionDescription"><strong>ä¸­ã®äººã®é‹å‹•çŠ¶æ…‹ï¼š</strong>é›»è»Šã¨ã¨ã‚‚ã«åŠ é€Ÿåº¦ $a$ ã§<span style="color: #1976D2; font-weight: bold;">åŠ é€Ÿåº¦é‹å‹•ã—ã¦ã„ã‚‹</span></p>
                    <div class="equation-main" id="equationMain">
                        $$ma = f$$
                    </div>
                    <p id="equationExplanation">
                        ä¸­ã®äººã¯é›»è»Šã¨åŒã˜åŠ é€Ÿåº¦ $a$ ã§é‹å‹•ã—ã¦ã„ã‚‹ã®ã§ã€é‹å‹•æ–¹ç¨‹å¼ã¯ $ma = f$ ã¨ãªã‚‹ã€‚<br>
                        ã“ã“ã§ $f$ ã¯åºŠã‹ã‚‰ã®<strong>æ‘©æ“¦åŠ›</strong>ï¼ˆåŠ é€Ÿåº¦ã¨åŒã˜å‘ãï¼‰ã€‚
                    </p>
                </div>
                <p class="equation-note" id="equationNote">â€» æ…£æ€§åŠ›ã¯ç™»å ´ã—ãªã„ã€‚æ‘©æ“¦åŠ›ã ã‘ã§åŠ é€Ÿã‚’èª¬æ˜ã§ãã‚‹ã€‚</p>
            </div>
            
        </div>
    </div>
    
    <script>
    // --- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ ---
    function openTab(tabName) {
        var contents = document.getElementsByClassName("tab-content");
        for (var i = 0; i < contents.length; i++) {
            contents[i].style.display = "none";
            contents[i].classList.remove("active");
        }
        var buttons = document.getElementsByClassName("tab-btn");
        for (var i = 0; i < buttons.length; i++) {
            buttons[i].classList.remove("active");
        }
        document.getElementById(tabName).style.display = "block";
        document.getElementById(tabName).classList.add("active");
        if (event && event.currentTarget) {
            event.currentTarget.classList.add("active");
        }
        
        // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ–ãŒé–‹ã‹ã‚ŒãŸã‚‰Canvasã‚’åˆæœŸåŒ–
        if (tabName === 'simulation') {
            resizeCanvas();
            drawScene();
            // MathJaxã‚’å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        }
    }

    // --- ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ ---
    const canvas = document.getElementById('physicsCanvas');
    const ctx = canvas.getContext('2d');
    
    // è¦ç´ ã®å–å¾—
    const aSlider = document.getElementById('aSlider');
    const aDisplay = document.getElementById('aDisplay');
    const startBtn = document.getElementById('startBtn');
    const resetBtn = document.getElementById('resetBtn');
    const viewBtn = document.getElementById('viewBtn');
    const viewIndicator = document.getElementById('viewIndicator');
    const equationDisplay = document.getElementById('equationDisplay');
    const equationTitle = document.getElementById('equationTitle');
    const motionDescription = document.getElementById('motionDescription');
    const equationMain = document.getElementById('equationMain');
    const equationExplanation = document.getElementById('equationExplanation');
    const equationNote = document.getElementById('equationNote');
    
    // ç‰©ç†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    let acceleration = 0;       // é›»è»Šã®åŠ é€Ÿåº¦ [m/sÂ²]
    let trainVelocity = 0;      // é›»è»Šã®é€Ÿåº¦ [m/s]
    let trainPosition = 0;      // é›»è»Šã®ä½ç½® [m]
    let personVelocity = 0;     // äººã®é€Ÿåº¦ï¼ˆåœ°é¢åŸºæº–ï¼‰[m/s]
    let personRelativePos = 0;  // äººã®ç›¸å¯¾ä½ç½®ï¼ˆé›»è»Šå†…ï¼‰[m]
    
    // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹
    let isRunning = false;
    let isInsideView = false;   // true: è»Šå†…è¦–ç‚¹, false: è»Šå¤–è¦–ç‚¹
    let time = 0;
    let animationId = null;
    
    // æç”»ã‚¹ã‚±ãƒ¼ãƒ«
    const scale = 30;  // 1m = 30px
    
    // CanvasåˆæœŸåŒ–
    function resizeCanvas() {
        const container = canvas.parentElement;
        canvas.width = container.clientWidth;
        canvas.height = 400;
    }
    
    // é‹å‹•æ–¹ç¨‹å¼ã®è¡¨ç¤ºã‚’æ›´æ–°
    function updateEquationDisplay() {
        if (isInsideView) {
            // è»Šå†…è¦–ç‚¹
            equationDisplay.className = 'equation-display inside';
            equationTitle.textContent = 'ğŸ“ è»Šå†…ã‹ã‚‰è¦‹ãŸé‹å‹•æ–¹ç¨‹å¼ï¼ˆé›»è»Šã«ä¹—ã£ã¦ã„ã‚‹äººï¼‰';
            motionDescription.innerHTML = '<strong>ä¸­ã®äººã®é‹å‹•çŠ¶æ…‹ï¼š</strong>é›»è»Šå†…ã§ã¯<span style="color: #f57c00; font-weight: bold;">é™æ­¢ã—ã¦ã„ã‚‹</span>ï¼ˆ$a\' = 0$ï¼‰';
            equationMain.innerHTML = '$$0 = f - ma$$';
            equationExplanation.innerHTML = 'ä¸­ã®äººã¯é›»è»Šå†…ã§é™æ­¢ã—ã¦ã„ã‚‹ã®ã§ã€åŠ›ãŒã¤ã‚Šåˆã£ã¦ã„ã‚‹ã€‚<br>' +
                'æ‘©æ“¦åŠ› $f$ï¼ˆå³å‘ãï¼‰ã¨<strong style="color: #9b59b6;">æ…£æ€§åŠ› $ma$</strong>ï¼ˆå·¦å‘ãï¼‰ãŒã¤ã‚Šåˆã†ã€‚<br>' +
                'æ•´ç†ã™ã‚‹ã¨ï¼š$f = ma$';
            equationNote.textContent = 'â€» æ…£æ€§åŠ›ã‚’å°å…¥ã™ã‚‹ã“ã¨ã§ã€é™æ­¢ï¼ˆåŠ›ã®ã¤ã‚Šåˆã„ï¼‰ã¨ã—ã¦èª¬æ˜ã§ãã‚‹ã€‚';
        } else {
            // è»Šå¤–è¦–ç‚¹
            equationDisplay.className = 'equation-display outside';
            equationTitle.textContent = 'ğŸ“ è»Šå¤–ã‹ã‚‰è¦‹ãŸé‹å‹•æ–¹ç¨‹å¼ï¼ˆåœ°é¢ã«ç«‹ã£ã¦ã„ã‚‹äººï¼‰';
            motionDescription.innerHTML = '<strong>ä¸­ã®äººã®é‹å‹•çŠ¶æ…‹ï¼š</strong>é›»è»Šã¨ã¨ã‚‚ã«åŠ é€Ÿåº¦ $a$ ã§<span style="color: #1976D2; font-weight: bold;">åŠ é€Ÿåº¦é‹å‹•ã—ã¦ã„ã‚‹</span>';
            equationMain.innerHTML = '$$ma = f$$';
            equationExplanation.innerHTML = 'ä¸­ã®äººã¯é›»è»Šã¨åŒã˜åŠ é€Ÿåº¦ $a$ ã§é‹å‹•ã—ã¦ã„ã‚‹ã®ã§ã€é‹å‹•æ–¹ç¨‹å¼ã¯ $ma = f$ ã¨ãªã‚‹ã€‚<br>' +
                'ã“ã“ã§ $f$ ã¯åºŠã‹ã‚‰ã®<strong>æ‘©æ“¦åŠ›</strong>ï¼ˆåŠ é€Ÿåº¦ã¨åŒã˜å‘ãï¼‰ã€‚';
            equationNote.textContent = 'â€» æ…£æ€§åŠ›ã¯ç™»å ´ã—ãªã„ã€‚æ‘©æ“¦åŠ›ã ã‘ã§åŠ é€Ÿã‚’èª¬æ˜ã§ãã‚‹ã€‚';
        }
        
        // MathJaxã‚’å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        if (window.MathJax) {
            MathJax.typesetPromise();
        }
    }
    
    // ã‚·ãƒ¼ãƒ³æç”»
    function drawScene() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        const groundY = canvas.height - 50;
        const trainWidth = 250;
        const trainHeight = 120;
        
        // è¦–ç‚¹ã«å¿œã˜ãŸæç”»ä½ç½®ã®è¨ˆç®—
        let trainDrawX, personDrawX;
        
        if (isInsideView) {
            // è»Šå†…è¦–ç‚¹ï¼šé›»è»Šã¯ç”»é¢ä¸­å¤®ã«å›ºå®š
            trainDrawX = (canvas.width - trainWidth) / 2;
            personDrawX = trainDrawX + trainWidth / 2 + personRelativePos * scale;
        } else {
            // è»Šå¤–è¦–ç‚¹ï¼šé›»è»ŠãŒå‹•ã
            const centerOffset = canvas.width / 2 - trainWidth / 2;
            trainDrawX = centerOffset + trainPosition * scale * 0.3; // ã‚¹ã‚±ãƒ¼ãƒ«èª¿æ•´
            personDrawX = trainDrawX + trainWidth / 2 + personRelativePos * scale;
        }
        
        // èƒŒæ™¯ï¼ˆåœ°é¢ï¼‰
        ctx.fillStyle = '#8B4513';
        ctx.fillRect(0, groundY, canvas.width, 50);
        
        // åœ°é¢ã®æ¨¡æ§˜ï¼ˆè»Šå¤–è¦–ç‚¹ã§ã¯å‹•ãï¼‰
        ctx.strokeStyle = '#654321';
        ctx.lineWidth = 2;
        for (let i = -20; i < 40; i++) {
            let lineX;
            if (isInsideView) {
                lineX = i * 50 - (trainPosition * scale * 0.3) % 50;
            } else {
                lineX = i * 50;
            }
            ctx.beginPath();
            ctx.moveTo(lineX, groundY);
            ctx.lineTo(lineX, canvas.height);
            ctx.stroke();
        }
        
        // ç·šè·¯
        ctx.fillStyle = '#444';
        ctx.fillRect(0, groundY - 10, canvas.width, 10);
        
        // é›»è»Šæœ¬ä½“
        ctx.fillStyle = '#3498db';
        ctx.fillRect(trainDrawX, groundY - trainHeight - 30, trainWidth, trainHeight);
        
        // é›»è»Šã®çª“
        ctx.fillStyle = '#ecf0f1';
        for (let i = 0; i < 3; i++) {
            ctx.fillRect(trainDrawX + 30 + i * 75, groundY - trainHeight - 10, 50, 40);
        }
        
        // é›»è»Šã®è»Šè¼ª
        ctx.fillStyle = '#333';
        ctx.beginPath();
        ctx.arc(trainDrawX + 50, groundY - 25, 20, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(trainDrawX + trainWidth - 50, groundY - 25, 20, 0, Math.PI * 2);
        ctx.fill();
        
        // äººï¼ˆæ£’äººé–“ï¼‰
        const personX = Math.max(trainDrawX + 30, Math.min(trainDrawX + trainWidth - 30, personDrawX));
        const personY = groundY - 50;
        drawPerson(personX, personY);
        
        // åŠ é€Ÿåº¦ã®çŸ¢å°ï¼ˆé›»è»Šã®ä¸Šã«å¤§ããè¡¨ç¤ºï¼‰
        if (Math.abs(acceleration) > 0.1) {
            drawAccelerationArrow(trainDrawX + trainWidth / 2, groundY - trainHeight - 70);
        }
        
        // æ…£æ€§åŠ›ã®çŸ¢å°ï¼ˆè»Šå†…è¦–ç‚¹ã®ã¿ã€äººã®æ¨ªã«è¡¨ç¤ºï¼‰
        if (isInsideView && Math.abs(acceleration) > 0.1) {
            drawInertialForceArrow(personX, personY - 40);
        }
        
        // æ‘©æ“¦åŠ›ã®çŸ¢å°ï¼ˆäººã®è¶³å…ƒã«è¡¨ç¤ºï¼‰
        if (Math.abs(acceleration) > 0.1) {
            drawFrictionArrow(personX, personY + 5);
        }
        
        // è¦–ç‚¹ãƒ©ãƒ™ãƒ«ã¨é‹å‹•çŠ¶æ…‹
        ctx.fillStyle = '#333';
        ctx.font = 'bold 18px sans-serif';
        if (isInsideView) {
            ctx.fillText('ã€è»Šå†…è¦–ç‚¹ã€‘é›»è»Šã¨ä¸€ç·’ã«å‹•ã„ã¦ã„ã‚‹è¦³æ¸¬è€…', 20, 30);
            ctx.font = 'bold 16px sans-serif';
            ctx.fillStyle = '#f57c00';
            ctx.fillText('â†’ ä¸­ã®äººã¯ã€Œé™æ­¢ã€ã—ã¦è¦‹ãˆã‚‹', 20, 55);
        } else {
            ctx.fillText('ã€è»Šå¤–è¦–ç‚¹ã€‘åœ°é¢ã«ç«‹ã£ã¦è¦‹ã¦ã„ã‚‹è¦³æ¸¬è€…', 20, 30);
            ctx.font = 'bold 16px sans-serif';
            ctx.fillStyle = '#1976D2';
            ctx.fillText('â†’ ä¸­ã®äººã¯é›»è»Šã¨ä¸€ç·’ã«ã€ŒåŠ é€Ÿåº¦é‹å‹•ã€ã—ã¦ã„ã‚‹', 20, 55);
        }
        
        // æƒ…å ±è¡¨ç¤º
        ctx.font = '14px sans-serif';
        ctx.fillStyle = '#666';
        ctx.fillText(`é›»è»Šã®é€Ÿåº¦: ${trainVelocity.toFixed(1)} m/s`, 20, 85);
        ctx.fillText(`çµŒéæ™‚é–“: ${time.toFixed(1)} s`, 20, 105);
    }
    
    // äººã‚’æç”»
    function drawPerson(x, y) {
        ctx.strokeStyle = '#e74c3c';
        ctx.fillStyle = '#e74c3c';
        ctx.lineWidth = 3;
        
        // é ­
        ctx.beginPath();
        ctx.arc(x, y - 55, 12, 0, Math.PI * 2);
        ctx.fill();
        
        // ä½“
        ctx.beginPath();
        ctx.moveTo(x, y - 43);
        ctx.lineTo(x, y - 10);
        ctx.stroke();
        
        // è…•
        ctx.beginPath();
        ctx.moveTo(x - 15, y - 35);
        ctx.lineTo(x, y - 30);
        ctx.lineTo(x + 15, y - 35);
        ctx.stroke();
        
        // è¶³
        ctx.beginPath();
        ctx.moveTo(x, y - 10);
        ctx.lineTo(x - 12, y);
        ctx.moveTo(x, y - 10);
        ctx.lineTo(x + 12, y);
        ctx.stroke();
    }
    
    // åŠ é€Ÿåº¦çŸ¢å°ã‚’æç”»
    function drawAccelerationArrow(x, y) {
        const arrowLength = Math.abs(acceleration) * 25;
        const direction = acceleration > 0 ? 1 : -1;
        
        ctx.fillStyle = '#e74c3c';
        ctx.strokeStyle = '#e74c3c';
        ctx.lineWidth = 6;
        
        // çŸ¢å°ã®ç·š
        ctx.beginPath();
        ctx.moveTo(x - direction * arrowLength / 2, y);
        ctx.lineTo(x + direction * arrowLength / 2, y);
        ctx.stroke();
        
        // çŸ¢ã˜ã‚Š
        ctx.beginPath();
        ctx.moveTo(x + direction * arrowLength / 2, y);
        ctx.lineTo(x + direction * (arrowLength / 2 - 15), y - 10);
        ctx.lineTo(x + direction * (arrowLength / 2 - 15), y + 10);
        ctx.closePath();
        ctx.fill();
        
        // ãƒ©ãƒ™ãƒ«
        ctx.font = 'bold 16px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText(`é›»è»Šã®åŠ é€Ÿåº¦ a = ${acceleration.toFixed(1)} m/sÂ²`, x, y - 20);
        ctx.textAlign = 'left';
    }
    
    // æ…£æ€§åŠ›çŸ¢å°ã‚’æç”»ï¼ˆè»Šå†…è¦–ç‚¹ã®ã¿ï¼‰
    function drawInertialForceArrow(x, y) {
        const arrowLength = Math.abs(acceleration) * 20;
        const direction = acceleration > 0 ? -1 : 1;  // åŠ é€Ÿåº¦ã¨é€†å‘ã
        
        ctx.fillStyle = '#9b59b6';
        ctx.strokeStyle = '#9b59b6';
        ctx.lineWidth = 5;
        
        // çŸ¢å°ã®ç·š
        ctx.beginPath();
        ctx.moveTo(x, y);
        ctx.lineTo(x + direction * arrowLength, y);
        ctx.stroke();
        
        // çŸ¢ã˜ã‚Š
        ctx.beginPath();
        ctx.moveTo(x + direction * arrowLength, y);
        ctx.lineTo(x + direction * (arrowLength - 12), y - 8);
        ctx.lineTo(x + direction * (arrowLength - 12), y + 8);
        ctx.closePath();
        ctx.fill();
        
        // ãƒ©ãƒ™ãƒ«
        ctx.font = 'bold 14px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillStyle = '#9b59b6';
        ctx.fillText('æ…£æ€§åŠ› ma', x + direction * arrowLength / 2, y - 15);
        ctx.textAlign = 'left';
    }
    
    // æ‘©æ“¦åŠ›çŸ¢å°ã‚’æç”»
    function drawFrictionArrow(x, y) {
        const arrowLength = Math.abs(acceleration) * 15;
        const direction = acceleration > 0 ? 1 : -1;  // åŠ é€Ÿåº¦ã¨åŒã˜å‘ã
        
        ctx.fillStyle = '#27ae60';
        ctx.strokeStyle = '#27ae60';
        ctx.lineWidth = 4;
        
        // çŸ¢å°ã®ç·š
        ctx.beginPath();
        ctx.moveTo(x, y);
        ctx.lineTo(x + direction * arrowLength, y);
        ctx.stroke();
        
        // çŸ¢ã˜ã‚Š
        ctx.beginPath();
        ctx.moveTo(x + direction * arrowLength, y);
        ctx.lineTo(x + direction * (arrowLength - 10), y - 6);
        ctx.lineTo(x + direction * (arrowLength - 10), y + 6);
        ctx.closePath();
        ctx.fill();
        
        // ãƒ©ãƒ™ãƒ«
        ctx.font = 'bold 12px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillStyle = '#27ae60';
        ctx.fillText('æ‘©æ“¦åŠ› f', x + direction * arrowLength / 2, y + 18);
        ctx.textAlign = 'left';
    }
    
    // ç‰©ç†æ›´æ–°
    function updatePhysics(dt) {
        // é›»è»Šã®é‹å‹•
        trainVelocity += acceleration * dt;
        trainPosition += trainVelocity * dt;
        
        // äººã®é‹å‹•ï¼ˆåœ°é¢åŸºæº–ã§ã¯æ…£æ€§ã§å‹•ã“ã†ã¨ã™ã‚‹ï¼‰
        const friction = 5;
        const relativeVelocity = trainVelocity - personVelocity;
        personVelocity += relativeVelocity * friction * dt;
        
        // äººã®é›»è»Šå†…ã§ã®ç›¸å¯¾ä½ç½®
        personRelativePos = -relativeVelocity * 0.5;
        personRelativePos = Math.max(-2, Math.min(2, personRelativePos));
    }
    
    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ—
    function animate() {
        if (!isRunning) return;
        
        const dt = 0.05;
        time += dt;
        
        updatePhysics(dt);
        drawScene();
        
        animationId = requestAnimationFrame(animate);
    }
    
    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
    aSlider.addEventListener('input', function() {
        acceleration = parseFloat(this.value);
        aDisplay.textContent = acceleration.toFixed(1) + ' m/sÂ²';
        if (!isRunning) {
            drawScene();
        }
    });
    
    startBtn.addEventListener('click', function() {
        if (isRunning) {
            isRunning = false;
            this.textContent = 'â–¶ ã‚¹ã‚¿ãƒ¼ãƒˆ';
            this.style.background = '#4CAF50';
            if (animationId) cancelAnimationFrame(animationId);
        } else {
            isRunning = true;
            this.textContent = 'â¸ ä¸€æ™‚åœæ­¢';
            this.style.background = '#ff9800';
            animate();
        }
    });
    
    resetBtn.addEventListener('click', function() {
        isRunning = false;
        startBtn.textContent = 'â–¶ ã‚¹ã‚¿ãƒ¼ãƒˆ';
        startBtn.style.background = '#4CAF50';
        if (animationId) cancelAnimationFrame(animationId);
        
        trainVelocity = 0;
        trainPosition = 0;
        personVelocity = 0;
        personRelativePos = 0;
        time = 0;
        
        drawScene();
    });
    
    viewBtn.addEventListener('click', function() {
        isInsideView = !isInsideView;
        
        if (isInsideView) {
            this.textContent = 'ğŸ”„ è»Šå¤–è¦–ç‚¹ã«åˆ‡æ›¿';
            this.classList.add('active');
            viewIndicator.textContent = 'ğŸ‘ ç¾åœ¨ã®è¦–ç‚¹ï¼šè»Šå†…ï¼ˆé›»è»Šã«ä¹—ã£ã¦ã„ã‚‹äººï¼‰';
            viewIndicator.className = 'view-indicator inside';
        } else {
            this.textContent = 'ğŸ”„ è»Šå†…è¦–ç‚¹ã«åˆ‡æ›¿';
            this.classList.remove('active');
            viewIndicator.textContent = 'ğŸ‘ ç¾åœ¨ã®è¦–ç‚¹ï¼šè»Šå¤–ï¼ˆåœ°é¢ã«ç«‹ã£ã¦ã„ã‚‹äººï¼‰';
            viewIndicator.className = 'view-indicator outside';
        }
        
        updateEquationDisplay();
        drawScene();
    });
    
    // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚µã‚¤ã‚ºå¯¾å¿œ
    window.addEventListener('resize', function() {
        resizeCanvas();
        drawScene();
    });
    
    // åˆæœŸåŒ–
    resizeCanvas();
    drawScene();
    updateEquationDisplay();
    </script>
</body>
</html>