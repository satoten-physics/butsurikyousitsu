<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜æ ¡ç‰©ç† - ç›¸å¯¾é€Ÿåº¦</title>
    <script>
      window.MathJax = {
      tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
     }
     };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .back-link {
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 10px;
        }
        h1 {
            color: #333;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .tab-btn {
            flex: 1;
            min-width: 150px;
            padding: 12px 20px;
            border: none;
            background: #f0f0f0;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
            transition: all 0.3s;
        }
        .tab-btn.active {
            background: #667eea;
            color: white;
        }
        .tab-btn:hover {
            background: #8899f0;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        h2 {
            color: #667eea;
            margin-bottom: 15px;
        }
        h3 {
            color: #555;
            margin: 25px 0 15px 0;
            padding-bottom: 5px;
            border-bottom: 2px solid #667eea;
        }
        .pdf-placeholder {
            background: #f9f9f9;
            padding: 40px;
            text-align: center;
            border-radius: 5px;
            color: #666;
        }
        
        /* è§£èª¬ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .lecture-content {
            line-height: 1.8;
            color: #333;
        }
        .lecture-content p {
            margin-bottom: 15px;
        }
        .important-box {
            background: linear-gradient(135deg, #e8f4fd 0%, #d1e8ff 100%);
            border-left: 5px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }
        .formula-box {
            background: #fff9e6;
            border: 2px solid #f0c040;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            text-align: center;
        }
        .example-box {
            background: #f0fff0;
            border: 2px solid #50c050;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }
        .diagram-container {
            background: #fafafa;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            text-align: center;
        }
        .diagram-container canvas {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        /* å•é¡Œç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .problem-box {
            background: #f5f5f5;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            border: 1px solid #ddd;
        }
        .problem-box h4 {
            color: #667eea;
            margin-bottom: 10px;
        }
        details {
            margin-top: 15px;
        }
        summary {
            cursor: pointer;
            color: #667eea;
            font-weight: bold;
            padding: 10px;
            background: #e8e8e8;
            border-radius: 5px;
        }
        summary:hover {
            background: #d8d8f8;
        }
        .answer-content {
            padding: 15px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 0 0 5px 5px;
            margin-top: 5px;
        }
        
        /* ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        #sim-container {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        #physicsCanvas {
            display: block;
            width: 100%;
            background: white;
            border-radius: 5px;
            border: 2px solid #ddd;
        }
        .sim-controls {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
        }
        .control-group {
            margin-bottom: 20px;
        }
        .control-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        .control-group input[type="range"] {
            width: 100%;
            margin: 10px 0;
        }
        .value-display {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 5px;
            font-weight: bold;
            min-width: 100px;
            text-align: center;
        }
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .sim-button {
            flex: 1;
            min-width: 120px;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .sim-button.start {
            background: #4CAF50;
            color: white;
        }
        .sim-button.start:hover {
            background: #45a049;
        }
        .sim-button.reset {
            background: #f44336;
            color: white;
        }
        .sim-button.reset:hover {
            background: #da190b;
        }
        .view-toggle {
            background: #ff9800;
            color: white;
        }
        .view-toggle:hover {
            background: #e68900;
        }
        .view-toggle.active {
            background: #667eea;
        }
        .graph-container {
            margin-top: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #ddd;
        }
        .graph-container h3 {
            color: #667eea;
            margin-bottom: 10px;
            border-bottom: none;
        }
        #graphCanvas {
            display: block;
            width: 100%;
            border: 1px solid #eee;
        }
        .info-display {
            background: #333;
            color: #0f0;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            margin-top: 15px;
        }
        .info-display p {
            margin: 5px 0;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            header, .container {
                padding: 15px;
            }
            .tab-btn {
                min-width: 100px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <header>
        <a href="index.html" class="back-link">â† ç›®æ¬¡ã«æˆ»ã‚‹</a>
        <h1>ç›¸å¯¾é€Ÿåº¦ ï½ç‰©ã®è¦‹ãˆæ–¹ã¯ç«‹å ´ã§å¤‰ã‚ã‚‹ï½</h1>
    </header>
    <div class="container">
        
        <div class="tabs">
            <button class="tab-btn active" onclick="openTab('lecture')">è§£èª¬ç·¨</button>
            <button class="tab-btn" onclick="openTab('problem')">å•é¡Œç·¨</button>
            <button class="tab-btn" onclick="openTab('simulation')">ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
        </div>
        
        <!-- ========== è§£èª¬ã‚¿ãƒ– ========== -->
        <div id="lecture" class="tab-content active">
            <h2>æˆæ¥­è³‡æ–™</h2>
            <iframe src="https://drive.google.com/file/d/1rd3AUHNkj-NLM0IEztEdsiVOdPwxD6EA/preview" width="100%" height="500"></iframe>
            
            <div class="lecture-content">
                <h3>1. çµ¶å¯¾çš„ãªè¦‹æ–¹ã¨ç›¸å¯¾çš„ãªè¦‹æ–¹</h3>
                
                <p>é›»è»Šã«ä¹—ã£ã¦ã„ã‚‹ã¨ãã€çª“ã®å¤–ã®æ™¯è‰²ãŒå¾Œã‚ã«æµã‚Œã¦ã„ãã‚ˆã†ã«è¦‹ãˆã¾ã™ã€‚ã“ã®ã¨ãã€ã‚ãªãŸã¯æ¬¡ã®ã©ã¡ã‚‰ã®è¦‹æ–¹ã‚’ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ</p>
                
                <div class="example-box">
                    <p><strong>è¦‹æ–¹â‘ ï¼šã€Œè‡ªåˆ†ï¼ˆé›»è»Šï¼‰ãŒå‹•ã„ã¦ã„ã‚‹ã€ã¨è€ƒãˆã‚‹</strong></p>
                    <p>â†’ åœ°é¢ã¯æ­¢ã¾ã£ã¦ã„ã¦ã€è‡ªåˆ†ãŒå‰ã«é€²ã‚“ã§ã„ã‚‹ã€‚ã“ã‚ŒãŒ<strong>çµ¶å¯¾çš„ãªè¦–ç‚¹</strong>ã§ã™ã€‚</p>
                    <br>
                    <p><strong>è¦‹æ–¹â‘¡ï¼šã€Œå¤–ã®æ™¯è‰²ãŒå‹•ã„ã¦ã„ã‚‹ã€ã¨è€ƒãˆã‚‹</strong></p>
                    <p>â†’ è‡ªåˆ†ã¯æ­¢ã¾ã£ã¦ã„ã¦ã€æ™¯è‰²ãŒå¾Œã‚ã«æµã‚Œã¦ã„ã‚‹ã€‚ã“ã‚ŒãŒ<strong>ç›¸å¯¾çš„ãªè¦–ç‚¹</strong>ã§ã™ã€‚</p>
                </div>
                
                <p>ç§ãŸã¡ã¯æ™®æ®µã€åœ°é¢ã‚’åŸºæº–ï¼ˆæ­¢ã¾ã£ã¦ã„ã‚‹ã‚‚ã®ï¼‰ã¨ã—ã¦ç‰©ã®å‹•ãã‚’è¦‹ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’<strong>çµ¶å¯¾çš„è¦–ç‚¹</strong>ã¨ã„ã„ã¾ã™ã€‚</p>
                
                <p>ä¸€æ–¹ã€å‹•ã„ã¦ã„ã‚‹è‡ªåˆ†è‡ªèº«ã‚’åŸºæº–ã«ã—ã¦ã€ä»–ã®ã‚‚ã®ãŒã©ã†å‹•ã„ã¦è¦‹ãˆã‚‹ã‹ã‚’è€ƒãˆã‚‹ã®ãŒ<strong>ç›¸å¯¾çš„è¦–ç‚¹</strong>ã§ã™ã€‚ç‰©ç†ã§ã¯ã€ã“ã®ã€Œç›¸å¯¾çš„ãªè¦‹æ–¹ã€ãŒã¨ã¦ã‚‚é‡è¦ã«ãªã‚Šã¾ã™ã€‚</p>
                
                <div class="important-box">
                    <p><strong>ãƒã‚¤ãƒ³ãƒˆï¼š</strong>ç‰©ã®å‹•ãã®è¦‹ãˆæ–¹ã¯ã€ã€Œä½•ã‚’åŸºæº–ã«ã™ã‚‹ã‹ã€ã§å¤‰ã‚ã‚Šã¾ã™ã€‚</p>
                    <p>ã©ã¡ã‚‰ã®è¦‹æ–¹ã‚‚æ­£ã—ãã€çŠ¶æ³ã«å¿œã˜ã¦ä½¿ã„åˆ†ã‘ã‚‹ã“ã¨ã§å•é¡ŒãŒè§£ãã‚„ã™ããªã‚Šã¾ã™ï¼</p>
                </div>
                
                <h3>2. ç›¸å¯¾é€Ÿåº¦ã¨ã¯</h3>
                
                <p><strong>ç›¸å¯¾é€Ÿåº¦</strong>ã¨ã¯ã€ã€Œã‚ã‚‹è¦³æ¸¬è€…ã‹ã‚‰è¦‹ãŸã€åˆ¥ã®ç‰©ä½“ã®é€Ÿåº¦ã€ã®ã“ã¨ã§ã™ã€‚</p>
                
                <p>ä¾‹ãˆã°ã€ã‚ãªãŸï¼ˆè¦³æ¸¬è€…Aï¼‰ãŒé€Ÿåº¦ $\vec{v}_A$ ã§å‹•ã„ã¦ã„ã‚‹ã¨ãã€ç‰©ä½“BãŒé€Ÿåº¦ $\vec{v}_B$ ã§å‹•ã„ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚ã“ã®ã¨ãã€<strong>Aã‹ã‚‰è¦‹ãŸBã®é€Ÿåº¦</strong>ï¼ˆBã®Aã«å¯¾ã™ã‚‹ç›¸å¯¾é€Ÿåº¦ï¼‰$\vec{v}_{BA}$ ã¯æ¬¡ã®å¼ã§æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚</p>
                
                <div class="formula-box">
                    <p style="font-size: 1.3em;"><strong>ç›¸å¯¾é€Ÿåº¦ã®å…¬å¼</strong></p>
                    <p style="font-size: 1.5em; margin: 15px 0;">$$\vec{v}_{BA} = \vec{v}_B - \vec{v}_A$$</p>
                    <p>ï¼ˆBã®Aã«å¯¾ã™ã‚‹ç›¸å¯¾é€Ÿåº¦ï¼‰ï¼ï¼ˆBã®é€Ÿåº¦ï¼‰âˆ’ï¼ˆAã®é€Ÿåº¦ï¼‰</p>
                </div>
                
                <div class="important-box">
                    <p><strong>è¦šãˆæ–¹ï¼š</strong>ã€Œã€‡ã€‡ã®â–³â–³ã«å¯¾ã™ã‚‹ç›¸å¯¾é€Ÿåº¦ã€â†’ã€Œã€‡ã€‡ âˆ’ â–³â–³ã€</p>
                    <p>å¼•ãç®—ã®é †ç•ªã¯ã€Œè¦‹ã‚‰ã‚Œã‚‹ç‰© âˆ’ è¦‹ã‚‹äººã€ã§ã™ï¼</p>
                </div>
                
                <h3>3. ãƒ™ã‚¯ãƒˆãƒ«ã®å¼•ãç®—ã‚’å›³ã§ç†è§£ã™ã‚‹</h3>
                
                <p>ç›¸å¯¾é€Ÿåº¦ã¯ãƒ™ã‚¯ãƒˆãƒ«ã®å¼•ãç®—ã§ã™ã€‚ãƒ™ã‚¯ãƒˆãƒ«ã®å¼•ãç®— $\vec{v}_B - \vec{v}_A$ ã¯ã€æ¬¡ã®ã‚ˆã†ã«è€ƒãˆã¾ã™ã€‚</p>
                
                <div class="example-box">
                    <p><strong>ãƒ™ã‚¯ãƒˆãƒ«ã®å¼•ãç®—ã®ã‚„ã‚Šæ–¹ï¼š</strong></p>
                    <p>$$\vec{v}_B - \vec{v}_A = \vec{v}_B + (-\vec{v}_A)$$</p>
                    <p>ã¤ã¾ã‚Šã€ã€Œ$\vec{v}_A$ ã‚’é€†å‘ãã«ã—ãŸãƒ™ã‚¯ãƒˆãƒ« $-\vec{v}_A$ ã‚’ã€$\vec{v}_B$ ã«è¶³ã™ã€ã¨è€ƒãˆã¾ã™ã€‚</p>
                </div>
                
                <div class="diagram-container">
                    <canvas id="vectorDiagram" width="500" height="300"></canvas>
                    <p style="margin-top: 10px; color: #666;">å›³ï¼šãƒ™ã‚¯ãƒˆãƒ«ã®å¼•ãç®— $\vec{v}_{BA} = \vec{v}_B - \vec{v}_A$</p>
                </div>
                
                <p><strong>å›³ã®è¦‹æ–¹ï¼š</strong></p>
                <ol style="margin-left: 20px; margin-bottom: 15px;">
                    <li>é’ã„çŸ¢å° $\vec{v}_A$ ã¨ ç·‘ã®çŸ¢å° $\vec{v}_B$ ãŒå…ƒã®ãƒ™ã‚¯ãƒˆãƒ«</li>
                    <li>$\vec{v}_A$ ã‚’é€†å‘ãã«ã—ãŸ $-\vec{v}_A$ï¼ˆç‚¹ç·šï¼‰ã‚’ä½œã‚‹</li>
                    <li>$\vec{v}_B$ ã®å…ˆç«¯ã‹ã‚‰ $-\vec{v}_A$ ã‚’è¶³ã™ã¨ã€èµ¤ã„çŸ¢å° $\vec{v}_{BA}$ ãŒå¾—ã‚‰ã‚Œã‚‹</li>
                </ol>
                
                <h3>4. 1æ¬¡å…ƒã®ç›¸å¯¾é€Ÿåº¦ï¼ˆåŒä¸€ç›´ç·šä¸Šã®é‹å‹•ï¼‰</h3>
                
                <p>ã¾ãšã¯ç°¡å˜ãªä¾‹ã¨ã—ã¦ã€åŒã˜ç›´ç·šä¸Šã‚’å‹•ã2ã¤ã®ç‰©ä½“ã‚’è€ƒãˆã¾ã—ã‚‡ã†ã€‚</p>
                
                <div class="example-box">
                    <p><strong>ä¾‹é¡Œ1ï¼šåŒã˜å‘ãã«é€²ã‚€2å°ã®è»Š</strong></p>
                    <p>è»ŠAãŒæ±å‘ãã« 10 m/sã€è»ŠBãŒæ±å‘ãã« 15 m/s ã§èµ°ã£ã¦ã„ã¾ã™ã€‚</p>
                    <p>Aã‹ã‚‰è¦‹ãŸBã®ç›¸å¯¾é€Ÿåº¦ã¯ï¼Ÿ</p>
                    <br>
                    <p><strong>è§£ç­”ï¼š</strong></p>
                    <p>æ±å‘ãã‚’æ­£ã¨ã™ã‚‹ã¨ã€$v_A = +10$ m/sã€$v_B = +15$ m/s</p>
                    <p>$$v_{BA} = v_B - v_A = 15 - 10 = +5 \text{ m/sï¼ˆæ±å‘ãï¼‰}$$</p>
                    <p>â†’ Aã‹ã‚‰è¦‹ã‚‹ã¨ã€Bã¯æ±å‘ãã« 5 m/s ã§é ã–ã‹ã£ã¦ã„ãã€‚</p>
                </div>
                
                <div class="example-box">
                    <p><strong>ä¾‹é¡Œ2ï¼šå‘ã‹ã„åˆã£ã¦é€²ã‚€2å°ã®è»Š</strong></p>
                    <p>è»ŠAãŒæ±å‘ãã« 10 m/sã€è»ŠBãŒè¥¿å‘ãã« 15 m/s ã§èµ°ã£ã¦ã„ã¾ã™ã€‚</p>
                    <p>Aã‹ã‚‰è¦‹ãŸBã®ç›¸å¯¾é€Ÿåº¦ã¯ï¼Ÿ</p>
                    <br>
                    <p><strong>è§£ç­”ï¼š</strong></p>
                    <p>æ±å‘ãã‚’æ­£ã¨ã™ã‚‹ã¨ã€$v_A = +10$ m/sã€$v_B = -15$ m/s</p>
                    <p>$$v_{BA} = v_B - v_A = -15 - 10 = -25 \text{ m/sï¼ˆè¥¿å‘ãï¼‰}$$</p>
                    <p>â†’ Aã‹ã‚‰è¦‹ã‚‹ã¨ã€Bã¯è¥¿å‘ãã« 25 m/s ã§è¿‘ã¥ã„ã¦ãã‚‹ã€‚</p>
                </div>
                
                <h3>5. 2æ¬¡å…ƒã®ç›¸å¯¾é€Ÿåº¦ï¼ˆå¹³é¢ä¸Šã®é‹å‹•ï¼‰</h3>
                
                <p>ç‰©ä½“ãŒç•°ãªã‚‹æ–¹å‘ã«å‹•ã„ã¦ã„ã‚‹å ´åˆã€ç›¸å¯¾é€Ÿåº¦ã¯<strong>ãƒ™ã‚¯ãƒˆãƒ«ã®æˆåˆ†ã”ã¨ã®å¼•ãç®—</strong>ã§æ±‚ã‚ã¾ã™ã€‚</p>
                
                <div class="formula-box">
                    <p><strong>2æ¬¡å…ƒã®ç›¸å¯¾é€Ÿåº¦</strong></p>
                    <p>$\vec{v}_A = (v_{Ax}, v_{Ay})$ã€$\vec{v}_B = (v_{Bx}, v_{By})$ ã®ã¨ãã€</p>
                    <p style="font-size: 1.2em; margin: 10px 0;">$$\vec{v}_{BA} = (v_{Bx} - v_{Ax}, v_{By} - v_{Ay})$$</p>
                    <p>ç›¸å¯¾é€Ÿåº¦ã®å¤§ãã•ï¼š$|\vec{v}_{BA}| = \sqrt{(v_{Bx} - v_{Ax})^2 + (v_{By} - v_{Ay})^2}$</p>
                </div>
                
                <div class="example-box">
                    <p><strong>ä¾‹é¡Œ3ï¼šè»Šã‹ã‚‰è¦‹ãŸé›¨</strong></p>
                    <p>é›¨ãŒé‰›ç›´ä¸‹å‘ãã« 5 m/s ã§é™ã£ã¦ã„ã¾ã™ã€‚è»ŠãŒæ°´å¹³ã« 10 m/s ã§èµ°ã£ã¦ã„ã‚‹ã¨ãã€è»Šã‹ã‚‰è¦‹ãŸé›¨ã®é€Ÿåº¦ã¯ï¼Ÿ</p>
                    <br>
                    <p><strong>è§£ç­”ï¼š</strong></p>
                    <p>æ°´å¹³å³å‘ãã‚’ $x$ è»¸æ­£ã€é‰›ç›´ä¸Šå‘ãã‚’ $y$ è»¸æ­£ã¨ã™ã‚‹ã€‚</p>
                    <p>è»Šï¼ˆAï¼‰ã®é€Ÿåº¦ï¼š$\vec{v}_A = (10, 0)$ m/s</p>
                    <p>é›¨ï¼ˆBï¼‰ã®é€Ÿåº¦ï¼š$\vec{v}_B = (0, -5)$ m/s</p>
                    <p>$$\vec{v}_{BA} = \vec{v}_B - \vec{v}_A = (0-10, -5-0) = (-10, -5) \text{ m/s}$$</p>
                    <p>å¤§ãã•ï¼š$|\vec{v}_{BA}| = \sqrt{(-10)^2 + (-5)^2} = \sqrt{125} \approx 11.2$ m/s</p>
                    <p>è§’åº¦ï¼š$\tan\theta = \frac{5}{10} = 0.5$ ã‚ˆã‚Š $\theta \approx 27Â°$ï¼ˆé‰›ç›´ã‹ã‚‰å‰æ–¹ã¸å‚¾ãï¼‰</p>
                    <br>
                    <p><strong>çµè«–ï¼š</strong>è»Šã«ä¹—ã£ã¦ã„ã‚‹äººã‹ã‚‰è¦‹ã‚‹ã¨ã€é›¨ã¯æ–œã‚å‰æ–¹ã‹ã‚‰ç´„ 11.2 m/s ã§é™ã£ã¦ãã‚‹ã‚ˆã†ã«è¦‹ãˆã‚‹ã€‚</p>
                </div>
                
                <div class="important-box">
                    <p><strong>ã¾ã¨ã‚ï¼š</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>ç›¸å¯¾é€Ÿåº¦ = è¦‹ã‚‰ã‚Œã‚‹ç‰©ã®é€Ÿåº¦ âˆ’ è¦³æ¸¬è€…ã®é€Ÿåº¦</li>
                        <li>ãƒ™ã‚¯ãƒˆãƒ«ã®å¼•ãç®—ã¯ã€Œé€†ãƒ™ã‚¯ãƒˆãƒ«ã‚’è¶³ã™ã€ã¨è€ƒãˆã‚‹</li>
                        <li>2æ¬¡å…ƒã§ã¯æˆåˆ†ã”ã¨ã«è¨ˆç®—ã—ã€å¤§ãã•ã¨å‘ãã‚’æ±‚ã‚ã‚‹</li>
                        <li>ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§å®Ÿéš›ã®è¦‹ãˆæ–¹ã‚’ç¢ºèªã—ã‚ˆã†ï¼</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- ========== å•é¡Œã‚¿ãƒ– ========== -->
        <div id="problem" class="tab-content">
            <h2>ç¢ºèªå•é¡Œ</h2>
            
            <div class="problem-box">
                <h4>å•é¡Œ1ï¼š1æ¬¡å…ƒã®ç›¸å¯¾é€Ÿåº¦ï¼ˆåŸºæœ¬ï¼‰</h4>
                <p>æ±è¥¿ã«ä¼¸ã³ã‚‹ç›´ç·šé“è·¯ã‚’ã€è»ŠAãŒæ±å‘ãã« 20 m/sã€è»ŠBãŒè¥¿å‘ãã« 15 m/s ã§èµ°ã£ã¦ã„ã¾ã™ã€‚</p>
                <p>(1) Aã‹ã‚‰è¦‹ãŸBã®ç›¸å¯¾é€Ÿåº¦ã‚’æ±‚ã‚ãªã•ã„ã€‚</p>
                <p>(2) Bã‹ã‚‰è¦‹ãŸAã®ç›¸å¯¾é€Ÿåº¦ã‚’æ±‚ã‚ãªã•ã„ã€‚</p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <div class="answer-content">
                        <p><strong>è§£ç­”ï¼š</strong></p>
                        <p>æ±å‘ãã‚’æ­£ã¨ã™ã‚‹ã€‚$v_A = +20$ m/sã€$v_B = -15$ m/s</p>
                        <br>
                        <p><strong>(1) Aã‹ã‚‰è¦‹ãŸBã®ç›¸å¯¾é€Ÿåº¦ $v_{BA}$</strong></p>
                        <p>$$v_{BA} = v_B - v_A = -15 - 20 = -35 \text{ m/s}$$</p>
                        <p>ç­”ãˆï¼š<strong>è¥¿å‘ãã« 35 m/s</strong></p>
                        <p>ï¼ˆAã‹ã‚‰è¦‹ã‚‹ã¨ã€Bã¯çŒ›ã‚¹ãƒ”ãƒ¼ãƒ‰ã§è¥¿å‘ãã«è¿‘ã¥ã„ã¦ãã‚‹ï¼‰</p>
                        <br>
                        <p><strong>(2) Bã‹ã‚‰è¦‹ãŸAã®ç›¸å¯¾é€Ÿåº¦ $v_{AB}$</strong></p>
                        <p>$$v_{AB} = v_A - v_B = 20 - (-15) = +35 \text{ m/s}$$</p>
                        <p>ç­”ãˆï¼š<strong>æ±å‘ãã« 35 m/s</strong></p>
                        <p>ï¼ˆBã‹ã‚‰è¦‹ã‚‹ã¨ã€Aã¯çŒ›ã‚¹ãƒ”ãƒ¼ãƒ‰ã§æ±å‘ãã«è¿‘ã¥ã„ã¦ãã‚‹ï¼‰</p>
                        <br>
                        <p><strong>ãƒã‚¤ãƒ³ãƒˆï¼š</strong>äº’ã„ã®ç›¸å¯¾é€Ÿåº¦ã¯å¤§ãã•ãŒåŒã˜ã§å‘ããŒé€†ã«ãªã‚‹ã€‚</p>
                    </div>
                </details>
            </div>
            
            <div class="problem-box">
                <h4>å•é¡Œ2ï¼š2æ¬¡å…ƒã®ç›¸å¯¾é€Ÿåº¦ï¼ˆå¿œç”¨ï¼‰</h4>
                <p>æ°´å¹³ãªç·šè·¯ä¸Šã‚’é›»è»ŠAãŒæ±å‘ãã« 5.0 m/s ã§èµ°ã£ã¦ã„ã¾ã™ã€‚é›»è»Šã®çª“ã‹ã‚‰é›¨ã‚’è¦‹ã‚‹ã¨ã€é‰›ç›´æ–¹å‘ã‹ã‚‰ 30Â° å‚¾ã„ã¦å‰æ–¹ã‹ã‚‰é™ã£ã¦ãã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã—ãŸã€‚</p>
                <p>åœ°é¢ã«å¯¾ã™ã‚‹é›¨ã®è½ä¸‹é€Ÿåº¦ï¼ˆé‰›ç›´æˆåˆ†ï¼‰ã‚’æ±‚ã‚ãªã•ã„ã€‚ãŸã ã—ã€é›¨ã¯åœ°é¢ã«å¯¾ã—ã¦é‰›ç›´ã«é™ã£ã¦ã„ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚</p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <div class="answer-content">
                        <p><strong>è§£ç­”ï¼š</strong></p>
                        <p>åœ°é¢ã‹ã‚‰è¦‹ãŸé›¨ã®é€Ÿåº¦ã‚’ $\vec{v}_R = (0, -v_R)$ï¼ˆé‰›ç›´ä¸‹å‘ãï¼‰</p>
                        <p>é›»è»Šã®é€Ÿåº¦ã‚’ $\vec{v}_A = (5.0, 0)$ m/sï¼ˆæ±å‘ãï¼‰</p>
                        <br>
                        <p>é›»è»Šã‹ã‚‰è¦‹ãŸé›¨ã®ç›¸å¯¾é€Ÿåº¦ã¯ï¼š</p>
                        <p>$$\vec{v}_{RA} = \vec{v}_R - \vec{v}_A = (-5.0, -v_R)$$</p>
                        <br>
                        <p>ã“ã®ç›¸å¯¾é€Ÿåº¦ãŒé‰›ç›´ã‹ã‚‰ 30Â° å‚¾ã„ã¦ã„ã‚‹ã®ã§ï¼š</p>
                        <p>$$\tan 30Â° = \frac{5.0}{v_R}$$</p>
                        <p>$$v_R = \frac{5.0}{\tan 30Â°} = \frac{5.0}{1/\sqrt{3}} = 5.0\sqrt{3} \approx 8.7 \text{ m/s}$$</p>
                        <br>
                        <p>ç­”ãˆï¼š<strong>ç´„ 8.7 m/s</strong>ï¼ˆã¾ãŸã¯ $5\sqrt{3}$ m/sï¼‰</p>
                    </div>
                </details>
            </div>
            
            <div class="problem-box">
                <h4>å•é¡Œ3ï¼šç›¸å¯¾é€Ÿåº¦ã®æ¦‚å¿µç†è§£</h4>
                <p>æ¬¡ã®æ–‡ç« ã®ç©ºæ¬„ã‚’åŸ‹ã‚ãªã•ã„ã€‚</p>
                <p>ã€Œç›¸å¯¾é€Ÿåº¦ã€ã¨ã¯ï¼ˆ ã‚¢ ï¼‰ã‹ã‚‰è¦‹ãŸï¼ˆ ã‚¤ ï¼‰ã®é€Ÿåº¦ã®ã“ã¨ã§ã‚ã‚‹ã€‚AãŒBã«å¯¾ã—ã¦æŒã¤ç›¸å¯¾é€Ÿåº¦ $\vec{v}_{AB}$ ã¯ã€å¼ $\vec{v}_{AB} = $ï¼ˆ ã‚¦ ï¼‰ã§è¡¨ã•ã‚Œã‚‹ã€‚</p>
                <p>ã¾ãŸã€åŒã˜å‘ãã«åŒã˜é€Ÿã•ã§å‹•ã„ã¦ã„ã‚‹2ã¤ã®ç‰©ä½“ã®ç›¸å¯¾é€Ÿåº¦ã¯ï¼ˆ ã‚¨ ï¼‰ã§ã‚ã‚‹ã€‚</p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <div class="answer-content">
                        <p><strong>è§£ç­”ï¼š</strong></p>
                        <p>ã‚¢ï¼š<strong>è¦³æ¸¬è€…ï¼ˆã¾ãŸã¯åŸºæº–ã¨ãªã‚‹ç‰©ä½“ï¼‰</strong></p>
                        <p>ã‚¤ï¼š<strong>ä»–ã®ç‰©ä½“ï¼ˆã¾ãŸã¯è¦³æ¸¬ã•ã‚Œã‚‹ç‰©ä½“ï¼‰</strong></p>
                        <p>ã‚¦ï¼š<strong>$\vec{v}_A - \vec{v}_B$</strong></p>
                        <p>ã‚¨ï¼š<strong>0ï¼ˆã‚¼ãƒ­ï¼‰</strong></p>
                        <br>
                        <p><strong>è§£èª¬ï¼š</strong></p>
                        <p>ç›¸å¯¾é€Ÿåº¦ã¯ã€Œèª°ã‹ã‚‰è¦‹ã‚‹ã‹ã€ã‚’æ˜ç¢ºã«ã™ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚ã€ŒAã®Bã«å¯¾ã™ã‚‹ç›¸å¯¾é€Ÿåº¦ã€ã¯ã€ŒBã‹ã‚‰è¦‹ãŸAã®é€Ÿåº¦ã€ã¨åŒã˜æ„å‘³ã§ã€$\vec{v}_A - \vec{v}_B$ ã§è¨ˆç®—ã—ã¾ã™ã€‚</p>
                        <p>åŒã˜å‘ãã«åŒã˜é€Ÿã•ã§å‹•ãç‰©ä½“åŒå£«ã¯ã€äº’ã„ã«é™æ­¢ã—ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã‚‹ãŸã‚ã€ç›¸å¯¾é€Ÿåº¦ã¯ 0 ã«ãªã‚Šã¾ã™ã€‚</p>
                    </div>
                </details>
            </div>
        </div>
        
        <!-- ========== ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ– ========== -->
        <div id="simulation" class="tab-content">
            <h2>è»Šã‹ã‚‰è¦‹ãŸé›¨ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>
            <p>è»Šã®é€Ÿåº¦ã¨é›¨ã®é€Ÿåº¦ã‚’å¤‰ãˆã¦ã€è»Šã‹ã‚‰è¦‹ãŸé›¨ã®è¦‹ãˆæ–¹ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p>
            
            <div id="sim-container">
                <canvas id="physicsCanvas"></canvas>
            </div>
            
            <div class="sim-controls">
                <div class="control-group">
                    <label>è»Šã®é€Ÿåº¦ (v<sub>è»Š</sub>): <span class="value-display" id="vCarDisplay">10 m/s</span></label>
                    <input type="range" id="vCarSlider" min="0" max="30" value="10" step="1">
                </div>
                
                <div class="control-group">
                    <label>é›¨ã®è½ä¸‹é€Ÿåº¦ (v<sub>é›¨</sub>): <span class="value-display" id="vRainDisplay">5 m/s</span></label>
                    <input type="range" id="vRainSlider" min="1" max="20" value="5" step="1">
                </div>
                
                <div class="button-group">
                    <button class="sim-button start" id="startBtn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
                    <button class="sim-button reset" id="resetBtn">ãƒªã‚»ãƒƒãƒˆ</button>
                    <button class="sim-button view-toggle" id="viewBtn">è¦–ç‚¹åˆ‡æ›¿ï¼šåœ°é¢</button>
                </div>
                
                <div class="info-display">
                    <p><strong>ã€è¨ˆç®—çµæœã€‘</strong></p>
                    <p>åœ°é¢ã‹ã‚‰è¦‹ãŸé›¨ã®é€Ÿåº¦ï¼š<span id="absRainInfo">é‰›ç›´ä¸‹å‘ã 5 m/s</span></p>
                    <p>è»Šã‹ã‚‰è¦‹ãŸé›¨ã®ç›¸å¯¾é€Ÿåº¦ï¼š<span id="relRainInfo">è¨ˆç®—ä¸­...</span></p>
                    <p>ç›¸å¯¾é€Ÿåº¦ã®è§’åº¦ï¼ˆé‰›ç›´ã‹ã‚‰ï¼‰ï¼š<span id="angleInfo">è¨ˆç®—ä¸­...</span></p>
                </div>
            </div>
            
            <div class="graph-container">
                <h3>é€Ÿåº¦ãƒ™ã‚¯ãƒˆãƒ«å›³</h3>
                <canvas id="graphCanvas"></canvas>
                <p style="margin-top: 10px; color: #666; text-align: center;">é’ï¼šè»Šã®é€Ÿåº¦ã€€ç·‘ï¼šé›¨ã®é€Ÿåº¦ã€€èµ¤ï¼šè»Šã‹ã‚‰è¦‹ãŸé›¨ã®ç›¸å¯¾é€Ÿåº¦</p>
            </div>
        </div>
    </div>
    
    <script>
    // --- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ ---
    function openTab(tabName) {
        var contents = document.getElementsByClassName("tab-content");
        for (var i = 0; i < contents.length; i++) {
            contents[i].style.display = "none";
            contents[i].classList.remove("active");
        }
        var buttons = document.getElementsByClassName("tab-btn");
        for (var i = 0; i < buttons.length; i++) {
            buttons[i].classList.remove("active");
        }
        document.getElementById(tabName).style.display = "block";
        document.getElementById(tabName).classList.add("active");
        if (event) {
            event.currentTarget.classList.add("active");
        }
        
        // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ–ãŒé–‹ã‹ã‚ŒãŸã‚‰ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ãƒªã‚µã‚¤ã‚º
        if (tabName === 'simulation') {
            resizeCanvases();
            drawGraph();
        }
        
        // è§£èª¬ã‚¿ãƒ–ãŒé–‹ã‹ã‚ŒãŸã‚‰ãƒ™ã‚¯ãƒˆãƒ«å›³ã‚’æç”»
        if (tabName === 'lecture') {
            drawVectorDiagram();
        }
    }

    // --- ãƒ™ã‚¯ãƒˆãƒ«å›³ã®æç”»ï¼ˆè§£èª¬ã‚¿ãƒ–ç”¨ï¼‰ ---
    function drawVectorDiagram() {
        const canvas = document.getElementById('vectorDiagram');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        const W = canvas.width;
        const H = canvas.height;
        
        ctx.clearRect(0, 0, W, H);
        ctx.fillStyle = '#fafafa';
        ctx.fillRect(0, 0, W, H);
        
        const originX = 100;
        const originY = H / 2;
        const scale = 25;
        
        // åŸç‚¹
        ctx.beginPath();
        ctx.arc(originX, originY, 5, 0, Math.PI * 2);
        ctx.fillStyle = '#333';
        ctx.fill();
        ctx.fillStyle = '#333';
        ctx.font = '14px sans-serif';
        ctx.fillText('O', originX - 15, originY + 5);
        
        // ãƒ™ã‚¯ãƒˆãƒ«vAï¼ˆé’ï¼‰
        const vAx = 6, vAy = -2;
        drawArrow(ctx, originX, originY, originX + vAx * scale, originY + vAy * scale, '#2196F3', 3);
        ctx.fillStyle = '#2196F3';
        ctx.fillText('vA', originX + vAx * scale + 10, originY + vAy * scale);
        
        // ãƒ™ã‚¯ãƒˆãƒ«vBï¼ˆç·‘ï¼‰
        const vBx = 3, vBy = 3;
        drawArrow(ctx, originX, originY, originX + vBx * scale, originY + vBy * scale, '#4CAF50', 3);
        ctx.fillStyle = '#4CAF50';
        ctx.fillText('vB', originX + vBx * scale + 10, originY + vBy * scale);
        
        // -vAï¼ˆç‚¹ç·šã€ã‚°ãƒ¬ãƒ¼ï¼‰
        ctx.setLineDash([5, 5]);
        drawArrow(ctx, originX + vBx * scale, originY + vBy * scale, 
                  originX + vBx * scale - vAx * scale, originY + vBy * scale - vAy * scale, '#999', 2);
        ctx.setLineDash([]);
        ctx.fillStyle = '#999';
        ctx.fillText('-vA', originX + vBx * scale - vAx * scale - 30, originY + vBy * scale - vAy * scale);
        
        // ç›¸å¯¾é€Ÿåº¦ vBA = vB - vAï¼ˆèµ¤ï¼‰
        const vBAx = vBx - vAx;
        const vBAy = vBy - vAy;
        drawArrow(ctx, originX, originY, originX + vBAx * scale, originY + vBAy * scale, '#f44336', 3);
        ctx.fillStyle = '#f44336';
        ctx.font = 'bold 14px sans-serif';
        ctx.fillText('vBA = vB - vA', originX + vBAx * scale + 10, originY + vBAy * scale + 20);
    }

    // --- çŸ¢å°ã‚’æç”»ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•° ---
    function drawArrow(ctx, fromX, fromY, toX, toY, color, lineWidth) {
        const headLen = 15;
        const angle = Math.atan2(toY - fromY, toX - fromX);
        
        ctx.strokeStyle = color;
        ctx.fillStyle = color;
        ctx.lineWidth = lineWidth;
        
        ctx.beginPath();
        ctx.moveTo(fromX, fromY);
        ctx.lineTo(toX, toY);
        ctx.stroke();
        
        ctx.beginPath();
        ctx.moveTo(toX, toY);
        ctx.lineTo(toX - headLen * Math.cos(angle - Math.PI / 6), toY - headLen * Math.sin(angle - Math.PI / 6));
        ctx.lineTo(toX - headLen * Math.cos(angle + Math.PI / 6), toY - headLen * Math.sin(angle + Math.PI / 6));
        ctx.closePath();
        ctx.fill();
    }

    // --- ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¤‰æ•° ---
    const physCanvas = document.getElementById('physicsCanvas');
    const physCtx = physCanvas.getContext('2d');
    const graphCanvas = document.getElementById('graphCanvas');
    const graphCtx = graphCanvas.getContext('2d');
    
    let vCar = 10;  // è»Šã®é€Ÿåº¦ m/s
    let vRain = 5;  // é›¨ã®è½ä¸‹é€Ÿåº¦ m/s
    let isRunning = false;
    let isCarView = false;  // true: è»Šè¦–ç‚¹ã€false: åœ°é¢è¦–ç‚¹
    let animationId = null;
    let time = 0;
    
    // é›¨ç²’ã®é…åˆ—
    let raindrops = [];
    const NUM_RAINDROPS = 100;
    
    // è»Šã®ä½ç½®
    let carX = 100;
    
    // --- åˆæœŸåŒ– ---
    function init() {
        resizeCanvases();
        initRaindrops();
        updateDisplays();
        draw();
        drawGraph();
    }
    
    function resizeCanvases() {
        const container = document.getElementById('sim-container');
        physCanvas.width = container.clientWidth - 40;
        physCanvas.height = 350;
        
        const graphContainer = document.querySelector('.graph-container');
        graphCanvas.width = graphContainer.clientWidth - 30;
        graphCanvas.height = 250;
    }
    
    function initRaindrops() {
        raindrops = [];
        for (let i = 0; i < NUM_RAINDROPS; i++) {
            raindrops.push({
                x: Math.random() * (physCanvas.width + 200) - 100,
                y: Math.random() * physCanvas.height
            });
        }
    }
    
    // --- ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆ ---
    document.getElementById('vCarSlider').addEventListener('input', function() {
        vCar = parseFloat(this.value);
        updateDisplays();
        drawGraph();
    });
    
    document.getElementById('vRainSlider').addEventListener('input', function() {
        vRain = parseFloat(this.value);
        updateDisplays();
        drawGraph();
    });
    
    // --- ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ ---
    document.getElementById('startBtn').addEventListener('click', function() {
        if (isRunning) {
            isRunning = false;
            this.textContent = 'ã‚¹ã‚¿ãƒ¼ãƒˆ';
            cancelAnimationFrame(animationId);
        } else {
            isRunning = true;
            this.textContent = 'ä¸€æ™‚åœæ­¢';
            animate();
        }
    });
    
    document.getElementById('resetBtn').addEventListener('click', function() {
        isRunning = false;
        document.getElementById('startBtn').textContent = 'ã‚¹ã‚¿ãƒ¼ãƒˆ';
        cancelAnimationFrame(animationId);
        time = 0;
        carX = 100;
        initRaindrops();
        draw();
    });
    
    document.getElementById('viewBtn').addEventListener('click', function() {
        isCarView = !isCarView;
        this.textContent = isCarView ? 'è¦–ç‚¹åˆ‡æ›¿ï¼šè»Š' : 'è¦–ç‚¹åˆ‡æ›¿ï¼šåœ°é¢';
        this.classList.toggle('active', isCarView);
        draw();
    });
    
    // --- è¡¨ç¤ºæ›´æ–° ---
    function updateDisplays() {
        document.getElementById('vCarDisplay').textContent = vCar + ' m/s';
        document.getElementById('vRainDisplay').textContent = vRain + ' m/s';
        
        // ç›¸å¯¾é€Ÿåº¦ã®è¨ˆç®—
        const relVx = -vCar;  // è»Šã‹ã‚‰è¦‹ãŸé›¨ã®xæˆåˆ†
        const relVy = -vRain; // è»Šã‹ã‚‰è¦‹ãŸé›¨ã®yæˆåˆ†
        const relSpeed = Math.sqrt(relVx * relVx + relVy * relVy);
        const angle = Math.atan2(Math.abs(relVx), Math.abs(relVy)) * 180 / Math.PI;
        
        document.getElementById('absRainInfo').textContent = `é‰›ç›´ä¸‹å‘ã ${vRain} m/s`;
        document.getElementById('relRainInfo').textContent = `${relSpeed.toFixed(1)} m/s`;
        document.getElementById('angleInfo').textContent = `${angle.toFixed(1)}Â°ï¼ˆå‰æ–¹ã¸å‚¾ãï¼‰`;
    }
    
    // --- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ ---
    function animate() {
        if (!isRunning) return;
        
        time += 1/60;
        
        // é›¨ç²’ã®æ›´æ–°
        const dt = 2;  // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ãƒ”ãƒ¼ãƒ‰èª¿æ•´
        for (let drop of raindrops) {
            if (isCarView) {
                // è»Šè¦–ç‚¹ï¼šé›¨ã¯æ–œã‚ã«é™ã£ã¦ãã‚‹ã‚ˆã†ã«è¦‹ãˆã‚‹
                drop.x -= vCar * dt * 0.1;
                drop.y += vRain * dt * 0.5;
            } else {
                // åœ°é¢è¦–ç‚¹ï¼šé›¨ã¯çœŸä¸‹ã«é™ã‚‹
                drop.y += vRain * dt * 0.5;
            }
            
            // ç”»é¢å¤–ã«å‡ºãŸã‚‰ãƒªã‚»ãƒƒãƒˆ
            if (drop.y > physCanvas.height) {
                drop.y = -10;
                drop.x = Math.random() * (physCanvas.width + 200) - 100;
            }
            if (drop.x < -50) {
                drop.x = physCanvas.width + 50;
            }
        }
        
        // è»Šã®æ›´æ–°ï¼ˆåœ°é¢è¦–ç‚¹ã®ã¿ç§»å‹•ï¼‰
        if (!isCarView) {
            carX += vCar * dt * 0.1;
            if (carX > physCanvas.width + 50) {
                carX = -100;
            }
        }
        
        draw();
        animationId = requestAnimationFrame(animate);
    }
    
    // --- ãƒ¡ã‚¤ãƒ³æç”» ---
    function draw() {
        const W = physCanvas.width;
        const H = physCanvas.height;
        
        // èƒŒæ™¯
        physCtx.fillStyle = '#87CEEB';  // ç©ºè‰²
        physCtx.fillRect(0, 0, W, H);
        
        // åœ°é¢
        const groundY = H - 60;
        physCtx.fillStyle = '#808080';
        physCtx.fillRect(0, groundY, W, 60);
        
        // é“è·¯ã®ç™½ç·š
        physCtx.strokeStyle = '#fff';
        physCtx.lineWidth = 3;
        physCtx.setLineDash([30, 20]);
        physCtx.beginPath();
        physCtx.moveTo(0, groundY + 30);
        physCtx.lineTo(W, groundY + 30);
        physCtx.stroke();
        physCtx.setLineDash([]);
        
        // èƒŒæ™¯ã®æœ¨
        if (!isCarView) {
            // åœ°é¢è¦–ç‚¹ã§ã¯æœ¨ã¯å›ºå®š
            drawTree(physCtx, 100, groundY);
            drawTree(physCtx, 400, groundY);
            drawTree(physCtx, 700, groundY);
        } else {
            // è»Šè¦–ç‚¹ã§ã¯èƒŒæ™¯ãŒå¾Œã‚ã«æµã‚Œã‚‹
            const bgOffset = (time * vCar * 10) % 300;
            drawTree(physCtx, 100 - bgOffset, groundY);
            drawTree(physCtx, 400 - bgOffset, groundY);
            drawTree(physCtx, 700 - bgOffset, groundY);
        }
        
        // é›¨ç²’
        physCtx.strokeStyle = '#4444ff';
        physCtx.lineWidth = 2;
        
        const rainAngle = isCarView ? Math.atan2(vCar, vRain) : 0;
        const rainLen = 15;
        
        for (let drop of raindrops) {
            physCtx.beginPath();
            physCtx.moveTo(drop.x, drop.y);
            physCtx.lineTo(
                drop.x - rainLen * Math.sin(rainAngle),
                drop.y + rainLen * Math.cos(rainAngle)
            );
            physCtx.stroke();
        }
        
        // è»Šã‚’æç”»
        const drawCarX = isCarView ? W / 2 - 50 : carX;
        drawCar(physCtx, drawCarX, groundY - 40);
        
        // è¦–ç‚¹è¡¨ç¤º
        physCtx.fillStyle = 'rgba(0,0,0,0.7)';
        physCtx.fillRect(10, 10, 150, 30);
        physCtx.fillStyle = '#fff';
        physCtx.font = 'bold 16px sans-serif';
        physCtx.fillText(isCarView ? 'ğŸ‘ è»Šã‹ã‚‰ã®è¦–ç‚¹' : 'ğŸ‘ åœ°é¢ã‹ã‚‰ã®è¦–ç‚¹', 20, 32);
    }
    
    function drawCar(ctx, x, y) {
        // è»Šä½“
        ctx.fillStyle = '#e74c3c';
        ctx.beginPath();
        ctx.roundRect(x, y, 100, 35, 5);
        ctx.fill();
        
        // çª“
        ctx.fillStyle = '#3498db';
        ctx.beginPath();
        ctx.roundRect(x + 55, y + 5, 35, 20, 3);
        ctx.fill();
        
        // ã‚¿ã‚¤ãƒ¤
        ctx.fillStyle = '#333';
        ctx.beginPath();
        ctx.arc(x + 20, y + 35, 12, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(x + 80, y + 35, 12, 0, Math.PI * 2);
        ctx.fill();
        
        // ãƒ›ã‚¤ãƒ¼ãƒ«
        ctx.fillStyle = '#999';
        ctx.beginPath();
        ctx.arc(x + 20, y + 35, 6, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(x + 80, y + 35, 6, 0, Math.PI * 2);
        ctx.fill();
    }
    
    function drawTree(ctx, x, groundY) {
        if (x < -50 || x > physCanvas.width + 50) return;
        
        // å¹¹
        ctx.fillStyle = '#8B4513';
        ctx.fillRect(x - 10, groundY - 80, 20, 80);
        
        // è‘‰
        ctx.fillStyle = '#228B22';
        ctx.beginPath();
        ctx.arc(x, groundY - 100, 40, 0, Math.PI * 2);
        ctx.fill();
    }
    
    // --- ã‚°ãƒ©ãƒ•æç”» ---
    function drawGraph() {
        const W = graphCanvas.width;
        const H = graphCanvas.height;
        const margin = 50;
        const graphW = W - margin * 2;
        const graphH = H - margin * 2;
        
        graphCtx.clearRect(0, 0, W, H);
        graphCtx.fillStyle = '#fff';
        graphCtx.fillRect(0, 0, W, H);
        
        // è»¸
        graphCtx.strokeStyle = '#333';
        graphCtx.lineWidth = 2;
        graphCtx.beginPath();
        graphCtx.moveTo(margin, margin);
        graphCtx.lineTo(margin, H - margin);
        graphCtx.lineTo(W - margin, H - margin);
        graphCtx.stroke();
        
        // åŸç‚¹ã‹ã‚‰ã®ã‚¹ã‚¿ãƒ¼ãƒˆ
        const originX = margin + graphW / 2;
        const originY = H - margin - graphH / 2;
        
        // ã‚°ãƒªãƒƒãƒ‰
        graphCtx.strokeStyle = '#ddd';
        graphCtx.lineWidth = 1;
        const gridSize = 20;
        for (let x = margin; x <= W - margin; x += gridSize) {
            graphCtx.beginPath();
            graphCtx.moveTo(x, margin);
            graphCtx.lineTo(x, H - margin);
            graphCtx.stroke();
        }
        for (let y = margin; y <= H - margin; y += gridSize) {
            graphCtx.beginPath();
            graphCtx.moveTo(margin, y);
            graphCtx.lineTo(W - margin, y);
            graphCtx.stroke();
        }
        
        // è»¸ãƒ©ãƒ™ãƒ«
        graphCtx.fillStyle = '#333';
        graphCtx.font = '14px sans-serif';
        graphCtx.fillText('vx (m/s)', W - margin - 50, H - margin + 30);
        graphCtx.fillText('vy (m/s)', margin - 40, margin + 20);
        
        const scale = 4;  // ãƒ”ã‚¯ã‚»ãƒ«/m/s
        
        // åŸç‚¹
        graphCtx.beginPath();
        graphCtx.arc(originX, originY, 4, 0, Math.PI * 2);
        graphCtx.fillStyle = '#333';
        graphCtx.fill();
        graphCtx.fillText('O', originX - 15, originY + 5);
        
        // è»Šã®é€Ÿåº¦ãƒ™ã‚¯ãƒˆãƒ«ï¼ˆé’ï¼‰
        const carEndX = originX + vCar * scale;
        const carEndY = originY;
        drawArrow(graphCtx, originX, originY, carEndX, carEndY, '#2196F3', 3);
        graphCtx.fillStyle = '#2196F3';
        graphCtx.font = 'bold 14px sans-serif';
        graphCtx.fillText('vè»Š', carEndX + 5, carEndY - 10);
        
        // é›¨ã®é€Ÿåº¦ãƒ™ã‚¯ãƒˆãƒ«ï¼ˆç·‘ã€ä¸‹å‘ããªã®ã§yæ­£æ–¹å‘ï¼‰
        const rainEndX = originX;
        const rainEndY = originY + vRain * scale;
        drawArrow(graphCtx, originX, originY, rainEndX, rainEndY, '#4CAF50', 3);
        graphCtx.fillStyle = '#4CAF50';
        graphCtx.fillText('vé›¨', rainEndX + 10, rainEndY);
        
        // ç›¸å¯¾é€Ÿåº¦ãƒ™ã‚¯ãƒˆãƒ«ï¼ˆèµ¤ï¼‰
        const relVx = 0 - vCar;  // é›¨ - è»Š
        const relVy = vRain - 0;
        const relEndX = originX + relVx * scale;
        const relEndY = originY + relVy * scale;
        drawArrow(graphCtx, originX, originY, relEndX, relEndY, '#f44336', 3);
        graphCtx.fillStyle = '#f44336';
        graphCtx.font = 'bold 14px sans-serif';
        graphCtx.fillText('vç›¸å¯¾', relEndX - 40, relEndY + 20);
        
        // -vè»Šï¼ˆç‚¹ç·šã§è£œåŠ©ç·šï¼‰
        graphCtx.setLineDash([5, 5]);
        graphCtx.strokeStyle = '#999';
        graphCtx.lineWidth = 2;
        graphCtx.beginPath();
        graphCtx.moveTo(rainEndX, rainEndY);
        graphCtx.lineTo(relEndX, relEndY);
        graphCtx.stroke();
        graphCtx.setLineDash([]);
        graphCtx.fillStyle = '#999';
        graphCtx.font = '12px sans-serif';
        graphCtx.fillText('-vè»Š', (rainEndX + relEndX) / 2 - 20, (rainEndY + relEndY) / 2 - 5);
    }
    
    // --- ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚µã‚¤ã‚ºå¯¾å¿œ ---
    window.addEventListener('resize', function() {
        resizeCanvases();
        draw();
        drawGraph();
    });
    
    // --- åˆæœŸåŒ–å®Ÿè¡Œ ---
    init();
    drawVectorDiagram();
    </script>
</body>
</html>