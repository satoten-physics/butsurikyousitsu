<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜æ ¡ç‰©ç† - ä»•äº‹ã¨ã‚¨ãƒãƒ«ã‚®ãƒ¼</title>
    <script>
      window.MathJax = {
      tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
     }
     };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .back-link {
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 10px;
        }
        h1 {
            color: #333;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .tab-btn {
            flex: 1;
            min-width: 150px;
            padding: 12px 20px;
            border: none;
            background: #f0f0f0;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
            transition: all 0.3s;
        }
        .tab-btn.active {
            background: #667eea;
            color: white;
        }
        .tab-btn:hover {
            background: #8899f0;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        h2 {
            color: #667eea;
            margin-bottom: 15px;
        }
        h3 {
            color: #555;
            margin: 25px 0 15px 0;
            padding-bottom: 5px;
            border-bottom: 2px solid #667eea;
        }
        h4 {
            color: #667eea;
            margin: 20px 0 10px 0;
        }
        .pdf-placeholder {
            background: #f9f9f9;
            padding: 40px;
            text-align: center;
            border-radius: 5px;
            color: #666;
        }
        
        /* è§£èª¬ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .lecture-content {
            line-height: 1.8;
            color: #333;
        }
        .lecture-content p {
            margin-bottom: 15px;
            text-align: justify;
        }
        .formula-box {
            background: linear-gradient(135deg, #667eea20 0%, #764ba220 100%);
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }
        .formula-box.important {
            background: linear-gradient(135deg, #ff6b6b20 0%, #ffa50020 100%);
            border-left: 4px solid #ff6b6b;
        }
        .point-box {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 10px;
        }
        .point-box::before {
            content: "ğŸ’¡ ãƒã‚¤ãƒ³ãƒˆ";
            font-weight: bold;
            color: #856404;
            display: block;
            margin-bottom: 10px;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .comparison-table th, .comparison-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }
        .comparison-table th {
            background: #667eea;
            color: white;
        }
        .comparison-table tr:nth-child(even) {
            background: #f9f9f9;
        }
        .diagram-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
        }
        .diagram-box {
            background: #f9f9f9;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            flex: 1;
            min-width: 280px;
            max-width: 400px;
        }
        .diagram-box canvas {
            display: block;
            margin: 0 auto 10px auto;
            background: white;
            border-radius: 5px;
        }
        .diagram-box p {
            margin: 5px 0;
            font-size: 14px;
        }
        .energy-equation {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px 0;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 10px;
        }
        .energy-box {
            padding: 10px 15px;
            border-radius: 5px;
            font-weight: bold;
            text-align: center;
        }
        .ke-box { background: #4CAF50; color: white; }
        .pe-box { background: #2196F3; color: white; }
        .work-box { background: #ff9800; color: white; }
        .loss-box { background: #f44336; color: white; }
        .equal-sign { font-size: 24px; font-weight: bold; }
        
        /* ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        #sim-container {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        #physicsCanvas {
            display: block;
            width: 100%;
            background: white;
            border-radius: 5px;
            border: 2px solid #ddd;
        }
        .sim-controls {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
        }
        .control-group {
            margin-bottom: 20px;
        }
        .control-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        .control-group input[type="range"] {
            width: 100%;
            margin: 10px 0;
        }
        .value-display {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 5px;
            font-weight: bold;
            min-width: 100px;
            text-align: center;
        }
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .sim-button {
            flex: 1;
            min-width: 120px;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .sim-button.start {
            background: #4CAF50;
            color: white;
        }
        .sim-button.start:hover {
            background: #45a049;
        }
        .sim-button.pause {
            background: #ff9800;
            color: white;
        }
        .sim-button.pause:hover {
            background: #e68900;
        }
        .sim-button.reset {
            background: #f44336;
            color: white;
        }
        .sim-button.reset:hover {
            background: #da190b;
        }
        .energy-display {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            border: 2px solid #ddd;
        }
        .energy-item {
            flex: 1;
            min-width: 150px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        .energy-item.kinetic {
            background: linear-gradient(135deg, #4CAF50, #8BC34A);
            color: white;
        }
        .energy-item.work {
            background: linear-gradient(135deg, #ff9800, #ffb74d);
            color: white;
        }
        .energy-item.total {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        .energy-item h4 {
            color: white;
            margin: 0 0 10px 0;
            font-size: 14px;
        }
        .energy-item .value {
            font-size: 24px;
            font-weight: bold;
        }
        .energy-bar-container {
            margin-top: 20px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            border: 2px solid #ddd;
        }
        .energy-bar-container h4 {
            color: #667eea;
            margin-bottom: 15px;
        }
        .bar-wrapper {
            margin: 10px 0;
        }
        .bar-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 14px;
        }
        .bar-bg {
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
        }
        .bar-fill {
            height: 100%;
            border-radius: 15px;
            transition: width 0.1s;
        }
        .bar-fill.kinetic { background: linear-gradient(90deg, #4CAF50, #8BC34A); }
        .bar-fill.work { background: linear-gradient(90deg, #ff9800, #ffb74d); }
        
        /* å•é¡Œç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .problem-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 10px;
        }
        .problem-section h4 {
            color: #333;
        }
        details {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        summary {
            cursor: pointer;
            font-weight: bold;
            color: #667eea;
        }
        summary:hover {
            color: #764ba2;
        }
        details[open] summary {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            header, .container {
                padding: 15px;
            }
            .tab-btn {
                min-width: 100px;
                font-size: 14px;
            }
            .diagram-box {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <a href="index.html" class="back-link">â† ç›®æ¬¡ã«æˆ»ã‚‹</a>
        <h1>ä»•äº‹ã¨ã‚¨ãƒãƒ«ã‚®ãƒ¼</h1>
    </header>
    <div class="container">
        
        <div class="tabs">
            <button class="tab-btn active" onclick="openTab('lecture')">è§£èª¬ç·¨</button>
            <button class="tab-btn" onclick="openTab('problem')">å•é¡Œç·¨</button>
            <button class="tab-btn" onclick="openTab('simulation')">ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
        </div>
        
        <div id="lecture" class="tab-content active">
            <h2>æˆæ¥­è³‡æ–™</h2>
            <iframe src="https://drive.google.com/file/d/1rd3AUHNkj-NLM0IEztEdsiVOdPwxD6EA/preview" width="100%" height="500"></iframe>
            
            <div class="lecture-content">
                <h3>1. ä»•äº‹ã®åŸºæœ¬</h3>
                <p>
                    ç‰©ç†ã«ãŠã‘ã‚‹ã€Œä»•äº‹ã€ã¨ã¯ã€<strong>åŠ›ã‚’åŠ ãˆç¶šã‘ã¦ç‰©ä½“ã‚’ç§»å‹•ã•ã›ã‚‹ã“ã¨</strong>ã‚’æ„å‘³ã—ã¾ã™ã€‚
                    æ—¥å¸¸ã§ä½¿ã†ã€Œä»•äº‹ã€ã¨ã¯ç•°ãªã‚Šã€ç‰©ç†ã§ã¯æ˜ç¢ºã«å®šç¾©ã•ã‚ŒãŸé‡ã§ã™ã€‚
                </p>
                
                <div class="formula-box">
                    <p style="text-align: center; font-size: 1.2em;">
                        <strong>ä»•äº‹ã®å®šç¾©</strong><br><br>
                        $$ W = F \cdot x $$
                    </p>
                    <p style="text-align: center;">
                        ä»•äº‹ [J] = åŠ›ã®å¤§ãã• [N] Ã— <strong>ç€ç›®ã—ãŸåŠ›ã®æ–¹å‘ã«</strong>ç§»å‹•ã—ãŸè·é›¢ [m]
                    </p>
                </div>
                
                <div class="point-box">
                    ç§»å‹•è·é›¢ã¯ã€Œç€ç›®ã—ãŸåŠ›ã®æ–¹å‘ã«ã©ã‚Œã ã‘é€²ã‚“ã ã‹ã€ãŒé‡è¦ã§ã™ã€‚
                    åŠ›ã¨ç§»å‹•ã®é–¢ä¿‚ã«ã¯3ã¤ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚
                </div>
                
                <table class="comparison-table">
                    <tr>
                        <th>ãƒ‘ã‚¿ãƒ¼ãƒ³</th>
                        <th>åŠ›ã¨ç§»å‹•ã®é–¢ä¿‚</th>
                        <th>ä»•äº‹ã®ç¬¦å·</th>
                        <th>ä¾‹</th>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>åŠ›ã¨ç§»å‹•æ–¹å‘ãŒ<strong>åŒã˜</strong></td>
                        <td style="color: #4CAF50; font-weight: bold;">æ­£ã®ä»•äº‹</td>
                        <td>ç‰©ã‚’æŠ¼ã—ã¦é€²ã‚ã‚‹</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>åŠ›ã¨ç§»å‹•æ–¹å‘ãŒ<strong>åå¯¾</strong></td>
                        <td style="color: #f44336; font-weight: bold;">è² ã®ä»•äº‹</td>
                        <td>æ‘©æ“¦åŠ›ãŒç‰©ä½“ã‚’æ¸›é€Ÿ</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>åŠ›ã¨ç§»å‹•æ–¹å‘ãŒ<strong>å‚ç›´</strong></td>
                        <td style="font-weight: bold;">ä»•äº‹ = 0</td>
                        <td>æ–œé¢ä¸Šã®å‚ç›´æŠ—åŠ›</td>
                    </tr>
                </table>
                
                <h3>2. ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¨ã¯</h3>
                <p>
                    ã€Œä»•äº‹ã€ã¨ã€Œã‚¨ãƒãƒ«ã‚®ãƒ¼ã€ã¯æœ¬è³ªçš„ã«<strong>åŒã˜ã‚‚ã®</strong>ã§ã™ã€‚
                    $E$ [J] ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’æŒã¤ç‰©ä½“ã¯ã€è‡ªåˆ†ãŒ $E$ [J] åˆ†ã®ä»•äº‹ãŒã§ãã‚‹ã€
                    ã‚ã‚‹ã„ã¯ç›¸æ‰‹ã« $E$ [J] åˆ†ã®ä»•äº‹ã‚’ä¸ãˆã‚‰ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚
                </p>
                
                <div class="formula-box">
                    <p style="text-align: center;">
                        <strong>é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼</strong>ï¼š$K = \dfrac{1}{2}mv^2$<br><br>
                        <strong>é‡åŠ›ã«ã‚ˆã‚‹ä½ç½®ã‚¨ãƒãƒ«ã‚®ãƒ¼</strong>ï¼š$U = mgh$<br><br>
                        <strong>åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼</strong>ï¼š$E = K + U = \dfrac{1}{2}mv^2 + mgh$
                    </p>
                </div>
                
                <h3>3. åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜ã®æ³•å‰‡</h3>
                <p>
                    <strong>ä¿å­˜åŠ›</strong>ï¼ˆé‡åŠ›ã€å¼¾æ€§åŠ›ãªã©ï¼‰ã®ã¿ãŒä»•äº‹ã‚’ã™ã‚‹å ´åˆã€
                    åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®ç·å’Œã¯ä¸€å®šã«ä¿ãŸã‚Œã¾ã™ã€‚
                </p>
                
                <div class="formula-box important">
                    <p style="text-align: center; font-size: 1.1em;">
                        <strong>åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜ã®æ³•å‰‡</strong><br><br>
                        $$ \dfrac{1}{2}mv_1^2 + mgh_1 = \dfrac{1}{2}mv_2^2 + mgh_2 $$
                    </p>
                    <p style="text-align: center;">
                        ï¼ˆä¿å­˜åŠ›ã®ã¿ãŒä»•äº‹ã‚’ã™ã‚‹ã¨ãæˆç«‹ï¼‰
                    </p>
                </div>
                
                <h4>ã€å…·ä½“ä¾‹ã€‘æ–œé¢ä¸Šã®é‹å‹•ã¨è‡ªç”±è½ä¸‹ã®æ¯”è¼ƒ</h4>
                <p>
                    æ»‘ã‚‰ã‹ãªï¼ˆæ‘©æ“¦ã®ãªã„ï¼‰æ–œé¢ã‚’æ»‘ã‚Šé™ã‚Šã‚‹ç‰©ä½“ã¨ã€åŒã˜é«˜ã•ã‹ã‚‰è‡ªç”±è½ä¸‹ã™ã‚‹ç‰©ä½“ã‚’æ¯”è¼ƒã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
                </p>
                
                <div class="diagram-container">
                    <div class="diagram-box">
                        <canvas id="freefallDiagram" width="250" height="200"></canvas>
                        <p><strong>è‡ªç”±è½ä¸‹</strong></p>
                        <p>åƒãåŠ›ï¼šé‡åŠ› $mg$ ã®ã¿</p>
                        <p>é‡åŠ›ã®ä»•äº‹ï¼š$W = mgh$ï¼ˆæ­£ï¼‰</p>
                    </div>
                    <div class="diagram-box">
                        <canvas id="slopeDiagram" width="250" height="200"></canvas>
                        <p><strong>æ»‘ã‚‰ã‹ãªæ–œé¢</strong></p>
                        <p>åƒãåŠ›ï¼šé‡åŠ› $mg$ã€å‚ç›´æŠ—åŠ› $N$</p>
                        <p>é‡åŠ›ã®ä»•äº‹ï¼š$W = mgh$ï¼ˆæ­£ï¼‰</p>
                        <p style="color: #f44336;"><strong>å‚ç›´æŠ—åŠ›ã®ä»•äº‹ï¼š$W = 0$</strong></p>
                    </div>
                </div>
                
                <div class="point-box">
                    <strong>ãªãœå‚ç›´æŠ—åŠ›ã®ä»•äº‹ã¯0ãªã®ã‹ï¼Ÿ</strong><br><br>
                    å‚ç›´æŠ—åŠ› $N$ ã¯å¸¸ã«æ–œé¢ã«å¯¾ã—ã¦<strong>å‚ç›´</strong>ã«åƒãã¾ã™ã€‚
                    ç‰©ä½“ã¯æ–œé¢ã«<strong>æ²¿ã£ã¦</strong>ç§»å‹•ã™ã‚‹ãŸã‚ã€åŠ›ã¨ç§»å‹•æ–¹å‘ãŒå¸¸ã«90Â°ã‚’ãªã—ã¾ã™ã€‚
                    ã—ãŸãŒã£ã¦ã€å‚ç›´æŠ—åŠ›ãŒç‰©ä½“ã«ã™ã‚‹ä»•äº‹ã¯<strong>å¸¸ã«0</strong>ã§ã™ã€‚<br><br>
                    çµæœã¨ã—ã¦ã€æ–œé¢ã§ã‚‚è‡ªç”±è½ä¸‹ã§ã‚‚ã€ä»•äº‹ã‚’ã™ã‚‹ã®ã¯é‡åŠ›ã ã‘ãªã®ã§ã€
                    <strong>ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®å¼ã¯å…¨ãåŒã˜</strong>ã«ãªã‚Šã¾ã™ï¼
                </div>
                
                <div class="energy-equation">
                    <div class="energy-box pe-box">ä½ç½®ã‚¨ãƒãƒ«ã‚®ãƒ¼<br>$mgh$</div>
                    <span class="equal-sign">â†’</span>
                    <div class="energy-box ke-box">é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼<br>$\dfrac{1}{2}mv^2$</div>
                </div>
                
                <h3>4. åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜å‰‡ vs ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜å‰‡</h3>
                <p>
                    ã“ã“ãŒæœ€ã‚‚é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚
                    <strong>ã€ŒåŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜ã®æ³•å‰‡ã€</strong>ã¨<strong>ã€Œã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜ã®æ³•å‰‡ã€</strong>ã¯ä¼¼ã¦ã„ã‚‹ã‚ˆã†ã§ç•°ãªã‚Šã¾ã™ã€‚
                </p>
                
                <table class="comparison-table">
                    <tr>
                        <th></th>
                        <th>åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜ã®æ³•å‰‡</th>
                        <th>ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜ã®æ³•å‰‡</th>
                    </tr>
                    <tr>
                        <td><strong>é©ç”¨æ¡ä»¶</strong></td>
                        <td>ä¿å­˜åŠ›ã®ã¿ãŒä»•äº‹ã‚’ã™ã‚‹ã¨ã</td>
                        <td>å¸¸ã«æˆç«‹ï¼ˆå®‡å®™ã®æ³•å‰‡ï¼‰</td>
                    </tr>
                    <tr>
                        <td><strong>åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼</strong></td>
                        <td>ä¸€å®šï¼ˆä¿å­˜ã•ã‚Œã‚‹ï¼‰</td>
                        <td>å¤‰åŒ–ã—ã†ã‚‹</td>
                    </tr>
                    <tr>
                        <td><strong>ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®å½¢æ…‹</strong></td>
                        <td>é‹å‹•ãƒ»ä½ç½®ã®ã¿è€ƒæ…®</td>
                        <td>ç†±ãƒ»éŸ³ãƒ»å…‰ãªã©ã‚‚å«ã‚€</td>
                    </tr>
                </table>
                
                <h4>ã€é‡è¦ã€‘ä¿å­˜åŠ›ä»¥å¤–ã®ä»•äº‹ãŒã‚ã‚‹å ´åˆ</h4>
                <p>
                    æ‘©æ“¦åŠ›ãªã©ã®<strong>éä¿å­˜åŠ›</strong>ãŒä»•äº‹ã‚’ã™ã‚‹ã¨ã€åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®ç·å’Œã¯å¤‰åŒ–ã—ã¾ã™ã€‚
                </p>
                
                <div class="formula-box important">
                    <p style="text-align: center; font-size: 1.1em;">
                        <strong>éä¿å­˜åŠ›ãŒã‚ã‚‹å ´åˆã®ã‚¨ãƒãƒ«ã‚®ãƒ¼é–¢ä¿‚</strong><br><br>
                        $$ \dfrac{1}{2}mv_1^2 + mgh_1 + W_{éä¿å­˜åŠ›} = \dfrac{1}{2}mv_2^2 + mgh_2 $$
                    </p>
                    <p style="text-align: center;">
                        ã¾ãŸã¯<br><br>
                        $$ E_2 - E_1 = W_{éä¿å­˜åŠ›} $$
                    </p>
                </div>
                
                <p>
                    æ‘©æ“¦åŠ›ã®ä»•äº‹ã¯<strong>è² </strong>ï¼ˆåŠ›ã¨ç§»å‹•æ–¹å‘ãŒåå¯¾ï¼‰ãªã®ã§ã€
                    åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®ç·å’Œã¯<strong>æ¸›å°‘</strong>ã—ã¾ã™ã€‚
                    ã“ã®æ¸›å°‘åˆ†ã¯ã€Œå¤±ã‚ã‚ŒãŸã€ã‚ã‘ã§ã¯ãªãã€<strong>ç†±ã‚¨ãƒãƒ«ã‚®ãƒ¼</strong>ãªã©ã«å¤‰æ›ã•ã‚Œã¦ã„ã¾ã™ã€‚
                </p>
                
                <h4>ã€å…·ä½“ä¾‹ã€‘æ‘©æ“¦ã®ã‚ã‚‹æ–œé¢ã‚’æ»‘ã‚Šé™ã‚Šã‚‹ç‰©ä½“</h4>
                
                <div class="diagram-container">
                    <div class="diagram-box" style="max-width: 500px;">
                        <canvas id="frictionDiagram" width="350" height="220"></canvas>
                        <p><strong>æ‘©æ“¦ã®ã‚ã‚‹æ–œé¢</strong></p>
                    </div>
                </div>
                
                <p>
                    é«˜ã• $h$ ã®ä½ç½®Aã‹ã‚‰å‡ºç™ºã—ã€é€”ä¸­ã®ä½ç½®Bã‚’çµŒã¦ã€åœ°é¢Cã«åˆ°é”ã™ã‚‹ç‰©ä½“ã‚’è€ƒãˆã¾ã™ã€‚
                    æ‘©æ“¦åŠ›ã‚’ $f$ã€æ–œé¢ã®é•·ã•ã‚’ $L$ ã¨ã—ã¾ã™ã€‚
                </p>
                
                <div style="background: #f0f0f0; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <p><strong>ä½ç½®Aï¼ˆå‡ºç™ºç‚¹ã€é«˜ã• $h$ã€é€Ÿã• 0ï¼‰</strong></p>
                    <div class="energy-equation">
                        <div class="energy-box ke-box">$K_A = 0$</div>
                        <span>+</span>
                        <div class="energy-box pe-box">$U_A = mgh$</div>
                        <span>=</span>
                        <div class="energy-box" style="background: #9c27b0; color: white;">$E_A = mgh$</div>
                    </div>
                    
                    <p style="margin-top: 20px;"><strong>ä½ç½®Bï¼ˆé€”ä¸­ã€é«˜ã• $h/2$ï¼‰</strong></p>
                    <div class="energy-equation">
                        <div class="energy-box ke-box">$K_B$</div>
                        <span>+</span>
                        <div class="energy-box pe-box">$U_B = \dfrac{mgh}{2}$</div>
                        <span>=</span>
                        <div class="energy-box" style="background: #9c27b0; color: white;">$E_B = mgh - \dfrac{fL}{2}$</div>
                    </div>
                    <p style="text-align: center; color: #f44336; font-weight: bold;">
                        â†‘ æ‘©æ“¦ã®ä»•äº‹ $-\dfrac{fL}{2}$ ã®åˆ†ã ã‘ç·å’ŒãŒæ¸›å°‘ï¼
                    </p>
                    
                    <p style="margin-top: 20px;"><strong>ä½ç½®Cï¼ˆåœ°é¢ã€é«˜ã• 0ï¼‰</strong></p>
                    <div class="energy-equation">
                        <div class="energy-box ke-box">$K_C$</div>
                        <span>+</span>
                        <div class="energy-box pe-box">$U_C = 0$</div>
                        <span>=</span>
                        <div class="energy-box" style="background: #9c27b0; color: white;">$E_C = mgh - fL$</div>
                    </div>
                    <p style="text-align: center; color: #f44336; font-weight: bold;">
                        â†‘ ã•ã‚‰ã«æ¸›å°‘ã—ã¦ $mgh - fL$ ã«ï¼
                    </p>
                </div>
                
                <div class="point-box">
                    <strong>ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®ã€Œãƒ­ã‚¹ã€ã¨ã„ã†è€ƒãˆæ–¹</strong><br><br>
                    åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®ç·å’ŒãŒæ¸›å°‘ã™ã‚‹ã“ã¨ã‚’ã€Œã‚¨ãƒãƒ«ã‚®ãƒ¼ã®ãƒ­ã‚¹ã€ã¨è¡¨ç¾ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
                    ã—ã‹ã—ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜ã®æ³•å‰‡ã«ã‚ˆã‚Œã°ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¯<strong>æ¶ˆæ»…ã—ãªã„</strong>ãŸã‚ã€
                    ã€Œãƒ­ã‚¹ã€ã—ãŸã‚¨ãƒãƒ«ã‚®ãƒ¼ã¯ç†±ã‚„éŸ³ãªã©ã®ä»–ã®å½¢æ…‹ã«å¤‰æ›ã•ã‚Œã¦ã„ã¾ã™ã€‚<br><br>
                    
                    $$ \underbrace{mgh}_{\text{æœ€åˆã®åŠ›å­¦çš„E}} = \underbrace{K_C}_{\text{æœ€å¾Œã®é‹å‹•E}} + \underbrace{fL}_{\text{ç†±ã‚¨ãƒãƒ«ã‚®ãƒ¼ãªã©}} $$
                    <br>
                    ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®<strong>ç·é‡</strong>ã¯å¸¸ã«ä¸€å®šã§ã™ï¼
                </div>
                
                <h3>5. ã¾ã¨ã‚</h3>
                <div class="formula-box">
                    <ol style="padding-left: 20px; line-height: 2;">
                        <li><strong>ä»•äº‹</strong> $W = Fx$ï¼ˆåŠ›ã®æ–¹å‘ã¸ã®ç§»å‹•è·é›¢ãŒé‡è¦ï¼‰</li>
                        <li><strong>åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼</strong> $E = \dfrac{1}{2}mv^2 + mgh$</li>
                        <li><strong>åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜å‰‡</strong>ï¼šä¿å­˜åŠ›ã®ã¿ã®ã¨ãæˆç«‹</li>
                        <li><strong>éä¿å­˜åŠ›ãŒã‚ã‚‹å ´åˆ</strong>ï¼šåŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¯å¤‰åŒ–ã™ã‚‹ï¼ˆæ¸›å°‘ãŒå¤šã„ï¼‰</li>
                        <li>æ¸›å°‘åˆ†ã¯<strong>ç†±ãªã©ã«å¤‰æ›</strong>ã•ã‚Œã‚‹ï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜å‰‡ã¯å¸¸ã«æˆç«‹ï¼‰</li>
                        <li>å‚ç›´æŠ—åŠ›ã¯ç§»å‹•æ–¹å‘ã¨å‚ç›´ãªã®ã§ã€<strong>ä»•äº‹ã¯å¸¸ã«0</strong></li>
                    </ol>
                </div>
            </div>
        </div>
        
        <div id="problem" class="tab-content">
            <h2>ç¢ºèªå•é¡Œ</h2>
            
            <div class="problem-section">
                <h4>å•é¡Œ1ï¼šä»•äº‹ã®è¨ˆç®—</h4>
                <p>
                    è³ªé‡ 2.0 kg ã®ç‰©ä½“ã‚’ã€æ°´å¹³ãªåºŠã®ä¸Šã§ 25 N ã®åŠ›ã§æ°´å¹³æ–¹å‘ã«æŠ¼ã—ã€4.0 m ç§»å‹•ã•ã›ãŸã€‚
                    ã“ã®ã¨ãã€å‹•æ‘©æ“¦åŠ›ã®å¤§ãã•ã¯ 10 N ã§ã‚ã£ãŸã€‚
                </p>
                <p>
                    (1) æŠ¼ã™åŠ›ãŒã—ãŸä»•äº‹ã‚’æ±‚ã‚ã‚ˆã€‚<br>
                    (2) æ‘©æ“¦åŠ›ãŒã—ãŸä»•äº‹ã‚’æ±‚ã‚ã‚ˆã€‚<br>
                    (3) å‚ç›´æŠ—åŠ›ãŒã—ãŸä»•äº‹ã‚’æ±‚ã‚ã‚ˆã€‚<br>
                    (4) ç‰©ä½“ã®é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®å¢—åŠ é‡ã‚’æ±‚ã‚ã‚ˆã€‚
                </p>
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p><strong>(1) æŠ¼ã™åŠ›ãŒã—ãŸä»•äº‹</strong></p>
                    <p>
                        æŠ¼ã™åŠ›ã¯ç§»å‹•æ–¹å‘ã¨åŒã˜å‘ããªã®ã§ã€<br>
                        $W_1 = 25 \times 4.0 = 100$ Jï¼ˆæ­£ã®ä»•äº‹ï¼‰
                    </p>
                    
                    <p><strong>(2) æ‘©æ“¦åŠ›ãŒã—ãŸä»•äº‹</strong></p>
                    <p>
                        æ‘©æ“¦åŠ›ã¯ç§»å‹•æ–¹å‘ã¨é€†å‘ããªã®ã§ã€<br>
                        $W_2 = -10 \times 4.0 = -40$ Jï¼ˆè² ã®ä»•äº‹ï¼‰
                    </p>
                    
                    <p><strong>(3) å‚ç›´æŠ—åŠ›ãŒã—ãŸä»•äº‹</strong></p>
                    <p>
                        å‚ç›´æŠ—åŠ›ã¯é‰›ç›´ä¸Šå‘ãã€ç§»å‹•ã¯æ°´å¹³æ–¹å‘ãªã®ã§ã€åŠ›ã¨ç§»å‹•ãŒ<strong>å‚ç›´</strong>ã€‚<br>
                        $W_3 = 0$ J
                    </p>
                    
                    <p><strong>(4) é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®å¢—åŠ é‡</strong></p>
                    <p>
                        ä»•äº‹ã¨é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®é–¢ä¿‚ã‚ˆã‚Šã€ç‰©ä½“ã«ã•ã‚ŒãŸä»•äº‹ã®åˆè¨ˆãŒé‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®å¢—åŠ é‡ã«ãªã‚‹ã€‚<br>
                        $\Delta K = W_1 + W_2 + W_3 = 100 + (-40) + 0 = 60$ J
                    </p>
                </details>
            </div>
            
            <div class="problem-section">
                <h4>å•é¡Œ2ï¼šåŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜</h4>
                <p>
                    é«˜ã• 5.0 m ã®æ»‘ã‚‰ã‹ãªæ–œé¢ã®ä¸Šç«¯ã‹ã‚‰ã€è³ªé‡ 1.0 kg ã®ç‰©ä½“ã‚’é™ã‹ã«é›¢ã—ãŸã€‚
                    é‡åŠ›åŠ é€Ÿåº¦ã‚’ $g = 10$ m/sÂ² ã¨ã™ã‚‹ã€‚
                </p>
                <p>
                    (1) æ–œé¢ã®ä¸‹ç«¯ã«é”ã—ãŸã¨ãã®ç‰©ä½“ã®é€Ÿã•ã‚’æ±‚ã‚ã‚ˆã€‚<br>
                    (2) åŒã˜é«˜ã•ã‹ã‚‰è‡ªç”±è½ä¸‹ã•ã›ãŸå ´åˆã€åœ°é¢ã«é”ã—ãŸã¨ãã®é€Ÿã•ã¯ã„ãã‚‰ã‹ã€‚<br>
                    (3) (1)ã¨(2)ã®çµæœãŒåŒã˜ã«ãªã‚‹ç†ç”±ã‚’ã€ä»•äº‹ã®è¦³ç‚¹ã‹ã‚‰èª¬æ˜ã›ã‚ˆã€‚
                </p>
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p><strong>(1) æ–œé¢ã‚’æ»‘ã‚Šé™ã‚ŠãŸå ´åˆ</strong></p>
                    <p>
                        åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜ã®æ³•å‰‡ã‚ˆã‚Šã€<br>
                        $mgh = \dfrac{1}{2}mv^2$<br>
                        $v = \sqrt{2gh} = \sqrt{2 \times 10 \times 5.0} = 10$ m/s
                    </p>
                    
                    <p><strong>(2) è‡ªç”±è½ä¸‹ã®å ´åˆ</strong></p>
                    <p>
                        åŒæ§˜ã«ã€$v = \sqrt{2gh} = 10$ m/s
                    </p>
                    
                    <p><strong>(3) çµæœãŒåŒã˜ã«ãªã‚‹ç†ç”±</strong></p>
                    <p>
                        æ–œé¢ã‚’æ»‘ã‚Šé™ã‚Šã‚‹å ´åˆã€ç‰©ä½“ã«ã¯é‡åŠ›ã¨å‚ç›´æŠ—åŠ›ãŒåƒãã€‚<br>
                        ã—ã‹ã—ã€<strong>å‚ç›´æŠ—åŠ›ã¯æ–œé¢ã«å‚ç›´</strong>ã§ã‚ã‚Šã€ç‰©ä½“ã®ç§»å‹•ã¯æ–œé¢ã«æ²¿ã£ã¦ã„ã‚‹ã€‚<br>
                        ã¤ã¾ã‚Šã€å‚ç›´æŠ—åŠ›ã¨ç§»å‹•æ–¹å‘ã¯å¸¸ã«<strong>90Â°</strong>ã‚’ãªã™ãŸã‚ã€å‚ç›´æŠ—åŠ›ãŒã™ã‚‹ä»•äº‹ã¯<strong>0</strong>ã§ã‚ã‚‹ã€‚<br><br>
                        ã—ãŸãŒã£ã¦ã€æ–œé¢ã§ã‚‚è‡ªç”±è½ä¸‹ã§ã‚‚ã€<strong>ä»•äº‹ã‚’ã™ã‚‹ã®ã¯é‡åŠ›ã®ã¿</strong>ã§ã‚ã‚Šã€
                        é‡åŠ›ãŒã™ã‚‹ä»•äº‹ã¯ä¸¡æ–¹ã¨ã‚‚ $mgh$ ã§åŒã˜ã€‚<br>
                        çµæœã¨ã—ã¦ã€ç²å¾—ã™ã‚‹é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚‚åŒã˜ã«ãªã‚‹ã€‚
                    </p>
                </details>
            </div>
            
            <div class="problem-section">
                <h4>å•é¡Œ3ï¼šã‚¨ãƒãƒ«ã‚®ãƒ¼ã®ã€Œãƒ­ã‚¹ã€</h4>
                <p>
                    è³ªé‡ 2.0 kg ã®ç‰©ä½“ãŒã€é«˜ã• 10 m ã®ç²—ã„æ–œé¢ï¼ˆé•·ã• 20 mï¼‰ã®ä¸Šç«¯ã‹ã‚‰åˆé€Ÿåº¦ 0 ã§æ»‘ã‚Šå§‹ã‚ãŸã€‚
                    æ–œé¢ä¸‹ç«¯ã§ã®é€Ÿã•ã¯ 8.0 m/s ã§ã‚ã£ãŸã€‚é‡åŠ›åŠ é€Ÿåº¦ã‚’ $g = 10$ m/sÂ² ã¨ã™ã‚‹ã€‚
                </p>
                <p>
                    (1) æ–œé¢ä¸Šç«¯ã§ã®åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’æ±‚ã‚ã‚ˆã€‚<br>
                    (2) æ–œé¢ä¸‹ç«¯ã§ã®åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’æ±‚ã‚ã‚ˆã€‚<br>
                    (3) æ‘©æ“¦åŠ›ãŒã—ãŸä»•äº‹ã‚’æ±‚ã‚ã‚ˆã€‚<br>
                    (4) æ‘©æ“¦åŠ›ã®å¤§ãã•ã‚’æ±‚ã‚ã‚ˆã€‚<br>
                    (5) ã€Œå¤±ã‚ã‚ŒãŸã€åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¯ã©ã“ã¸è¡Œã£ãŸã‹èª¬æ˜ã›ã‚ˆã€‚
                </p>
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p><strong>(1) ä¸Šç«¯ã§ã®åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼</strong></p>
                    <p>
                        åŸºæº–ã‚’æ–œé¢ä¸‹ç«¯ã«ã¨ã‚‹ã¨ã€<br>
                        $E_1 = \dfrac{1}{2}mv_1^2 + mgh = 0 + 2.0 \times 10 \times 10 = 200$ J
                    </p>
                    
                    <p><strong>(2) ä¸‹ç«¯ã§ã®åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼</strong></p>
                    <p>
                        $E_2 = \dfrac{1}{2}mv_2^2 + 0 = \dfrac{1}{2} \times 2.0 \times 8.0^2 = 64$ J
                    </p>
                    
                    <p><strong>(3) æ‘©æ“¦åŠ›ãŒã—ãŸä»•äº‹</strong></p>
                    <p>
                        ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¨ä»•äº‹ã®é–¢ä¿‚ã‚ˆã‚Šã€<br>
                        $E_2 - E_1 = W_{æ‘©æ“¦}$<br>
                        $W_{æ‘©æ“¦} = 64 - 200 = -136$ J
                    </p>
                    
                    <p><strong>(4) æ‘©æ“¦åŠ›ã®å¤§ãã•</strong></p>
                    <p>
                        æ‘©æ“¦åŠ›ã‚’ $f$ ã¨ã™ã‚‹ã¨ã€$W_{æ‘©æ“¦} = -f \times L$ï¼ˆè² ãªã®ã¯ç§»å‹•ã¨é€†å‘ãã ã‹ã‚‰ï¼‰<br>
                        $-136 = -f \times 20$<br>
                        $f = 6.8$ N
                    </p>
                    
                    <p><strong>(5) ã€Œå¤±ã‚ã‚ŒãŸã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®è¡Œæ–¹</strong></p>
                    <p>
                        åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¯ $200 - 64 = 136$ J æ¸›å°‘ã—ãŸãŒã€
                        ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜ã®æ³•å‰‡ã«ã‚ˆã‚Šã€ã“ã®åˆ†ã¯<strong>æ¶ˆæ»…ã—ãŸã‚ã‘ã§ã¯ãªã„</strong>ã€‚<br>
                        æ‘©æ“¦ã«ã‚ˆã£ã¦ã€136 J ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¯<strong>ç†±ã‚¨ãƒãƒ«ã‚®ãƒ¼</strong>ã«å¤‰æ›ã•ã‚ŒãŸã€‚
                        ï¼ˆæ–œé¢ã¨ç‰©ä½“ãŒã‚ãšã‹ã«æ¸©ã¾ã£ã¦ã„ã‚‹ï¼‰<br><br>
                        ã€Œã‚¨ãƒãƒ«ã‚®ãƒ¼ã®ãƒ­ã‚¹ã€ã¨ã¯ã€åŠ›å­¦çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‹ã‚‰è¦‹ãŸè¡¨ç¾ã§ã‚ã‚Šã€
                        ã‚¨ãƒãƒ«ã‚®ãƒ¼å…¨ä½“ã¨ã—ã¦ã¯å¸¸ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã€‚
                    </p>
                </details>
            </div>
        </div>
        
        <div id="simulation" class="tab-content">
            <h2>ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>
            <p>ç‰©ä½“ã«åŠ›ã‚’åŠ ãˆã¦æŠ¼ã—ãŸã¨ãã€ä»•äº‹ã¨ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®é–¢ä¿‚ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚<strong>æ‘©æ“¦ã®ã‚ã‚‹åºŠ</strong>ã§ã®é‹å‹•ã§ã™ã€‚</p>
            
            <div id="sim-container">
                <canvas id="physicsCanvas"></canvas>
            </div>
            
            <div class="sim-controls">
                <div class="control-group">
                    <label>åŠ ãˆã‚‹åŠ› (F): <span class="value-display" id="forceDisplay">20 N</span></label>
                    <input type="range" id="forceSlider" min="0" max="50" value="20" step="1">
                </div>
                
                <div style="background: #e8e8e8; padding: 10px; border-radius: 5px; margin-bottom: 20px;">
                    <p style="margin: 0; color: #666;"><strong>å›ºå®šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:</strong> è³ªé‡ m = 2.0 kgã€åˆé€Ÿåº¦ vâ‚€ = 0 m/sã€<span style="color: #f44336;">æ‘©æ“¦åŠ› f = 4.0 N</span></p>
                </div>
                
                <div class="button-group">
                    <button class="sim-button start" id="startBtn">â–¶ ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
                    <button class="sim-button reset" id="resetBtn">â†º ãƒªã‚»ãƒƒãƒˆ</button>
                </div>
            </div>
            
            <div class="energy-display" style="flex-wrap: wrap;">
                <div class="energy-item work" style="min-width: 200px;">
                    <h4>æ‰‹ãŒåŠ ãˆãŸä»•äº‹ W<sub>F</sub></h4>
                    <div class="value" id="workFValue">0.0 J</div>
                    <div style="font-size: 12px;">$F \times x$</div>
                </div>
                <div class="energy-item kinetic" style="min-width: 200px;">
                    <h4>é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ K</h4>
                    <div class="value" id="keValue">0.0 J</div>
                    <div style="font-size: 12px;">$\frac{1}{2}mv^2$</div>
                </div>
                <div class="energy-item" style="min-width: 200px; background: linear-gradient(135deg, #f44336, #ff7043);">
                    <h4>æ‘©æ“¦ã«ã‚ˆã‚‹ç†± Q</h4>
                    <div class="value" id="heatValue">0.0 J</div>
                    <div style="font-size: 12px;">$f \times x$ï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ­ã‚¹ï¼‰</div>
                </div>
                <div class="energy-item total" style="min-width: 200px;">
                    <h4>ç¾åœ¨ã®é€Ÿåº¦ v</h4>
                    <div class="value" id="velocityValue">0.0 m/s</div>
                </div>
            </div>
            
            <div class="energy-bar-container">
                <h4>ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒãƒ¼ï¼ˆæœ€å¤§ã‚¹ã‚±ãƒ¼ãƒ«: 500 Jï¼‰</h4>
                <div class="bar-wrapper">
                    <div class="bar-label">
                        <span style="color: #ff9800; font-weight: bold;">æ‰‹ãŒåŠ ãˆãŸä»•äº‹ W<sub>F</sub> = F Ã— x</span>
                        <span id="workFBarValue">0 J</span>
                    </div>
                    <div class="bar-bg">
                        <div class="bar-fill work" id="workFBar" style="width: 0%;"></div>
                    </div>
                </div>
                <div class="bar-wrapper">
                    <div class="bar-label">
                        <span style="color: #4CAF50; font-weight: bold;">é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ K</span>
                        <span id="keBarValue">0 J</span>
                    </div>
                    <div class="bar-bg">
                        <div class="bar-fill kinetic" id="keBar" style="width: 0%;"></div>
                    </div>
                </div>
                <div class="bar-wrapper">
                    <div class="bar-label">
                        <span style="color: #f44336; font-weight: bold;">æ‘©æ“¦ã«ã‚ˆã‚‹ç†± Qï¼ˆãƒ­ã‚¹ï¼‰</span>
                        <span id="heatBarValue">0 J</span>
                    </div>
                    <div class="bar-bg">
                        <div class="bar-fill" id="heatBar" style="width: 0%; background: linear-gradient(90deg, #f44336, #ff7043);"></div>
                    </div>
                </div>
                <div class="bar-wrapper" style="margin-top: 15px; padding-top: 15px; border-top: 2px dashed #667eea;">
                    <div class="bar-label">
                        <span style="color: #9c27b0; font-weight: bold;">K + Qï¼ˆé‹å‹•E + ç†±ï¼‰</span>
                        <span id="sumBarValue">0 J</span>
                    </div>
                    <div class="bar-bg">
                        <div class="bar-fill" id="sumBar" style="width: 0%; background: linear-gradient(90deg, #9c27b0, #e040fb);"></div>
                    </div>
                </div>
            </div>
            
            <div class="formula-box" style="margin-top: 20px;">
                <p style="text-align: center; font-size: 1.1em;">
                    <strong>ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜ã®ç¢ºèª</strong><br><br>
                    $$ W_F = K + Q $$
                    <br>
                    æ‰‹ãŒåŠ ãˆãŸä»•äº‹ = é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ + æ‘©æ“¦ã«ã‚ˆã‚‹ç†±ï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ­ã‚¹ï¼‰
                </p>
            </div>
            
            <div class="point-box" style="margin-top: 20px;">
                <strong>è¦³å¯Ÿãƒã‚¤ãƒ³ãƒˆ</strong><br>
                ãƒ»ã‚ªãƒ¬ãƒ³ã‚¸ã®ãƒãƒ¼ï¼ˆæ‰‹ã®ä»•äº‹ $W_F$ï¼‰ã¨ç´«ã®ãƒãƒ¼ï¼ˆ$K + Q$ï¼‰ãŒ<strong>å¸¸ã«ä¸€è‡´</strong>ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†<br>
                ãƒ»åºŠãŒ<strong>èµ¤ãå…‰ã‚‹</strong>ã®ã¯æ‘©æ“¦ç†±ã‚’è¡¨ã—ã¦ã„ã¾ã™<br>
                ãƒ»åºŠã‹ã‚‰å‡ºã‚‹<strong>ã‚®ã‚¶ã‚®ã‚¶ç·š</strong>ã¯ç†±ï¼ˆéŸ³ï¼‰ã®ç™ºç”Ÿã‚’è¡¨ç¾ã—ã¦ã„ã¾ã™<br>
                ãƒ»åŠ› $F$ ã‚’å°ã•ãã™ã‚‹ã¨ã€æ‘©æ“¦åŠ›ã«æ‰“ã¡å‹ã¦ãšå‹•ãã¾ã›ã‚“ï¼ˆ$F > f$ ã®ã¨ãå‹•ãï¼‰
            </div>
        </div>
    </div>
    
    <script>
    // --- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ ---
    function openTab(tabName) {
        var contents = document.getElementsByClassName("tab-content");
        for (var i = 0; i < contents.length; i++) {
            contents[i].style.display = "none";
            contents[i].classList.remove("active");
        }
        var buttons = document.getElementsByClassName("tab-btn");
        for (var i = 0; i < buttons.length; i++) {
            buttons[i].classList.remove("active");
        }
        document.getElementById(tabName).style.display = "block";
        document.getElementById(tabName).classList.add("active");
        if (event) {
            event.currentTarget.classList.add("active");
        }
        
        // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ–ã‚’é–‹ã„ãŸã¨ãã«Canvasã‚’ãƒªã‚µã‚¤ã‚º
        if (tabName === 'simulation') {
            resizeCanvas();
        }
    }

    // --- è§£èª¬ç”¨ã®å›³ã‚’æç”» ---
    function drawDiagrams() {
        // è‡ªç”±è½ä¸‹ã®å›³
        const ffCanvas = document.getElementById('freefallDiagram');
        const ffCtx = ffCanvas.getContext('2d');
        ffCtx.clearRect(0, 0, ffCanvas.width, ffCanvas.height);
        
        // åœ°é¢
        ffCtx.fillStyle = '#8B4513';
        ffCtx.fillRect(0, 170, ffCanvas.width, 30);
        ffCtx.strokeStyle = '#333';
        ffCtx.setLineDash([5, 5]);
        ffCtx.beginPath();
        ffCtx.moveTo(0, 170);
        ffCtx.lineTo(ffCanvas.width, 170);
        ffCtx.stroke();
        ffCtx.setLineDash([]);
        
        // ç‰©ä½“ï¼ˆä¸Šï¼‰
        ffCtx.fillStyle = '#667eea';
        ffCtx.fillRect(110, 30, 30, 30);
        
        // ç‰©ä½“ï¼ˆä¸‹ã€åŠé€æ˜ï¼‰
        ffCtx.fillStyle = 'rgba(102, 126, 234, 0.3)';
        ffCtx.fillRect(110, 140, 30, 30);
        
        // é‡åŠ›ãƒ™ã‚¯ãƒˆãƒ«
        ffCtx.strokeStyle = '#f44336';
        ffCtx.lineWidth = 3;
        ffCtx.beginPath();
        ffCtx.moveTo(125, 60);
        ffCtx.lineTo(125, 110);
        ffCtx.stroke();
        // çŸ¢å°
        ffCtx.beginPath();
        ffCtx.moveTo(125, 110);
        ffCtx.lineTo(120, 100);
        ffCtx.lineTo(130, 100);
        ffCtx.closePath();
        ffCtx.fillStyle = '#f44336';
        ffCtx.fill();
        
        // ãƒ©ãƒ™ãƒ«
        ffCtx.fillStyle = '#f44336';
        ffCtx.font = 'bold 14px sans-serif';
        ffCtx.fillText('mg', 135, 90);
        
        // é«˜ã• h
        ffCtx.strokeStyle = '#333';
        ffCtx.lineWidth = 1;
        ffCtx.beginPath();
        ffCtx.moveTo(50, 45);
        ffCtx.lineTo(50, 170);
        ffCtx.stroke();
        ffCtx.beginPath();
        ffCtx.moveTo(45, 45);
        ffCtx.lineTo(55, 45);
        ffCtx.stroke();
        ffCtx.beginPath();
        ffCtx.moveTo(45, 170);
        ffCtx.lineTo(55, 170);
        ffCtx.stroke();
        ffCtx.fillStyle = '#333';
        ffCtx.fillText('h', 35, 110);
        
        // æ–œé¢ã®å›³
        const slCanvas = document.getElementById('slopeDiagram');
        const slCtx = slCanvas.getContext('2d');
        slCtx.clearRect(0, 0, slCanvas.width, slCanvas.height);
        
        // åœ°é¢
        slCtx.fillStyle = '#8B4513';
        slCtx.fillRect(0, 170, slCanvas.width, 30);
        
        // æ–œé¢
        slCtx.fillStyle = '#ddd';
        slCtx.beginPath();
        slCtx.moveTo(30, 170);
        slCtx.lineTo(200, 170);
        slCtx.lineTo(30, 40);
        slCtx.closePath();
        slCtx.fill();
        slCtx.strokeStyle = '#333';
        slCtx.lineWidth = 2;
        slCtx.stroke();
        
        // ç‰©ä½“ï¼ˆæ–œé¢ä¸Šï¼‰
        const angle = Math.atan2(130, 170);
        slCtx.save();
        slCtx.translate(80, 90);
        slCtx.rotate(-angle);
        slCtx.fillStyle = '#667eea';
        slCtx.fillRect(-15, -25, 30, 25);
        slCtx.restore();
        
        // é‡åŠ›ãƒ™ã‚¯ãƒˆãƒ«ï¼ˆç‰©ä½“ã‹ã‚‰ï¼‰
        slCtx.strokeStyle = '#f44336';
        slCtx.lineWidth = 3;
        slCtx.beginPath();
        slCtx.moveTo(80, 80);
        slCtx.lineTo(80, 130);
        slCtx.stroke();
        slCtx.beginPath();
        slCtx.moveTo(80, 130);
        slCtx.lineTo(75, 120);
        slCtx.lineTo(85, 120);
        slCtx.closePath();
        slCtx.fillStyle = '#f44336';
        slCtx.fill();
        slCtx.fillText('mg', 88, 115);
        
        // å‚ç›´æŠ—åŠ›ãƒ™ã‚¯ãƒˆãƒ«ï¼ˆæ–œé¢ã«å‚ç›´ï¼‰
        const nx = 40 * Math.sin(angle);
        const ny = -40 * Math.cos(angle);
        slCtx.strokeStyle = '#4CAF50';
        slCtx.beginPath();
        slCtx.moveTo(80, 80);
        slCtx.lineTo(80 + nx, 80 + ny);
        slCtx.stroke();
        slCtx.beginPath();
        const arrowAngle = Math.atan2(ny, nx);
        slCtx.moveTo(80 + nx, 80 + ny);
        slCtx.lineTo(80 + nx - 10*Math.cos(arrowAngle - 0.5), 80 + ny - 10*Math.sin(arrowAngle - 0.5));
        slCtx.lineTo(80 + nx - 10*Math.cos(arrowAngle + 0.5), 80 + ny - 10*Math.sin(arrowAngle + 0.5));
        slCtx.closePath();
        slCtx.fillStyle = '#4CAF50';
        slCtx.fill();
        slCtx.fillStyle = '#4CAF50';
        slCtx.fillText('N', 80 + nx + 5, 80 + ny);
        
        // ç§»å‹•æ–¹å‘ï¼ˆæ–œé¢ã«æ²¿ã£ã¦ï¼‰
        slCtx.strokeStyle = '#2196F3';
        slCtx.setLineDash([5, 3]);
        slCtx.beginPath();
        slCtx.moveTo(80, 80);
        slCtx.lineTo(140, 130);
        slCtx.stroke();
        slCtx.setLineDash([]);
        slCtx.fillStyle = '#2196F3';
        slCtx.fillText('ç§»å‹•æ–¹å‘', 145, 140);
        
        // 90åº¦ãƒãƒ¼ã‚¯
        slCtx.strokeStyle = '#333';
        slCtx.lineWidth = 1;
        slCtx.beginPath();
        slCtx.arc(80, 80, 15, -angle - Math.PI/2, -angle, false);
        slCtx.stroke();
        
        // é«˜ã• h
        slCtx.strokeStyle = '#333';
        slCtx.beginPath();
        slCtx.moveTo(220, 40);
        slCtx.lineTo(220, 170);
        slCtx.stroke();
        slCtx.beginPath();
        slCtx.moveTo(215, 40);
        slCtx.lineTo(225, 40);
        slCtx.stroke();
        slCtx.beginPath();
        slCtx.moveTo(215, 170);
        slCtx.lineTo(225, 170);
        slCtx.stroke();
        slCtx.fillStyle = '#333';
        slCtx.fillText('h', 230, 110);
        
        // æ‘©æ“¦ã‚ã‚Šã®å›³
        const frCanvas = document.getElementById('frictionDiagram');
        const frCtx = frCanvas.getContext('2d');
        frCtx.clearRect(0, 0, frCanvas.width, frCanvas.height);
        
        // åœ°é¢
        frCtx.fillStyle = '#8B4513';
        frCtx.fillRect(0, 190, frCanvas.width, 30);
        
        // æ–œé¢ï¼ˆç²—ã„ï¼‰
        frCtx.fillStyle = '#ccc';
        frCtx.beginPath();
        frCtx.moveTo(50, 190);
        frCtx.lineTo(300, 190);
        frCtx.lineTo(50, 30);
        frCtx.closePath();
        frCtx.fill();
        frCtx.strokeStyle = '#333';
        frCtx.lineWidth = 2;
        frCtx.stroke();
        
        // ç²—ã•ã‚’è¡¨ç¾
        frCtx.strokeStyle = '#999';
        frCtx.lineWidth = 1;
        for (let i = 0; i < 15; i++) {
            const x1 = 60 + i * 16;
            const y1 = 190 - (x1 - 50) * (160/250);
            frCtx.beginPath();
            frCtx.moveTo(x1, y1);
            frCtx.lineTo(x1 + 5, y1 - 5);
            frCtx.stroke();
        }
        
        // ç‚¹Aï¼ˆä¸Šç«¯ï¼‰
        frCtx.fillStyle = '#667eea';
        frCtx.beginPath();
        frCtx.arc(70, 50, 10, 0, Math.PI * 2);
        frCtx.fill();
        frCtx.fillStyle = '#333';
        frCtx.font = 'bold 14px sans-serif';
        frCtx.fillText('A', 55, 40);
        
        // ç‚¹Bï¼ˆé€”ä¸­ï¼‰
        frCtx.fillStyle = 'rgba(102, 126, 234, 0.6)';
        frCtx.beginPath();
        frCtx.arc(150, 110, 10, 0, Math.PI * 2);
        frCtx.fill();
        frCtx.fillStyle = '#333';
        frCtx.fillText('B', 160, 105);
        
        // ç‚¹Cï¼ˆä¸‹ç«¯ï¼‰
        frCtx.fillStyle = 'rgba(102, 126, 234, 0.3)';
        frCtx.beginPath();
        frCtx.arc(280, 180, 10, 0, Math.PI * 2);
        frCtx.fill();
        frCtx.fillStyle = '#333';
        frCtx.fillText('C', 290, 175);
        
        // é«˜ã•è¡¨ç¤º
        frCtx.strokeStyle = '#333';
        frCtx.setLineDash([3, 3]);
        frCtx.beginPath();
        frCtx.moveTo(70, 50);
        frCtx.lineTo(20, 50);
        frCtx.lineTo(20, 190);
        frCtx.stroke();
        frCtx.setLineDash([]);
        frCtx.fillText('h', 5, 120);
        
        // h/2
        frCtx.setLineDash([3, 3]);
        frCtx.beginPath();
        frCtx.moveTo(150, 110);
        frCtx.lineTo(35, 110);
        frCtx.stroke();
        frCtx.setLineDash([]);
        frCtx.fillText('h/2', 5, 155);
        
        // æ‘©æ“¦åŠ›ã®çŸ¢å°ï¼ˆç§»å‹•ã¨é€†å‘ãï¼‰
        const fAngle = Math.atan2(160, 250);
        frCtx.strokeStyle = '#ff9800';
        frCtx.lineWidth = 2;
        frCtx.beginPath();
        frCtx.moveTo(150, 110);
        frCtx.lineTo(150 - 30*Math.cos(fAngle), 110 + 30*Math.sin(fAngle));
        frCtx.stroke();
        frCtx.fillStyle = '#ff9800';
        frCtx.fillText('f (æ‘©æ“¦)', 100, 145);
        
        // æ–œé¢ã®é•·ã• L
        frCtx.fillStyle = '#666';
        frCtx.font = '12px sans-serif';
        frCtx.fillText('æ–œé¢ã®é•·ã• L', 140, 200);
    }

    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å›³ã‚’æç”»
    window.addEventListener('load', drawDiagrams);

    // --- ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ ---
    const canvas = document.getElementById('physicsCanvas');
    const ctx = canvas.getContext('2d');
    
    // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    const mass = 2.0; // kgï¼ˆå›ºå®šï¼‰
    const friction = 4.0; // Nï¼ˆæ‘©æ“¦åŠ›ã€å›ºå®šï¼‰
    let force = 20; // N
    let positionM = 0; // mï¼ˆãƒ¡ãƒ¼ãƒˆãƒ«å˜ä½ï¼‰
    let time = 0;
    let isRunning = false;
    let animationId = null;
    let heatIntensity = 0; // ç†±ã®å¼·åº¦ï¼ˆ0ã€œ1ï¼‰
    let heatWaves = []; // ç†±æ³¢ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨
    
    // ã‚¹ã‚±ãƒ¼ãƒ«è¨­å®š
    const pixelsPerMeter = 50; // 1m = 50px
    const maxEnergy = 500; // Jï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒãƒ¼ã®æœ€å¤§å€¤ï¼‰
    const startX = 50; // é–‹å§‹ä½ç½®ï¼ˆpxï¼‰
    
    // DOMè¦ç´ 
    const forceSlider = document.getElementById('forceSlider');
    const forceDisplay = document.getElementById('forceDisplay');
    const startBtn = document.getElementById('startBtn');
    const resetBtn = document.getElementById('resetBtn');
    const keValue = document.getElementById('keValue');
    const workFValue = document.getElementById('workFValue');
    const heatValue = document.getElementById('heatValue');
    const velocityValue = document.getElementById('velocityValue');
    const keBar = document.getElementById('keBar');
    const workFBar = document.getElementById('workFBar');
    const heatBar = document.getElementById('heatBar');
    const sumBar = document.getElementById('sumBar');
    const keBarValue = document.getElementById('keBarValue');
    const workFBarValue = document.getElementById('workFBarValue');
    const heatBarValue = document.getElementById('heatBarValue');
    const sumBarValue = document.getElementById('sumBarValue');
    
    // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆ
    forceSlider.addEventListener('input', function() {
        force = parseFloat(this.value);
        forceDisplay.textContent = force + ' N';
    });
    
    // ã‚¹ã‚¿ãƒ¼ãƒˆ/ä¸€æ™‚åœæ­¢ãƒœã‚¿ãƒ³
    startBtn.addEventListener('click', function() {
        if (isRunning) {
            // ä¸€æ™‚åœæ­¢
            isRunning = false;
            startBtn.textContent = 'â–¶ ã‚¹ã‚¿ãƒ¼ãƒˆ';
            startBtn.classList.remove('pause');
            startBtn.classList.add('start');
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
        } else {
            // ã‚¹ã‚¿ãƒ¼ãƒˆ
            isRunning = true;
            startBtn.textContent = 'â¸ ä¸€æ™‚åœæ­¢';
            startBtn.classList.remove('start');
            startBtn.classList.add('pause');
            lastTime = performance.now();
            animate();
        }
    });
    
    // ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³
    resetBtn.addEventListener('click', function() {
        isRunning = false;
        startBtn.textContent = 'â–¶ ã‚¹ã‚¿ãƒ¼ãƒˆ';
        startBtn.classList.remove('pause');
        startBtn.classList.add('start');
        if (animationId) {
            cancelAnimationFrame(animationId);
        }
        positionM = 0;
        time = 0;
        heatIntensity = 0;
        heatWaves = [];
        updateDisplay();
        draw();
    });
    
    // Canvas ãƒªã‚µã‚¤ã‚º
    function resizeCanvas() {
        canvas.width = canvas.parentElement.clientWidth;
        canvas.height = 250;
        draw();
    }
    
    window.addEventListener('resize', resizeCanvas);
    
    // ç†±æ³¢ã‚’è¿½åŠ 
    function addHeatWave(x, y) {
        heatWaves.push({
            x: x,
            y: y,
            age: 0,
            maxAge: 30,
            amplitude: 5 + Math.random() * 5
        });
    }
    
    // ã‚¨ãƒãƒ«ã‚®ãƒ¼è¨ˆç®—ï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜å‰‡ã«åŸºã¥ãæ­£ç¢ºãªè¨ˆç®—ï¼‰
    function calculateEnergy() {
        const workF = force * positionM; // æ‰‹ãŒã—ãŸä»•äº‹ W_F = F Ã— x
        const heat = friction * positionM; // æ‘©æ“¦ã«ã‚ˆã‚‹ç†± Q = f Ã— x
        const ke = workF - heat; // é‹å‹•ã‚¨ãƒãƒ«ã‚®ãƒ¼ K = W_F - Qï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜å‰‡ï¼‰
        const velocity = ke > 0 ? Math.sqrt(2 * ke / mass) : 0; // v = âˆš(2K/m)
        
        return { workF, heat, ke, velocity };
    }
    
    // æç”»
    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        const energy = calculateEnergy();
        
        // èƒŒæ™¯
        ctx.fillStyle = '#f8f9fa';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        // åºŠã®ç†±è¡¨ç¾ï¼ˆèµ¤ãå…‰ã‚‹ï¼‰
        const heatColor = `rgba(255, ${100 - heatIntensity * 100}, ${100 - heatIntensity * 100}, ${0.3 + heatIntensity * 0.5})`;
        const gradient = ctx.createLinearGradient(0, 170, 0, 220);
        gradient.addColorStop(0, heatColor);
        gradient.addColorStop(1, '#8B4513');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 170, canvas.width, 80);
        
        // åºŠã®æ‘©æ“¦ã‚’è¡¨ç¾ï¼ˆã‚¶ãƒ©ã‚¶ãƒ©ï¼‰
        ctx.strokeStyle = '#666';
        ctx.lineWidth = 1;
        for (let i = 0; i < canvas.width; i += 15) {
            ctx.beginPath();
            ctx.moveTo(i, 175);
            ctx.lineTo(i + 7, 170);
            ctx.stroke();
        }
        
        // åºŠã®ç·š
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(0, 170);
        ctx.lineTo(canvas.width, 170);
        ctx.stroke();
        
        // ç†±æ³¢ï¼ˆã‚®ã‚¶ã‚®ã‚¶ç·šï¼‰ã®æç”»
        ctx.strokeStyle = '#ff6b6b';
        ctx.lineWidth = 2;
        for (let i = heatWaves.length - 1; i >= 0; i--) {
            const wave = heatWaves[i];
            const alpha = 1 - wave.age / wave.maxAge;
            ctx.strokeStyle = `rgba(255, 107, 107, ${alpha})`;
            ctx.beginPath();
            const waveY = wave.y - wave.age * 2;
            ctx.moveTo(wave.x, waveY);
            for (let j = 0; j < 4; j++) {
                const dx = (j % 2 === 0) ? wave.amplitude : -wave.amplitude;
                ctx.lineTo(wave.x + dx, waveY - (j + 1) * 5);
            }
            ctx.stroke();
            
            // æ›´æ–°
            wave.age++;
            if (wave.age >= wave.maxAge) {
                heatWaves.splice(i, 1);
            }
        }
        
        // ç›®ç››ã‚Š
        ctx.fillStyle = '#666';
        ctx.font = '12px sans-serif';
        for (let i = 0; i <= 10; i++) {
            const x = startX + i * pixelsPerMeter;
            ctx.beginPath();
            ctx.moveTo(x, 165);
            ctx.lineTo(x, 175);
            ctx.stroke();
            ctx.fillText(i + 'm', x - 10, 190);
        }
        
        // ç‰©ä½“ã®ä½ç½®ï¼ˆãƒ”ã‚¯ã‚»ãƒ«ï¼‰
        const boxX = startX + positionM * pixelsPerMeter;
        const boxWidth = 50;
        const boxHeight = 50;
        const boxY = 170 - boxHeight;
        
        // ç®±ã®å½±
        ctx.fillStyle = 'rgba(0,0,0,0.15)';
        ctx.fillRect(boxX + 5, boxY + 5, boxWidth, boxHeight);
        
        // ç®±æœ¬ä½“
        const boxGradient = ctx.createLinearGradient(boxX, boxY, boxX, boxY + boxHeight);
        boxGradient.addColorStop(0, '#667eea');
        boxGradient.addColorStop(1, '#764ba2');
        ctx.fillStyle = boxGradient;
        ctx.fillRect(boxX, boxY, boxWidth, boxHeight);
        
        // ç®±ã®æ 
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        ctx.strokeRect(boxX, boxY, boxWidth, boxHeight);
        
        // è³ªé‡è¡¨ç¤º
        ctx.fillStyle = 'white';
        ctx.font = 'bold 16px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('2kg', boxX + boxWidth/2, boxY + boxHeight/2 + 6);
        ctx.textAlign = 'left';
        
        // åŠ ãˆã‚‹åŠ›ã®ãƒ™ã‚¯ãƒˆãƒ«ï¼ˆF > 0 ã®ã¨ãï¼‰
        if (force > 0) {
            const arrowLength = Math.min(force * 2, 80);
            
            // åŠ›ã®çŸ¢å°
            ctx.strokeStyle = '#2196F3';
            ctx.lineWidth = 5;
            ctx.beginPath();
            ctx.moveTo(boxX - arrowLength, boxY + boxHeight/2);
            ctx.lineTo(boxX - 5, boxY + boxHeight/2);
            ctx.stroke();
            
            // çŸ¢å°ã®å…ˆç«¯
            ctx.beginPath();
            ctx.moveTo(boxX, boxY + boxHeight/2);
            ctx.lineTo(boxX - 12, boxY + boxHeight/2 - 10);
            ctx.lineTo(boxX - 12, boxY + boxHeight/2 + 10);
            ctx.closePath();
            ctx.fillStyle = '#2196F3';
            ctx.fill();
            
            // åŠ›ã®ãƒ©ãƒ™ãƒ«
            ctx.fillStyle = '#2196F3';
            ctx.font = 'bold 14px sans-serif';
            ctx.fillText('F = ' + force + ' N', boxX - arrowLength - 10, boxY + boxHeight/2 - 15);
        }
        
        // æ‘©æ“¦åŠ›ã®ãƒ™ã‚¯ãƒˆãƒ«ï¼ˆå‹•ã„ã¦ã„ã‚‹ã¨ãï¼‰
        if (energy.velocity > 0 || (force > friction && positionM > 0)) {
            const frictionArrowLen = friction * 2;
            
            ctx.strokeStyle = '#f44336';
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(boxX + boxWidth + 5, boxY + boxHeight - 10);
            ctx.lineTo(boxX + boxWidth + 5 + frictionArrowLen, boxY + boxHeight - 10);
            ctx.stroke();
            
            // çŸ¢å°ã®å…ˆç«¯ï¼ˆé€†å‘ãï¼‰
            ctx.beginPath();
            ctx.moveTo(boxX + boxWidth + 5 + frictionArrowLen, boxY + boxHeight - 10);
            ctx.lineTo(boxX + boxWidth + frictionArrowLen - 5, boxY + boxHeight - 18);
            ctx.lineTo(boxX + boxWidth + frictionArrowLen - 5, boxY + boxHeight - 2);
            ctx.closePath();
            ctx.fillStyle = '#f44336';
            ctx.fill();
            
            // ãƒ©ãƒ™ãƒ«
            ctx.fillStyle = '#f44336';
            ctx.font = 'bold 12px sans-serif';
            ctx.fillText('f = ' + friction + ' N', boxX + boxWidth + 10, boxY + boxHeight - 20);
        }
        
        // æƒ…å ±è¡¨ç¤º
        ctx.fillStyle = '#333';
        ctx.font = '14px sans-serif';
        ctx.textAlign = 'left';
        ctx.fillText('ç§»å‹•è·é›¢ x = ' + positionM.toFixed(2) + ' m', 10, 25);
        ctx.fillText('æ™‚é–“ t = ' + time.toFixed(2) + ' s', 10, 45);
        
        // é™æ­¢æ‘©æ“¦ã®è­¦å‘Š
        if (force <= friction && force > 0 && positionM === 0) {
            ctx.fillStyle = '#f44336';
            ctx.font = 'bold 14px sans-serif';
            ctx.fillText('âš  F â‰¤ f ã®ãŸã‚å‹•ãã¾ã›ã‚“ï¼', 10, 70);
        }
    }
    
    // è¡¨ç¤ºæ›´æ–°
    function updateDisplay() {
        // ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¿å­˜å‰‡ã«åŸºã¥ãæ­£ç¢ºãªè¨ˆç®—
        const energy = calculateEnergy();
        const sum = energy.ke + energy.heat; // ã“ã‚Œã¯å¿…ãš workF ã¨ç­‰ã—ããªã‚‹
        
        keValue.textContent = energy.ke.toFixed(1) + ' J';
        workFValue.textContent = energy.workF.toFixed(1) + ' J';
        heatValue.textContent = energy.heat.toFixed(1) + ' J';
        velocityValue.textContent = energy.velocity.toFixed(2) + ' m/s';
        
        // ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒãƒ¼
        const kePercent = Math.min(100, (energy.ke / maxEnergy) * 100);
        const workFPercent = Math.min(100, (energy.workF / maxEnergy) * 100);
        const heatPercent = Math.min(100, (energy.heat / maxEnergy) * 100);
        const sumPercent = Math.min(100, (sum / maxEnergy) * 100);
        
        keBar.style.width = kePercent + '%';
        workFBar.style.width = workFPercent + '%';
        heatBar.style.width = heatPercent + '%';
        sumBar.style.width = sumPercent + '%';
        
        keBarValue.textContent = energy.ke.toFixed(1) + ' J';
        workFBarValue.textContent = energy.workF.toFixed(1) + ' J';
        heatBarValue.textContent = energy.heat.toFixed(1) + ' J';
        sumBarValue.textContent = sum.toFixed(1) + ' J';
        
        // ç†±ã®å¼·åº¦ã‚’æ›´æ–°ï¼ˆè¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç”¨ï¼‰
        heatIntensity = Math.min(1, energy.heat / 200);
    }
    
    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    let lastTime = 0;
    let heatWaveTimer = 0;
    
    function animate(currentTime) {
        if (!isRunning) return;
        
        const dt = (currentTime - lastTime) / 1000; // ç§’ã«å¤‰æ›
        lastTime = currentTime;
        
        if (dt > 0 && dt < 0.1) { // ç•°å¸¸ãª dt ã‚’é™¤å¤–
            // ç‰©ç†è¨ˆç®—
            // åŠ ãˆã‚‹åŠ›ãŒæ‘©æ“¦åŠ›ã‚ˆã‚Šå¤§ãã„ã¨ãã®ã¿å‹•ã
            if (force > friction) {
                // é‹å‹•æ–¹ç¨‹å¼: ma = F - f ã‚ˆã‚Š a = (F-f)/m
                const acceleration = (force - friction) / mass;
                
                // ç­‰åŠ é€Ÿåº¦é‹å‹•: x = (1/2)atÂ² ã‚ˆã‚Šä½ç½®ã‚’æ›´æ–°
                // ç¾åœ¨ã®é€Ÿåº¦ã‚’è¨ˆç®—
                const energy = calculateEnergy();
                const currentVelocity = energy.velocity;
                
                // ä½ç½®æ›´æ–°: Î”x = v*Î”t + (1/2)*a*(Î”t)Â²
                positionM += currentVelocity * dt + 0.5 * acceleration * dt * dt;
                time += dt;
                
                // ç†±æ³¢ã‚’è¿½åŠ ï¼ˆå‹•ã„ã¦ã„ã‚‹ã¨ãï¼‰
                if (currentVelocity > 0) {
                    heatWaveTimer += dt;
                    if (heatWaveTimer > 0.1) {
                        const boxX = startX + positionM * pixelsPerMeter;
                        addHeatWave(boxX + 25 + Math.random() * 20 - 10, 175);
                        heatWaveTimer = 0;
                    }
                }
            }
            
            // ç”»é¢ç«¯ã§åœæ­¢
            const maxPositionM = (canvas.width - startX - 70) / pixelsPerMeter;
            if (positionM > maxPositionM) {
                positionM = maxPositionM;
                isRunning = false;
                startBtn.textContent = 'â–¶ ã‚¹ã‚¿ãƒ¼ãƒˆ';
                startBtn.classList.remove('pause');
                startBtn.classList.add('start');
            }
        }
        
        draw();
        updateDisplay();
        
        if (isRunning) {
            animationId = requestAnimationFrame(animate);
        }
    }
    
    // åˆæœŸåŒ–
    resizeCanvas();
    updateDisplay();
    </script>
</body>
</html>