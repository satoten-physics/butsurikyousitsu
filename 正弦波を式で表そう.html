<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜æ ¡ç‰©ç† - æ­£å¼¦æ³¢ã‚’å¼ã§è¡¨ãã†</title>
    <script>
      window.MathJax = {
      tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
     }
     };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .back-link {
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 10px;
        }
        h1 {
            color: #333;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .tab-btn {
            flex: 1;
            min-width: 150px;
            padding: 12px 20px;
            border: none;
            background: #f0f0f0;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
            transition: all 0.3s;
        }
        .tab-btn.active {
            background: #667eea;
            color: white;
        }
        .tab-btn:hover {
            background: #8899f0;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        h2 {
            color: #667eea;
            margin-bottom: 15px;
        }
        h3 {
            color: #555;
            margin: 25px 0 15px 0;
            padding-bottom: 5px;
            border-bottom: 2px solid #667eea;
        }
        .lecture-content {
            line-height: 1.8;
            color: #333;
        }
        .lecture-content p {
            margin-bottom: 15px;
        }
        .formula-box {
            background: linear-gradient(135deg, #e8f4f8 0%, #f0e8f8 100%);
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }
        .formula-box.important {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0e0 100%);
            border-left-color: #ff6b6b;
        }
        .point-box {
            background: #fffde7;
            border: 2px solid #ffc107;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 10px;
        }
        .point-box::before {
            content: "ğŸ’¡ ãƒã‚¤ãƒ³ãƒˆ";
            display: block;
            font-weight: bold;
            color: #f57c00;
            margin-bottom: 10px;
        }
        .step-box {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #ddd;
        }
        .step-box h4 {
            color: #667eea;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .step-number {
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* è§£èª¬ç”¨å›³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .figure-container {
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
        }
        .figure-container canvas {
            display: block;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
        }
        .figure-caption {
            text-align: center;
            color: #666;
            font-size: 0.9em;
            margin-top: 10px;
        }
        
        /* ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        #sim-container {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        #physicsCanvas {
            display: block;
            width: 100%;
            background: white;
            border-radius: 5px;
            border: 2px solid #ddd;
        }
        .sim-controls {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
        }
        .control-group {
            margin-bottom: 20px;
        }
        .control-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        .control-group input[type="range"] {
            width: 100%;
            margin: 10px 0;
        }
        .value-display {
            display: inline-block;
            color: white;
            padding: 5px 15px;
            border-radius: 5px;
            font-weight: bold;
            min-width: 100px;
            text-align: center;
        }
        /* è‰²åˆ†ã‘ç”¨ */
        .color-t { background: #e74c3c; }
        .color-x { background: #3498db; }
        .color-phi { background: #27ae60; }
        .color-y { background: #9b59b6; }
        
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .sim-button {
            flex: 1;
            min-width: 120px;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .sim-button.reset {
            background: #f44336;
            color: white;
        }
        .sim-button.reset:hover {
            background: #da190b;
        }
        
        /* å¤§ããªå¼ã®è¡¨ç¤º */
        .main-formula {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.4em;
        }
        .main-formula .var-t { color: #ffcccc; }
        .main-formula .var-x { color: #cce5ff; }
        .main-formula .var-phi { color: #ccffcc; }
        
        /* çµæœè¡¨ç¤º */
        .result-display {
            background: #f0f0f0;
            border: 3px solid #9b59b6;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        .result-display h4 {
            color: #9b59b6;
            margin-bottom: 10px;
        }
        .result-value {
            font-size: 2em;
            font-weight: bold;
            color: #9b59b6;
        }
        
        /* ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒœãƒƒã‚¯ã‚¹ */
        .mission-box {
            background: linear-gradient(135deg, #ff9a56 0%, #ff6b6b 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .mission-box h4 {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .mission-box .mission-icon {
            font-size: 1.5em;
        }
        .mission-target {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 1.2em;
            text-align: center;
        }
        .mission-status {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
        }
        .mission-status.success {
            background: #4CAF50;
        }
        .mission-status.trying {
            background: rgba(255,255,255,0.3);
        }
        .next-mission-btn {
            margin-top: 10px;
            padding: 10px 20px;
            background: white;
            color: #ff6b6b;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            display: none;
        }
        .next-mission-btn:hover {
            background: #f0f0f0;
        }
        
        /* å›ºå®šå€¤è¡¨ç¤º */
        .fixed-params {
            background: #e8e8e8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 10px;
        }
        .fixed-param {
            background: white;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        /* å•é¡Œç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .problem-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #fafafa;
            border-radius: 10px;
        }
        .problem-section h4 {
            color: #333;
            margin-bottom: 15px;
        }
        details {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
        }
        details summary {
            cursor: pointer;
            font-weight: bold;
            color: #2e7d32;
        }
        details[open] summary {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #a5d6a7;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            header, .container {
                padding: 15px;
            }
            .tab-btn {
                min-width: 100px;
                font-size: 14px;
            }
            .main-formula {
                font-size: 1.1em;
                padding: 15px;
            }
            .fixed-params {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <a href="index.html" class="back-link">â† ç›®æ¬¡ã«æˆ»ã‚‹</a>
        <h1>æ­£å¼¦æ³¢ã‚’å¼ã§è¡¨ãã†</h1>
    </header>
    <div class="container">
        
        <div class="tabs">
            <button class="tab-btn active" onclick="openTab('lecture')">è§£èª¬ç·¨</button>
            <button class="tab-btn" onclick="openTab('problem')">å•é¡Œç·¨</button>
            <button class="tab-btn" onclick="openTab('simulation')">ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
        </div>
        
        <div id="lecture" class="tab-content active">
            <h2>æ­£å¼¦æ³¢ã®å¼ã‚’å°ã“ã†</h2>
            
            <div class="lecture-content">
                <p>æ³¢ã®ç¾è±¡ã‚’æ•°å¼ã§è¡¨ã™ã“ã¨ã§ã€ä»»æ„ã®æ™‚åˆ»ãƒ»ä»»æ„ã®ä½ç½®ã§ã®åª’è³ªã®å¤‰ä½ã‚’è¨ˆç®—ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã“ã“ã§ã¯ã€æ­£å¼¦æ³¢ã®å¼ã‚’<strong>é †åºç«‹ã¦ã¦</strong>å°ã„ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p>
                
                <h3>Step 1ï¼šå˜æŒ¯å‹•ã®å¾©ç¿’</h3>
                <div class="step-box">
                    <p>æ³¢ã¯åª’è³ªã®æŒ¯å‹•ãŒä¼ã‚ã‚‹ç¾è±¡ã§ã™ã€‚ã¾ãšã€1ç‚¹ã§ã®æŒ¯å‹•ï¼ˆå˜æŒ¯å‹•ï¼‰ã‚’å¼ã§è¡¨ã—ã¾ã—ã‚‡ã†ã€‚</p>
                    <p>åŸç‚¹ï¼ˆ$x = 0$ï¼‰ã«ã‚ã‚‹åª’è³ªãŒã€æ™‚åˆ» $t = 0$ ã§ $y = 0$ ã‚’æ­£ã®å‘ãã«é€šéã™ã‚‹å˜æŒ¯å‹•ã‚’ã—ã¦ã„ã‚‹ã¨ãã€å¤‰ä½ $y$ ã¯æ¬¡ã®ã‚ˆã†ã«è¡¨ã•ã‚Œã¾ã™ï¼š</p>
                    
                    <div class="formula-box">
                        $$y = A \sin \frac{2\pi}{T} t$$
                    </div>
                    
                    <p>ã“ã“ã§ã€</p>
                    <ul style="margin-left: 20px; margin-bottom: 15px;">
                        <li>$A$ï¼šæŒ¯å¹…ï¼ˆæœ€å¤§å¤‰ä½ï¼‰[m]</li>
                        <li>$T$ï¼šå‘¨æœŸ [s]</li>
                        <li>$\frac{2\pi}{T}$ï¼šè§’æŒ¯å‹•æ•° $\omega$ [rad/s] ã¨æ›¸ãã“ã¨ã‚‚ã‚ã‚‹</li>
                    </ul>
                    
                    <div class="figure-container">
                        <canvas id="fig1Canvas" width="500" height="200"></canvas>
                        <p class="figure-caption">å›³1ï¼šåŸºæœ¬ã®å˜æŒ¯å‹•ï¼ˆ$t=0$ ã§ $y=0$ ã‚’æ­£ã®å‘ãã«é€šéï¼‰</p>
                    </div>
                </div>
                
                <h3>Step 2ï¼šåˆæœŸä½ç›¸ã®å°å…¥</h3>
                <div class="step-box">
                    <p>Step 1 ã§ã¯ã€Œ$t = 0$ ã®ã¨ã $y = 0$ ã‚’æ­£ã®å‘ãã«é€šéã€ã¨ã„ã†æ¡ä»¶ã§ã—ãŸã€‚ã—ã‹ã—ã€å®Ÿéš›ã«ã¯ $t = 0$ ã®ã¨ãã« $y \neq 0$ ã§ã‚ã‚‹ã“ã¨ã‚‚å¤šã„ã§ã™ã€‚</p>
                    
                    <p>ã“ã®ã‚ˆã†ãªå ´åˆã€<strong>åˆæœŸä½ç›¸ $\phi_0$</strong> ã‚’å°å…¥ã—ã¾ã™ï¼š</p>
                    
                    <div class="formula-box">
                        $$y = A \sin \left( \frac{2\pi}{T} t + \phi_0 \right)$$
                    </div>
                    
                    <div class="figure-container">
                        <canvas id="fig2Canvas" width="500" height="250"></canvas>
                        <p class="figure-caption">å›³2ï¼šåˆæœŸä½ç›¸ã«ã‚ˆã£ã¦ $t=0$ ã§ã®å¤‰ä½ãŒå¤‰ã‚ã‚‹</p>
                    </div>
                    
                    <div class="point-box">
                        <p><strong>åˆæœŸä½ç›¸ $\phi_0$ ã®æ±ºã‚æ–¹ï¼š</strong></p>
                        <p>$t = 0$ ã‚’ä»£å…¥ã™ã‚‹ã¨ $y = A \sin \phi_0$ ã¨ãªã‚‹ã®ã§ã€</p>
                        <ul style="margin-left: 20px;">
                            <li>$t = 0$ ã§ $y = 0$ï¼ˆæ­£ã®å‘ãï¼‰ â†’ $\phi_0 = 0$</li>
                            <li>$t = 0$ ã§ $y = A$ï¼ˆæœ€å¤§ï¼‰ â†’ $\phi_0 = \frac{\pi}{2}$</li>
                            <li>$t = 0$ ã§ $y = 0$ï¼ˆè² ã®å‘ãï¼‰ â†’ $\phi_0 = \pi$</li>
                            <li>$t = 0$ ã§ $y = -A$ï¼ˆæœ€å°ï¼‰ â†’ $\phi_0 = -\frac{\pi}{2}$</li>
                        </ul>
                    </div>
                </div>
                
                <h3>Step 3ï¼šä½ç½® $x$ ã¸ã®æ‹¡å¼µ</h3>
                <div class="step-box">
                    <p>ã“ã“ã¾ã§ã¯åŸç‚¹ï¼ˆ$x = 0$ï¼‰ã§ã®æŒ¯å‹•ã§ã—ãŸã€‚æ¬¡ã«ã€æ³¢ãŒé€Ÿã• $v$ ã§ $x$ è»¸ã®æ­£ã®å‘ãã«ä¼ã‚ã‚‹ã¨ãã€<strong>ä½ç½® $x$ ã§ã®å¤‰ä½</strong>ã‚’è€ƒãˆã¾ã™ã€‚</p>
                    
                    <div class="point-box">
                        <p>ä½ç½® $x$ ã§ã®æŒ¯å‹•ã¯ã€åŸç‚¹ã§ã®æŒ¯å‹•ã‚ˆã‚Š <strong>$\dfrac{x}{v}$ ã ã‘é…ã‚Œã¦</strong> ä¼ã‚ã‚‹ã€‚</p>
                        <p>ã¤ã¾ã‚Šã€ã€Œæ™‚åˆ» $t$ã€ä½ç½® $x$ ã§ã®å¤‰ä½ã€ï¼ã€Œæ™‚åˆ» $t - \dfrac{x}{v}$ã€ä½ç½® $0$ ã§ã®å¤‰ä½ã€</p>
                    </div>
                    
                    <div class="figure-container">
                        <canvas id="fig3Canvas" width="500" height="280"></canvas>
                        <p class="figure-caption">å›³3ï¼šä½ç½® $x$ ã§ã®æŒ¯å‹•ã¯åŸç‚¹ã‚ˆã‚Šé…ã‚Œã¦ä¼ã‚ã‚‹</p>
                    </div>
                    
                    <p>ã—ãŸãŒã£ã¦ã€åŸç‚¹ã§ã®å¼ $y = A \sin \frac{2\pi}{T} t$ ã® $t$ ã‚’ $t - \frac{x}{v}$ ã«ç½®ãæ›ãˆã‚‹ã¨ï¼š</p>
                    
                    <div class="formula-box">
                        $$y = A \sin \frac{2\pi}{T} \left( t - \frac{x}{v} \right)$$
                    </div>
                </div>
                
                <h3>Step 4ï¼šæ­£å¼¦æ³¢ã®ä¸€èˆ¬å¼</h3>
                <div class="step-box">
                    <p>æ³¢ã®é€Ÿã• $v$ã€å‘¨æœŸ $T$ã€æ³¢é•· $\lambda$ ã®é–“ã«ã¯ $v = \frac{\lambda}{T}$ï¼ˆã¤ã¾ã‚Š $\frac{1}{v} = \frac{T}{\lambda}$ï¼‰ã®é–¢ä¿‚ãŒã‚ã‚Šã¾ã™ã€‚</p>
                    <p>ã“ã‚Œã‚’ä½¿ã£ã¦å¼ã‚’æ•´ç†ã™ã‚‹ã¨ï¼š</p>
                    
                    <div class="formula-box important">
                        <p style="font-size: 1.2em; margin-bottom: 10px;"><strong>ã€æ­£å¼¦æ³¢ã®å¼ã€‘</strong></p>
                        $$y = A \sin 2\pi \left( \frac{t}{T} - \frac{x}{\lambda} \right)$$
                    </div>
                    
                    <p>åˆæœŸä½ç›¸ $\phi_0$ ã‚’å«ã‚ãŸæœ€ã‚‚ä¸€èˆ¬çš„ãªå½¢ã¯ï¼š</p>
                    <div class="formula-box">
                        $$y = A \sin \left( 2\pi \left( \frac{t}{T} - \frac{x}{\lambda} \right) + \phi_0 \right)$$
                    </div>
                    
                    <div class="figure-container">
                        <canvas id="fig4Canvas" width="500" height="200"></canvas>
                        <p class="figure-caption">å›³4ï¼šæ­£å¼¦æ³¢ã®æ³¢å½¢ï¼ˆã‚ã‚‹æ™‚åˆ»ã§ã® $y$-$x$ ã‚°ãƒ©ãƒ•ï¼‰</p>
                    </div>
                </div>
                
                <h3>Step 5ï¼šä½ç›¸ã«ã¤ã„ã¦</h3>
                <div class="step-box">
                    <p>æ­£å¼¦æ³¢ã®å¼ã§ã€$\sin$ ã®ä¸­èº«å…¨ä½“ã‚’<strong>ä½ç›¸</strong>ã¨ã„ã„ã¾ã™ï¼š</p>
                    
                    <div class="formula-box">
                        $$\text{ä½ç›¸} = 2\pi \left( \frac{t}{T} - \frac{x}{\lambda} \right) + \phi_0 \quad \text{[rad]}$$
                    </div>
                    
                    <div class="figure-container">
                        <canvas id="fig5Canvas" width="500" height="200"></canvas>
                        <p class="figure-caption">å›³5ï¼šåŒä½ç›¸ï¼ˆèµ¤ç‚¹åŒå£«ï¼‰ã¨é€†ä½ç›¸ï¼ˆèµ¤ç‚¹ã¨é’ç‚¹ï¼‰</p>
                    </div>
                    
                    <div class="point-box">
                        <p><strong>åŒä½ç›¸ã¨é€†ä½ç›¸ï¼š</strong></p>
                        <ul style="margin-left: 20px;">
                            <li><strong>åŒä½ç›¸</strong>ï¼šä½ç›¸ã®å·®ãŒ $0, 2\pi, 4\pi, \ldots$ï¼ˆ$2n\pi$ï¼‰ã®ã¨ãã€2ç‚¹ã¯å¸¸ã«åŒã˜å¤‰ä½ã§æŒ¯å‹•</li>
                            <li><strong>é€†ä½ç›¸</strong>ï¼šä½ç›¸ã®å·®ãŒ $\pi, 3\pi, 5\pi, \ldots$ï¼ˆ$(2n+1)\pi$ï¼‰ã®ã¨ãã€2ç‚¹ã¯å¸¸ã«é€†å‘ãã«æŒ¯å‹•</li>
                        </ul>
                    </div>
                    
                    <p>â€» å‚è€ƒï¼šè§’æŒ¯å‹•æ•° $\omega = \frac{2\pi}{T}$ã€æ³¢æ•° $k = \frac{2\pi}{\lambda}$ ã‚’ä½¿ã†ã¨ã€æ­£å¼¦æ³¢ã®å¼ã¯ $y = A \sin (\omega t - kx + \phi_0)$ ã¨ã‚‚æ›¸ã‘ã¾ã™ã€‚</p>
                </div>
            </div>
            
            <h2 style="margin-top: 40px;">æˆæ¥­è³‡æ–™</h2>
            <iframe src="https://drive.google.com/file/d/1rd3AUHNkj-NLM0IEztEdsiVOdPwxD6EA/preview" width="100%" height="500"></iframe>
        </div>
        
        <div id="problem" class="tab-content">
            <h2>ç¢ºèªå•é¡Œ</h2>
            
            <div class="problem-section">
                <h4>å•é¡Œ1ï¼šåŸºæœ¬çš„ãªæ­£å¼¦æ³¢ã®å¼</h4>
                <p>æŒ¯å¹… $0.2$ mã€å‘¨æœŸ $2.0$ s ã®æ­£å¼¦æ³¢ãŒ $x$ è»¸ã®æ­£ã®å‘ãã«é€Ÿã• $3.0$ m/s ã§é€²ã‚“ã§ã„ã‚‹ã€‚åŸç‚¹ã§ã®åª’è³ªã¯ã€$t = 0$ ã®ã¨ã $y = 0$ ã‚’æ­£ã®å‘ãã«é€šéã—ãŸã€‚</p>
                <p>ï¼ˆ1ï¼‰ã“ã®æ³¢ã®æ³¢é•·ã‚’æ±‚ã‚ã‚ˆã€‚</p>
                <p>ï¼ˆ2ï¼‰ä½ç½® $x$ [m]ã€æ™‚åˆ» $t$ [s] ã«ãŠã‘ã‚‹å¤‰ä½ $y$ [m] ã‚’è¡¨ã™å¼ã‚’æ±‚ã‚ã‚ˆã€‚</p>
                <p>ï¼ˆ3ï¼‰$t = 1.0$ s ã®ã¨ãã€$x = 1.5$ m ã§ã®å¤‰ä½ã‚’æ±‚ã‚ã‚ˆã€‚</p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p><strong>ï¼ˆ1ï¼‰æ³¢é•·</strong></p>
                    <p>$v = f\lambda = \frac{\lambda}{T}$ ã‚ˆã‚Š</p>
                    <p>$$\lambda = vT = 3.0 \times 2.0 = 6.0 \text{ m}$$</p>
                    
                    <p><strong>ï¼ˆ2ï¼‰æ­£å¼¦æ³¢ã®å¼</strong></p>
                    <p>$t = 0$ ã§ $y = 0$ï¼ˆæ­£ã®å‘ãï¼‰ãªã®ã§åˆæœŸä½ç›¸ $\phi_0 = 0$</p>
                    <p>$$y = A \sin 2\pi \left( \frac{t}{T} - \frac{x}{\lambda} \right) = 0.2 \sin 2\pi \left( \frac{t}{2.0} - \frac{x}{6.0} \right)$$</p>
                    <p>æ•´ç†ã™ã‚‹ã¨ï¼š$$y = 0.2 \sin \pi \left( t - \frac{x}{3} \right) \text{ [m]}$$</p>
                    
                    <p><strong>ï¼ˆ3ï¼‰å¤‰ä½ã®è¨ˆç®—</strong></p>
                    <p>$t = 1.0$ã€$x = 1.5$ ã‚’ä»£å…¥ï¼š</p>
                    <p>$$y = 0.2 \sin \pi \left( 1.0 - \frac{1.5}{3} \right) = 0.2 \sin \pi \times 0.5 = 0.2 \sin \frac{\pi}{2} = 0.2 \text{ m}$$</p>
                </details>
            </div>
            
            <div class="problem-section">
                <h4>å•é¡Œ2ï¼šåˆæœŸä½ç›¸ã‚’å«ã‚€å ´åˆ</h4>
                <p>$x$ è»¸ã®æ­£ã®å‘ãã«é€²ã‚€æ­£å¼¦æ³¢ãŒã‚ã‚Šã€$t = 0$ ã®ã¨ãåŸç‚¹ã®åª’è³ªã¯ $y = A$ï¼ˆæœ€å¤§å¤‰ä½ï¼‰ã®ä½ç½®ã«ã‚ã£ãŸã€‚æŒ¯å¹… $A$ã€å‘¨æœŸ $T$ã€æ³¢é•· $\lambda$ ã¨ã—ã¦ã€ã“ã®æ³¢ã®å¼ã‚’æ±‚ã‚ã‚ˆã€‚</p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p>$t = 0$ã€$x = 0$ ã®ã¨ã $y = A$ ãªã®ã§ï¼š</p>
                    <p>$$A = A \sin \phi_0$$</p>
                    <p>$$\sin \phi_0 = 1$$</p>
                    <p>$$\phi_0 = \frac{\pi}{2}$$</p>
                    <p>ã—ãŸãŒã£ã¦ï¼š</p>
                    <p>$$y = A \sin \left( 2\pi \left( \frac{t}{T} - \frac{x}{\lambda} \right) + \frac{\pi}{2} \right)$$</p>
                    <p>ã¾ãŸã¯ã€$\sin\left(\theta + \frac{\pi}{2}\right) = \cos\theta$ ã‚’ä½¿ã£ã¦ï¼š</p>
                    <p>$$y = A \cos 2\pi \left( \frac{t}{T} - \frac{x}{\lambda} \right)$$</p>
                </details>
            </div>
            
            <div class="problem-section">
                <h4>å•é¡Œ3ï¼šä½ç›¸å·®ã®å•é¡Œ</h4>
                <p>æ³¢é•· $4.0$ m ã®æ­£å¼¦æ³¢ãŒ $x$ è»¸ä¸Šã‚’ä¼ã‚ã£ã¦ã„ã‚‹ã€‚$x = 1.0$ m ã®ç‚¹ã¨ $x = 3.0$ m ã®ç‚¹ã®ä½ç›¸å·®ã‚’æ±‚ã‚ã€ã“ã‚Œã‚‰ã®ç‚¹ãŒåŒä½ç›¸ã‹é€†ä½ç›¸ã‹ã‚’ç­”ãˆã‚ˆã€‚</p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p>2ç‚¹é–“ã®è·é›¢ã¯ $\Delta x = 3.0 - 1.0 = 2.0$ m</p>
                    <p>ä½ç›¸å·®ã¯è·é›¢ã«å¯¾å¿œã™ã‚‹ã®ã§ï¼š</p>
                    <p>$$\Delta \phi = \frac{2\pi}{\lambda} \Delta x = \frac{2\pi}{4.0} \times 2.0 = \pi \text{ [rad]}$$</p>
                    <p>ä½ç›¸å·®ãŒ $\pi$ ãªã®ã§ã€ã“ã‚Œã‚‰ã®2ç‚¹ã¯<strong>é€†ä½ç›¸</strong>ã§ã‚ã‚‹ã€‚</p>
                    <p>ï¼ˆä¸€æ–¹ãŒæ­£ã®æœ€å¤§å¤‰ä½ã®ã¨ãã€ä»–æ–¹ã¯è² ã®æœ€å¤§å¤‰ä½ã¨ãªã‚‹ï¼‰</p>
                </details>
            </div>
        </div>
        
        <div id="simulation" class="tab-content">
            <h2>æ­£å¼¦æ³¢ã®å¤‰ä½ã‚’æ±‚ã‚ã‚ˆã†</h2>
            <p>ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§å¤‰æ•°ã‚’å¤‰ãˆã¦ã€æ­£å¼¦æ³¢ã®å¼ã‹ã‚‰å¤‰ä½ $y$ ã‚’æ±‚ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
            
            <!-- å›ºå®šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¡¨ç¤º -->
            <div class="fixed-params">
                <div class="fixed-param">æŒ¯å¹… A = 1.0 m</div>
                <div class="fixed-param">å‘¨æœŸ T = 2.0 s</div>
                <div class="fixed-param">æ³¢é•· Î» = 4.0 m</div>
            </div>
            
            <!-- å¤§ããªå¼ã®è¡¨ç¤º -->
            <div class="main-formula" id="mainFormula">
                $$y = 1.0 \sin \left( 2\pi \left( \frac{\color{#ff6b6b}{t}}{\color{black}{2.0}} - \frac{\color{#3498db}{x}}{\color{black}{4.0}} \right) + \color{#27ae60}{\phi_0} \right)$$
            </div>
            
            <!-- çµæœè¡¨ç¤º -->
            <div class="result-display">
                <h4>ç¾åœ¨ã®å¤‰ä½</h4>
                <div class="result-value" id="resultValue">y = 0.00 m</div>
            </div>
            
            <div id="sim-container">
                <canvas id="physicsCanvas"></canvas>
            </div>
            
            <div class="sim-controls">
                <div class="control-group">
                    <label>æ™‚åˆ» <span class="value-display color-t" id="tDisplay">t = 0.00 s</span></label>
                    <input type="range" id="tSlider" min="0" max="4" value="0" step="0.01">
                </div>
                
                <div class="control-group">
                    <label>ä½ç½® <span class="value-display color-x" id="xDisplay">x = 0.00 m</span></label>
                    <input type="range" id="xSlider" min="0" max="8" value="0" step="0.01">
                </div>
                
                <div class="control-group">
                    <label>åˆæœŸä½ç›¸ <span class="value-display color-phi" id="phiDisplay">Ï†â‚€ = 0</span></label>
                    <input type="range" id="phiSlider" min="-3.14159" max="3.14159" value="0" step="0.01">
                </div>
                
                <div class="button-group">
                    <button class="sim-button reset" id="resetBtn">âŸ² ãƒªã‚»ãƒƒãƒˆï¼ˆt=0, x=0, Ï†â‚€=0ï¼‰</button>
                </div>
            </div>
            
            <!-- ãƒŸãƒƒã‚·ãƒ§ãƒ³ -->
            <div class="mission-box" id="missionBox">
                <h4><span class="mission-icon">ğŸ¯</span> ãƒŸãƒƒã‚·ãƒ§ãƒ³</h4>
                <p>ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’æ“ä½œã—ã¦ã€æŒ‡å®šã•ã‚ŒãŸå¤‰ä½ã«ãªã‚‹ã‚ˆã†ã«èª¿æ•´ã—ã‚ˆã†ï¼</p>
                <div class="mission-target" id="missionTarget">
                    ç›®æ¨™ï¼šy = 0.50 m ã«ã—ã‚ˆã†ï¼
                </div>
                <div class="mission-status trying" id="missionStatus">
                    æŒ‘æˆ¦ä¸­... ç¾åœ¨ã®å¤‰ä½ã‚’ç›®æ¨™ã«è¿‘ã¥ã‘ã‚ˆã†ï¼
                </div>
                <button class="next-mission-btn" id="nextMissionBtn">æ¬¡ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ã¸ â†’</button>
            </div>
        </div>
    </div>
    
    <script>
    // --- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ ---
    function openTab(tabName) {
        var contents = document.getElementsByClassName("tab-content");
        for (var i = 0; i < contents.length; i++) {
            contents[i].style.display = "none";
            contents[i].classList.remove("active");
        }
        var buttons = document.getElementsByClassName("tab-btn");
        for (var i = 0; i < buttons.length; i++) {
            buttons[i].classList.remove("active");
        }
        document.getElementById(tabName).style.display = "block";
        document.getElementById(tabName).classList.add("active");
        if (event) {
            event.currentTarget.classList.add("active");
        }
        
        // å„ã‚¿ãƒ–ã®åˆæœŸåŒ–
        if (tabName === 'lecture') {
            setTimeout(drawAllFigures, 100);
        }
        if (tabName === 'simulation') {
            resizeSimCanvas();
            drawSimulation();
        }
        
        // MathJaxã®å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        if (window.MathJax) {
            MathJax.typesetPromise();
        }
    }

    // ========================================
    // è§£èª¬ç”¨ã®é™çš„å›³ã®æç”»
    // ========================================
    
    function drawAllFigures() {
        drawFigure1();
        drawFigure2();
        drawFigure3();
        drawFigure4();
        drawFigure5();
    }
    
    // å›³1ï¼šåŸºæœ¬ã®å˜æŒ¯å‹•
    function drawFigure1() {
        const canvas = document.getElementById('fig1Canvas');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        const W = canvas.width, H = canvas.height;
        
        ctx.fillStyle = '#fff';
        ctx.fillRect(0, 0, W, H);
        
        const margin = { left: 50, right: 20, top: 20, bottom: 30 };
        const gW = W - margin.left - margin.right;
        const gH = H - margin.top - margin.bottom;
        const centerY = margin.top + gH / 2;
        
        // è»¸
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(margin.left, margin.top);
        ctx.lineTo(margin.left, H - margin.bottom);
        ctx.lineTo(W - margin.right, H - margin.bottom);
        ctx.stroke();
        
        // ä¸­å¿ƒç·š
        ctx.strokeStyle = '#ccc';
        ctx.lineWidth = 1;
        ctx.setLineDash([5, 5]);
        ctx.beginPath();
        ctx.moveTo(margin.left, centerY);
        ctx.lineTo(W - margin.right, centerY);
        ctx.stroke();
        ctx.setLineDash([]);
        
        // ãƒ©ãƒ™ãƒ«
        ctx.fillStyle = '#333';
        ctx.font = '14px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('t', W - margin.right + 10, H - margin.bottom + 5);
        ctx.fillText('y', margin.left, margin.top - 5);
        ctx.textAlign = 'right';
        ctx.fillText('A', margin.left - 5, margin.top + 15);
        ctx.fillText('-A', margin.left - 5, H - margin.bottom - 5);
        ctx.fillText('0', margin.left - 5, centerY + 5);
        
        // æ³¢å½¢
        ctx.strokeStyle = '#667eea';
        ctx.lineWidth = 3;
        ctx.beginPath();
        const A = gH / 2 * 0.8;
        for (let i = 0; i <= gW; i++) {
            const t = (i / gW) * 4 * Math.PI;
            const y = A * Math.sin(t);
            const sx = margin.left + i;
            const sy = centerY - y;
            if (i === 0) ctx.moveTo(sx, sy);
            else ctx.lineTo(sx, sy);
        }
        ctx.stroke();
        
        // t=0ã®ç‚¹ï¼ˆåŸç‚¹ã‚’é€šéï¼‰
        ctx.fillStyle = '#e74c3c';
        ctx.beginPath();
        ctx.arc(margin.left, centerY, 8, 0, 2 * Math.PI);
        ctx.fill();
        
        // çŸ¢å°ï¼ˆæ­£ã®å‘ãã«é€šéï¼‰
        ctx.strokeStyle = '#e74c3c';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(margin.left, centerY + 20);
        ctx.lineTo(margin.left, centerY - 20);
        ctx.lineTo(margin.left - 5, centerY - 10);
        ctx.moveTo(margin.left, centerY - 20);
        ctx.lineTo(margin.left + 5, centerY - 10);
        ctx.stroke();
    }
    
    // å›³2ï¼šåˆæœŸä½ç›¸
    function drawFigure2() {
        const canvas = document.getElementById('fig2Canvas');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        const W = canvas.width, H = canvas.height;
        
        ctx.fillStyle = '#fff';
        ctx.fillRect(0, 0, W, H);
        
        const margin = { left: 50, right: 20, top: 20, bottom: 50 };
        const gW = W - margin.left - margin.right;
        const gH = H - margin.top - margin.bottom;
        const centerY = margin.top + gH / 2;
        
        // è»¸
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(margin.left, margin.top);
        ctx.lineTo(margin.left, H - margin.bottom);
        ctx.lineTo(W - margin.right, H - margin.bottom);
        ctx.stroke();
        
        // ä¸­å¿ƒç·š
        ctx.strokeStyle = '#ccc';
        ctx.lineWidth = 1;
        ctx.setLineDash([5, 5]);
        ctx.beginPath();
        ctx.moveTo(margin.left, centerY);
        ctx.lineTo(W - margin.right, centerY);
        ctx.stroke();
        ctx.setLineDash([]);
        
        // ãƒ©ãƒ™ãƒ«
        ctx.fillStyle = '#333';
        ctx.font = '14px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('t', W - margin.right + 10, H - margin.bottom + 5);
        
        const A = gH / 2 * 0.7;
        const phases = [
            { phi: 0, color: '#667eea', label: 'Ï†â‚€=0' },
            { phi: Math.PI/2, color: '#e74c3c', label: 'Ï†â‚€=Ï€/2' },
            { phi: Math.PI, color: '#27ae60', label: 'Ï†â‚€=Ï€' }
        ];
        
        // å„æ³¢å½¢ã‚’æç”»
        phases.forEach((p, idx) => {
            ctx.strokeStyle = p.color;
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let i = 0; i <= gW; i++) {
                const t = (i / gW) * 4 * Math.PI;
                const y = A * Math.sin(t + p.phi);
                const sx = margin.left + i;
                const sy = centerY - y;
                if (i === 0) ctx.moveTo(sx, sy);
                else ctx.lineTo(sx, sy);
            }
            ctx.stroke();
            
            // t=0ã§ã®ç‚¹
            const y0 = A * Math.sin(p.phi);
            ctx.fillStyle = p.color;
            ctx.beginPath();
            ctx.arc(margin.left, centerY - y0, 6, 0, 2 * Math.PI);
            ctx.fill();
        });
        
        // å‡¡ä¾‹
        ctx.font = '12px Arial';
        ctx.textAlign = 'left';
        phases.forEach((p, idx) => {
            const lx = margin.left + 20 + idx * 120;
            const ly = H - 20;
            ctx.fillStyle = p.color;
            ctx.fillRect(lx, ly - 10, 20, 3);
            ctx.fillText(p.label, lx + 25, ly - 5);
        });
    }
    
    // å›³3ï¼šä½ç½®xã¸ã®æ‹¡å¼µ
    function drawFigure3() {
        const canvas = document.getElementById('fig3Canvas');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        const W = canvas.width, H = canvas.height;
        
        ctx.fillStyle = '#fff';
        ctx.fillRect(0, 0, W, H);
        
        const margin = { left: 50, right: 20, top: 30, bottom: 40 };
        const gW = W - margin.left - margin.right;
        const gH = H - margin.top - margin.bottom;
        const centerY = margin.top + gH / 2;
        
        // è»¸
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(margin.left, margin.top);
        ctx.lineTo(margin.left, H - margin.bottom);
        ctx.lineTo(W - margin.right, H - margin.bottom);
        ctx.stroke();
        
        // ä¸­å¿ƒç·š
        ctx.strokeStyle = '#ccc';
        ctx.lineWidth = 1;
        ctx.setLineDash([5, 5]);
        ctx.beginPath();
        ctx.moveTo(margin.left, centerY);
        ctx.lineTo(W - margin.right, centerY);
        ctx.stroke();
        ctx.setLineDash([]);
        
        // ãƒ©ãƒ™ãƒ«
        ctx.fillStyle = '#333';
        ctx.font = '14px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('x', W - margin.right + 10, H - margin.bottom + 5);
        ctx.fillText('y', margin.left, margin.top - 10);
        
        // æ³¢å½¢ï¼ˆã‚ã‚‹æ™‚åˆ»ã§ã®å½¢ï¼‰
        const A = gH / 2 * 0.7;
        const lambda = gW / 2; // 2æ³¢é•·åˆ†è¡¨ç¤º
        ctx.strokeStyle = '#667eea';
        ctx.lineWidth = 3;
        ctx.beginPath();
        for (let i = 0; i <= gW; i++) {
            const x = i;
            const y = A * Math.sin(2 * Math.PI * x / lambda);
            const sx = margin.left + i;
            const sy = centerY - y;
            if (i === 0) ctx.moveTo(sx, sy);
            else ctx.lineTo(sx, sy);
        }
        ctx.stroke();
        
        // åŸç‚¹ã®ç‚¹
        ctx.fillStyle = '#e74c3c';
        ctx.beginPath();
        ctx.arc(margin.left, centerY, 8, 0, 2 * Math.PI);
        ctx.fill();
        ctx.fillStyle = '#333';
        ctx.font = '12px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('åŸç‚¹ O', margin.left, H - margin.bottom + 25);
        
        // ä½ç½®xã®ç‚¹
        const xPos = lambda * 0.7;
        const yAtX = A * Math.sin(2 * Math.PI * xPos / lambda);
        ctx.fillStyle = '#3498db';
        ctx.beginPath();
        ctx.arc(margin.left + xPos, centerY - yAtX, 8, 0, 2 * Math.PI);
        ctx.fill();
        ctx.fillText('ä½ç½® x', margin.left + xPos, H - margin.bottom + 25);
        
        // é…ã‚Œã‚’ç¤ºã™çŸ¢å°
        ctx.strokeStyle = '#ff9800';
        ctx.lineWidth = 2;
        ctx.setLineDash([]);
        ctx.beginPath();
        ctx.moveTo(margin.left + 20, margin.top + 15);
        ctx.lineTo(margin.left + xPos - 20, margin.top + 15);
        ctx.lineTo(margin.left + xPos - 30, margin.top + 10);
        ctx.moveTo(margin.left + xPos - 20, margin.top + 15);
        ctx.lineTo(margin.left + xPos - 30, margin.top + 20);
        ctx.stroke();
        
        ctx.fillStyle = '#ff9800';
        ctx.font = '12px Arial';
        ctx.fillText('é…ã‚Œ x/v', margin.left + xPos / 2, margin.top + 10);
    }
    
    // å›³4ï¼šæ­£å¼¦æ³¢ã®æ³¢å½¢
    function drawFigure4() {
        const canvas = document.getElementById('fig4Canvas');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        const W = canvas.width, H = canvas.height;
        
        ctx.fillStyle = '#fff';
        ctx.fillRect(0, 0, W, H);
        
        const margin = { left: 50, right: 20, top: 20, bottom: 40 };
        const gW = W - margin.left - margin.right;
        const gH = H - margin.top - margin.bottom;
        const centerY = margin.top + gH / 2;
        
        // è»¸
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(margin.left, margin.top);
        ctx.lineTo(margin.left, H - margin.bottom);
        ctx.lineTo(W - margin.right, H - margin.bottom);
        ctx.stroke();
        
        // ä¸­å¿ƒç·š
        ctx.strokeStyle = '#ccc';
        ctx.lineWidth = 1;
        ctx.setLineDash([5, 5]);
        ctx.beginPath();
        ctx.moveTo(margin.left, centerY);
        ctx.lineTo(W - margin.right, centerY);
        ctx.stroke();
        ctx.setLineDash([]);
        
        // ãƒ©ãƒ™ãƒ«
        ctx.fillStyle = '#333';
        ctx.font = '14px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('x', W - margin.right + 10, H - margin.bottom + 5);
        ctx.textAlign = 'right';
        ctx.fillText('A', margin.left - 5, margin.top + 15);
        ctx.fillText('-A', margin.left - 5, H - margin.bottom - 5);
        
        // æ³¢å½¢
        const A = gH / 2 * 0.8;
        const lambda = gW / 2;
        ctx.strokeStyle = '#667eea';
        ctx.lineWidth = 3;
        ctx.beginPath();
        for (let i = 0; i <= gW; i++) {
            const x = i;
            const y = A * Math.sin(2 * Math.PI * x / lambda);
            const sx = margin.left + i;
            const sy = centerY - y;
            if (i === 0) ctx.moveTo(sx, sy);
            else ctx.lineTo(sx, sy);
        }
        ctx.stroke();
        
        // æ³¢é•·ã®è¡¨ç¤º
        ctx.strokeStyle = '#e74c3c';
        ctx.lineWidth = 2;
        ctx.setLineDash([]);
        const y_bottom = H - margin.bottom - 20;
        ctx.beginPath();
        ctx.moveTo(margin.left, y_bottom);
        ctx.lineTo(margin.left + lambda, y_bottom);
        ctx.stroke();
        // ä¸¡ç«¯ã®ç¸¦ç·š
        ctx.beginPath();
        ctx.moveTo(margin.left, y_bottom - 5);
        ctx.lineTo(margin.left, y_bottom + 5);
        ctx.moveTo(margin.left + lambda, y_bottom - 5);
        ctx.lineTo(margin.left + lambda, y_bottom + 5);
        ctx.stroke();
        
        ctx.fillStyle = '#e74c3c';
        ctx.textAlign = 'center';
        ctx.fillText('Î»ï¼ˆæ³¢é•·ï¼‰', margin.left + lambda / 2, y_bottom + 15);
    }
    
    // å›³5ï¼šåŒä½ç›¸ã¨é€†ä½ç›¸
    function drawFigure5() {
        const canvas = document.getElementById('fig5Canvas');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        const W = canvas.width, H = canvas.height;
        
        ctx.fillStyle = '#fff';
        ctx.fillRect(0, 0, W, H);
        
        const margin = { left: 50, right: 20, top: 20, bottom: 30 };
        const gW = W - margin.left - margin.right;
        const gH = H - margin.top - margin.bottom;
        const centerY = margin.top + gH / 2;
        
        // è»¸
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(margin.left, margin.top);
        ctx.lineTo(margin.left, H - margin.bottom);
        ctx.lineTo(W - margin.right, H - margin.bottom);
        ctx.stroke();
        
        // ä¸­å¿ƒç·š
        ctx.strokeStyle = '#ccc';
        ctx.lineWidth = 1;
        ctx.setLineDash([5, 5]);
        ctx.beginPath();
        ctx.moveTo(margin.left, centerY);
        ctx.lineTo(W - margin.right, centerY);
        ctx.stroke();
        ctx.setLineDash([]);
        
        // æ³¢å½¢
        const A = gH / 2 * 0.7;
        const lambda = gW / 2;
        ctx.strokeStyle = '#667eea';
        ctx.lineWidth = 3;
        ctx.beginPath();
        for (let i = 0; i <= gW; i++) {
            const x = i;
            const y = A * Math.sin(2 * Math.PI * x / lambda);
            const sx = margin.left + i;
            const sy = centerY - y;
            if (i === 0) ctx.moveTo(sx, sy);
            else ctx.lineTo(sx, sy);
        }
        ctx.stroke();
        
        // åŒä½ç›¸ã®ç‚¹ï¼ˆèµ¤ï¼‰
        const x1 = lambda * 0.25;
        const x2 = lambda * 1.25; // 1æ³¢é•·é›¢ã‚ŒãŸç‚¹
        const y1 = A * Math.sin(2 * Math.PI * x1 / lambda);
        const y2 = A * Math.sin(2 * Math.PI * x2 / lambda);
        
        ctx.fillStyle = '#e74c3c';
        ctx.beginPath();
        ctx.arc(margin.left + x1, centerY - y1, 8, 0, 2 * Math.PI);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(margin.left + x2, centerY - y2, 8, 0, 2 * Math.PI);
        ctx.fill();
        
        // é€†ä½ç›¸ã®ç‚¹ï¼ˆé’ï¼‰
        const x3 = lambda * 0.75; // x1ã‹ã‚‰åŠæ³¢é•·
        const y3 = A * Math.sin(2 * Math.PI * x3 / lambda);
        
        ctx.fillStyle = '#3498db';
        ctx.beginPath();
        ctx.arc(margin.left + x3, centerY - y3, 8, 0, 2 * Math.PI);
        ctx.fill();
        
        // ãƒ©ãƒ™ãƒ«
        ctx.font = '11px Arial';
        ctx.fillStyle = '#e74c3c';
        ctx.textAlign = 'center';
        ctx.fillText('åŒä½ç›¸', margin.left + (x1 + x2) / 2, margin.top + 10);
        ctx.fillStyle = '#3498db';
        ctx.fillText('é€†ä½ç›¸', margin.left + x3, H - margin.bottom + 15);
    }

    // ========================================
    // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
    // ========================================
    
    const simCanvas = document.getElementById('physicsCanvas');
    const simCtx = simCanvas.getContext('2d');
    
    // å›ºå®šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    const A = 1.0;      // æŒ¯å¹…
    const T = 2.0;      // å‘¨æœŸ
    const lambda = 4.0; // æ³¢é•·
    
    // å¯å¤‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    let currentT = 0;
    let currentX = 0;
    let currentPhi = 0;
    
    // ãƒŸãƒƒã‚·ãƒ§ãƒ³
    const missions = [
        { target: 0.5, tolerance: 0.05, text: 'y = 0.50 m' },
        { target: -0.5, tolerance: 0.05, text: 'y = -0.50 m' },
        { target: 1.0, tolerance: 0.05, text: 'y = 1.00 mï¼ˆæœ€å¤§å€¤ï¼‰' },
        { target: 0.0, tolerance: 0.05, text: 'y = 0.00 m' },
        { target: -1.0, tolerance: 0.05, text: 'y = -1.00 mï¼ˆæœ€å°å€¤ï¼‰' },
        { target: 0.71, tolerance: 0.05, text: 'y â‰ˆ 0.71 mï¼ˆâ‰ˆ âˆš2/2ï¼‰' }
    ];
    let currentMission = 0;
    
    // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼è¦ç´ 
    const tSlider = document.getElementById('tSlider');
    const xSlider = document.getElementById('xSlider');
    const phiSlider = document.getElementById('phiSlider');
    const tDisplay = document.getElementById('tDisplay');
    const xDisplay = document.getElementById('xDisplay');
    const phiDisplay = document.getElementById('phiDisplay');
    const resultValue = document.getElementById('resultValue');
    const missionTarget = document.getElementById('missionTarget');
    const missionStatus = document.getElementById('missionStatus');
    const nextMissionBtn = document.getElementById('nextMissionBtn');
    const resetBtn = document.getElementById('resetBtn');
    
    function resizeSimCanvas() {
        const container = document.getElementById('sim-container');
        if (container) {
            simCanvas.width = container.clientWidth - 40;
            simCanvas.height = 350;
        }
    }
    
    function calculateY(t, x, phi) {
        const phase = 2 * Math.PI * (t / T - x / lambda) + phi;
        return A * Math.sin(phase);
    }
    
    function drawSimulation() {
        const W = simCanvas.width;
        const H = simCanvas.height;
        
        simCtx.fillStyle = '#fff';
        simCtx.fillRect(0, 0, W, H);
        
        const margin = { left: 70, right: 30, top: 40, bottom: 50 };
        const gW = W - margin.left - margin.right;
        const gH = H - margin.top - margin.bottom;
        const centerY = margin.top + gH / 2;
        
        // è»¸
        simCtx.strokeStyle = '#333';
        simCtx.lineWidth = 2;
        simCtx.beginPath();
        simCtx.moveTo(margin.left, margin.top);
        simCtx.lineTo(margin.left, H - margin.bottom);
        simCtx.lineTo(W - margin.right, H - margin.bottom);
        simCtx.stroke();
        
        // ä¸­å¿ƒç·šï¼ˆy = 0ï¼‰
        simCtx.strokeStyle = '#ccc';
        simCtx.lineWidth = 1;
        simCtx.setLineDash([5, 5]);
        simCtx.beginPath();
        simCtx.moveTo(margin.left, centerY);
        simCtx.lineTo(W - margin.right, centerY);
        simCtx.stroke();
        simCtx.setLineDash([]);
        
        // æŒ¯å¹…ã®ç·š
        simCtx.strokeStyle = '#ddd';
        simCtx.beginPath();
        simCtx.moveTo(margin.left, margin.top + gH * 0.1);
        simCtx.lineTo(W - margin.right, margin.top + gH * 0.1);
        simCtx.moveTo(margin.left, margin.top + gH * 0.9);
        simCtx.lineTo(W - margin.right, margin.top + gH * 0.9);
        simCtx.stroke();
        
        // yè»¸ãƒ©ãƒ™ãƒ«
        simCtx.fillStyle = '#333';
        simCtx.font = '14px Arial';
        simCtx.textAlign = 'right';
        simCtx.fillText('y [m]', margin.left - 10, margin.top - 10);
        simCtx.fillText('1.0', margin.left - 5, margin.top + gH * 0.1 + 5);
        simCtx.fillText('0', margin.left - 5, centerY + 5);
        simCtx.fillText('-1.0', margin.left - 5, margin.top + gH * 0.9 + 5);
        
        // xè»¸ãƒ©ãƒ™ãƒ«
        simCtx.textAlign = 'center';
        simCtx.fillText('x [m]', W - margin.right, H - margin.bottom + 30);
        const xMax = 8;
        for (let x = 0; x <= xMax; x += 2) {
            const sx = margin.left + (x / xMax) * gW;
            simCtx.fillText(x.toString(), sx, H - margin.bottom + 20);
            // ç›®ç››ã‚Šç·š
            simCtx.strokeStyle = '#eee';
            simCtx.beginPath();
            simCtx.moveTo(sx, margin.top);
            simCtx.lineTo(sx, H - margin.bottom);
            simCtx.stroke();
        }
        
        // æ³¢å½¢æç”»ï¼ˆç¾åœ¨ã®æ™‚åˆ»tã§ã®æ³¢å½¢ï¼‰
        const yScale = gH * 0.4 / A;
        
        simCtx.strokeStyle = '#667eea';
        simCtx.lineWidth = 3;
        simCtx.beginPath();
        for (let i = 0; i <= gW; i++) {
            const x = (i / gW) * xMax;
            const y = calculateY(currentT, x, currentPhi);
            const sx = margin.left + i;
            const sy = centerY - y * yScale;
            if (i === 0) simCtx.moveTo(sx, sy);
            else simCtx.lineTo(sx, sy);
        }
        simCtx.stroke();
        
        // ç¾åœ¨ã®ä½ç½®xã§ã®ç¸¦ç·šï¼ˆé’ï¼‰
        const currentXScreen = margin.left + (currentX / xMax) * gW;
        simCtx.strokeStyle = '#3498db';
        simCtx.lineWidth = 2;
        simCtx.setLineDash([8, 4]);
        simCtx.beginPath();
        simCtx.moveTo(currentXScreen, margin.top);
        simCtx.lineTo(currentXScreen, H - margin.bottom);
        simCtx.stroke();
        simCtx.setLineDash([]);
        
        // ç¾åœ¨ã®å¤‰ä½ã‚’è¨ˆç®—
        const currentY = calculateY(currentT, currentX, currentPhi);
        const currentYScreen = centerY - currentY * yScale;
        
        // å¤‰ä½ã‚’ç¤ºã™æ°´å¹³ç·šï¼ˆç´«ï¼‰
        simCtx.strokeStyle = '#9b59b6';
        simCtx.lineWidth = 2;
        simCtx.setLineDash([5, 5]);
        simCtx.beginPath();
        simCtx.moveTo(margin.left, currentYScreen);
        simCtx.lineTo(currentXScreen, currentYScreen);
        simCtx.stroke();
        simCtx.setLineDash([]);
        
        // ç¾åœ¨ä½ç½®ã®ç‚¹ï¼ˆå¤§ãã‚ï¼‰
        simCtx.fillStyle = '#9b59b6';
        simCtx.beginPath();
        simCtx.arc(currentXScreen, currentYScreen, 12, 0, 2 * Math.PI);
        simCtx.fill();
        
        // ç‚¹ã®ä¸­ã«ç™½ã„æ–‡å­—ã§ã€Œyã€
        simCtx.fillStyle = 'white';
        simCtx.font = 'bold 10px Arial';
        simCtx.textAlign = 'center';
        simCtx.textBaseline = 'middle';
        simCtx.fillText('y', currentXScreen, currentYScreen);
        simCtx.textBaseline = 'alphabetic';
        
        // æƒ…å ±è¡¨ç¤º
        simCtx.font = '14px Arial';
        simCtx.textAlign = 'left';
        
        // æ™‚åˆ»tï¼ˆèµ¤ï¼‰
        simCtx.fillStyle = '#e74c3c';
        simCtx.fillText(`t = ${currentT.toFixed(2)} s`, margin.left + 10, margin.top + 20);
        
        // ä½ç½®xï¼ˆé’ï¼‰
        simCtx.fillStyle = '#3498db';
        simCtx.fillText(`x = ${currentX.toFixed(2)} m`, margin.left + 120, margin.top + 20);
        
        // åˆæœŸä½ç›¸Ï†ï¼ˆç·‘ï¼‰
        simCtx.fillStyle = '#27ae60';
        const phiStr = formatPhi(currentPhi);
        simCtx.fillText(`Ï†â‚€ = ${phiStr}`, margin.left + 230, margin.top + 20);
        
        // çµæœæ›´æ–°
        resultValue.textContent = `y = ${currentY.toFixed(2)} m`;
        
        // ãƒŸãƒƒã‚·ãƒ§ãƒ³åˆ¤å®š
        checkMission(currentY);
    }
    
    function formatPhi(phi) {
        const piVal = phi / Math.PI;
        if (Math.abs(piVal) < 0.01) return '0';
        if (Math.abs(piVal - 0.5) < 0.02) return 'Ï€/2';
        if (Math.abs(piVal - 1) < 0.02) return 'Ï€';
        if (Math.abs(piVal + 0.5) < 0.02) return '-Ï€/2';
        if (Math.abs(piVal + 1) < 0.02) return '-Ï€';
        return (piVal >= 0 ? '' : '-') + Math.abs(piVal).toFixed(2) + 'Ï€';
    }
    
    function checkMission(y) {
        const mission = missions[currentMission];
        const diff = Math.abs(y - mission.target);
        
        if (diff <= mission.tolerance) {
            missionStatus.textContent = 'ğŸ‰ ã‚¯ãƒªã‚¢ï¼ç´ æ™´ã‚‰ã—ã„ï¼';
            missionStatus.classList.remove('trying');
            missionStatus.classList.add('success');
            nextMissionBtn.style.display = 'inline-block';
        } else {
            const hint = y < mission.target ? 'ï¼ˆã‚‚ã†å°‘ã—å¤§ããï¼‰' : 'ï¼ˆã‚‚ã†å°‘ã—å°ã•ãï¼‰';
            missionStatus.textContent = `æŒ‘æˆ¦ä¸­... ${hint}`;
            missionStatus.classList.remove('success');
            missionStatus.classList.add('trying');
            nextMissionBtn.style.display = 'none';
        }
    }
    
    function updateMissionDisplay() {
        const mission = missions[currentMission];
        missionTarget.textContent = `ç›®æ¨™ï¼š${mission.text} ã«ã—ã‚ˆã†ï¼`;
        missionStatus.textContent = 'æŒ‘æˆ¦ä¸­... ç¾åœ¨ã®å¤‰ä½ã‚’ç›®æ¨™ã«è¿‘ã¥ã‘ã‚ˆã†ï¼';
        missionStatus.classList.remove('success');
        missionStatus.classList.add('trying');
        nextMissionBtn.style.display = 'none';
    }
    
    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
    tSlider.addEventListener('input', function() {
        currentT = parseFloat(this.value);
        tDisplay.textContent = `t = ${currentT.toFixed(2)} s`;
        drawSimulation();
    });
    
    xSlider.addEventListener('input', function() {
        currentX = parseFloat(this.value);
        xDisplay.textContent = `x = ${currentX.toFixed(2)} m`;
        drawSimulation();
    });
    
    phiSlider.addEventListener('input', function() {
        currentPhi = parseFloat(this.value);
        phiDisplay.textContent = `Ï†â‚€ = ${formatPhi(currentPhi)}`;
        drawSimulation();
    });
    
    resetBtn.addEventListener('click', function() {
        currentT = 0;
        currentX = 0;
        currentPhi = 0;
        tSlider.value = 0;
        xSlider.value = 0;
        phiSlider.value = 0;
        tDisplay.textContent = 't = 0.00 s';
        xDisplay.textContent = 'x = 0.00 m';
        phiDisplay.textContent = 'Ï†â‚€ = 0';
        drawSimulation();
    });
    
    nextMissionBtn.addEventListener('click', function() {
        currentMission = (currentMission + 1) % missions.length;
        updateMissionDisplay();
        drawSimulation();
    });
    
    // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚µã‚¤ã‚º
    window.addEventListener('resize', function() {
        resizeSimCanvas();
        drawSimulation();
        drawAllFigures();
    });
    
    // åˆæœŸåŒ–
    window.addEventListener('load', function() {
        drawAllFigures();
        resizeSimCanvas();
        updateMissionDisplay();
        drawSimulation();
    });
    </script>
</body>
</html>