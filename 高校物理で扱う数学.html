<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜æ ¡ç‰©ç† - é«˜æ ¡ç‰©ç†ã§æ‰±ã†æ•°å­¦ï¼ˆãƒ™ã‚¯ãƒˆãƒ«ï¼‰</title>
    <script>
      window.MathJax = {
      tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
     }
     };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .back-link {
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 10px;
        }
        h1 {
            color: #333;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .tab-btn {
            flex: 1;
            min-width: 150px;
            padding: 12px 20px;
            border: none;
            background: #f0f0f0;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
            transition: all 0.3s;
        }
        .tab-btn.active {
            background: #667eea;
            color: white;
        }
        .tab-btn:hover {
            background: #8899f0;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        h2 {
            color: #667eea;
            margin-bottom: 15px;
        }
        h3 {
            color: #333;
            margin: 25px 0 15px 0;
            padding-bottom: 5px;
            border-bottom: 2px solid #667eea;
        }
        h4 {
            color: #667eea;
            margin: 20px 0 10px 0;
        }
        p {
            line-height: 1.8;
            margin-bottom: 15px;
        }
        .point-box {
            background: linear-gradient(135deg, #e8f4f8 0%, #f0e6f6 100%);
            border-left: 4px solid #667eea;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }
        .point-box-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }
        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }
        .important-box {
            background: #ffe6e6;
            border-left: 4px solid #e74c3c;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }
        .example-box {
            background: #e8f5e9;
            border: 1px solid #4CAF50;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 10px;
        }
        .figure-container {
            text-align: center;
            margin: 20px 0;
        }
        .figure-container canvas {
            border: 1px solid #ddd;
            border-radius: 5px;
            max-width: 100%;
        }
        .figure-caption {
            font-size: 14px;
            color: #666;
            margin-top: 10px;
        }
        
        /* ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        #sim-container {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        #physicsCanvas {
            display: block;
            width: 100%;
            background: white;
            border-radius: 5px;
            border: 2px solid #ddd;
            cursor: crosshair;
        }
        .sim-controls {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
        }
        .info-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .info-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .info-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }
        .info-value {
            font-size: 20px;
            font-weight: bold;
            color: #667eea;
        }
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        .sim-button {
            flex: 1;
            min-width: 120px;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .sim-button.reset {
            background: #f44336;
            color: white;
        }
        .sim-button.reset:hover {
            background: #da190b;
        }
        .angle-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .angle-btn {
            padding: 10px 15px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 5px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .angle-btn:hover {
            background: #667eea;
            color: white;
        }
        .angle-btn.active {
            background: #667eea;
            color: white;
        }
        .graph-container {
            margin-top: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #ddd;
        }
        .graph-container h3 {
            color: #667eea;
            margin-bottom: 10px;
            border-bottom: none;
        }
        #graphCanvas {
            display: block;
            width: 100%;
            border: 1px solid #eee;
        }
        .drag-hint {
            background: #e3f2fd;
            padding: 10px 15px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-size: 14px;
            color: #1565c0;
        }
        
        /* å•é¡Œã‚¿ãƒ–ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .problem {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .problem h4 {
            color: #333;
            margin-bottom: 15px;
        }
        details {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin-top: 15px;
        }
        summary {
            cursor: pointer;
            font-weight: bold;
            color: #667eea;
        }
        details[open] summary {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            header, .container {
                padding: 15px;
            }
            .tab-btn {
                min-width: 100px;
                font-size: 14px;
            }
            .info-display {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <header>
        <a href="index.html" class="back-link">â† ç›®æ¬¡ã«æˆ»ã‚‹</a>
        <h1>é«˜æ ¡ç‰©ç†ã§æ‰±ã†æ•°å­¦ï¼ˆãƒ™ã‚¯ãƒˆãƒ«ï¼‰</h1>
    </header>
    <div class="container">
        
        <div class="tabs">
            <button class="tab-btn active" onclick="openTab('lecture')">è§£èª¬ç·¨</button>
            <button class="tab-btn" onclick="openTab('problem')">å•é¡Œç·¨</button>
            <button class="tab-btn" onclick="openTab('simulation')">ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
        </div>
        
        <div id="lecture" class="tab-content active">
            <h2>é«˜æ ¡ç‰©ç†ã§æ‰±ã†æ•°å­¦ ï½ãƒ™ã‚¯ãƒˆãƒ«ã®åŸºç¤ï½</h2>
            
            <h3>1. é«˜æ ¡ç‰©ç†ã§æœ€ã‚‚å¤§åˆ‡ãªã“ã¨ï¼šã€Œã©ã“ã‹ã‚‰è¦‹ã‚‹ã‹ã€</h3>
            
            <div class="important-box">
                <strong>ğŸ”‘ é«˜æ ¡ç‰©ç†å…¨èˆ¬ã‚’é€šã˜ã¦æœ€ã‚‚é‡è¦ãªè€ƒãˆæ–¹</strong><br>
                ç‰©ç†ã§ã¯ã€<strong>ã€Œèª°ãŒã€ã€Œã©ã“ã‹ã‚‰ã€è¦‹ã¦ã„ã‚‹ã‹</strong>ã«ã‚ˆã£ã¦ã€åŒã˜ç¾è±¡ã§ã‚‚è¦‹ãˆæ–¹ãŒå…¨ãå¤‰ã‚ã‚Šã¾ã™ã€‚<br>
                ã“ã®ã€ŒåŸºæº–ç‚¹ï¼ˆè¦–ç‚¹ï¼‰ã€ã‚’æ„è­˜ã™ã‚‹ã“ã¨ãŒã€ç‰©ç†ã‚’ç†è§£ã™ã‚‹ç¬¬ä¸€æ­©ã§ã™ã€‚
            </div>
            
            <p>
                ä¾‹ãˆã°ã€ç‚¹Oã«ã„ã‚‹äººã‹ã‚‰è¦‹ã¦ã€ç‚¹Aã®ä½ç½®ã¯ã©ã†è¡¨ç¾ã§ãã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ
            </p>
            
            <div class="figure-container">
                <canvas id="figure1" width="400" height="250"></canvas>
                <div class="figure-caption">å›³1ï¼šç‚¹Oã‹ã‚‰è¦‹ãŸç‚¹Aã®ä½ç½®</div>
            </div>
            
            <p>
                ç‚¹Oã‹ã‚‰è¦‹ã‚‹ã¨ã€ç‚¹Aã¯ã€Œxã®æ­£æ–¹å‘ã«40mã€yã®æ­£æ–¹å‘ã«30mã€ã®ä½ç½®ã«ã‚ã‚Šã¾ã™ã€‚ç‰©ä½“ã®ä½ç½®ã¯åŸºæº–ã¨ãªã‚‹ç‚¹ã‹ã‚‰ã®ã€Œå‘ãã€ã¨ã€Œè·é›¢ã€ã‚’ä½¿ãˆã°æ§˜ã€…ãªè¨€ã„æ–¹ã§è¡¨ã™ã“ã¨ãŒã§ãã¾ã™ã€‚
            </p>
            
            <div class="point-box">
                <div class="point-box-title">ğŸ“Œ Pointï¼šä½ç½®ã®è¡¨ç¾æ–¹æ³•</div>
                ç‰©ä½“ã®ä½ç½®ã¯ã€åŸºæº–ç‚¹ã‹ã‚‰ã®<br>
                â‘  <strong>å‘ã</strong>ï¼ˆã©ã®æ–¹å‘ã«ï¼‰<br>
                â‘¡ <strong>è·é›¢</strong>ï¼ˆã©ã‚Œã ã‘é›¢ã‚Œã¦ã„ã‚‹ã‹ï¼‰<br>
                ã®2ã¤ã®æƒ…å ±ã§è¡¨ç¾ã§ãã¾ã™ã€‚ã“ã®ã€Œå‘ãã¨å¤§ãã•ã€ã‚’æŒã¤é‡ã‚’<strong>ãƒ™ã‚¯ãƒˆãƒ«é‡</strong>ã¨ã„ã„ã¾ã™ã€‚
            </div>
            
            <h3>2. ã‚¹ã‚«ãƒ©ãƒ¼é‡ã¨ãƒ™ã‚¯ãƒˆãƒ«é‡</h3>
            
            <p>
                ç‰©ç†ã§æ‰±ã†é‡ã¯ã€å¤§ãã2ç¨®é¡ã«åˆ†ã‘ã‚‰ã‚Œã¾ã™ã€‚
            </p>
            
            <div class="example-box">
                <h4>ã‚¹ã‚«ãƒ©ãƒ¼é‡ï¼ˆå¤§ãã•ã ã‘ã®é‡ï¼‰</h4>
                <p>å‘ãã‚’è€ƒãˆãªã„ã€å¤§ãã•ã ã‘ã‚’è¡¨ã™é‡</p>
                <p><strong>ä¾‹ï¼š</strong>é•·ã•ã€è³ªé‡ã€æ™‚é–“ã€æ¸©åº¦ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã€ä»•äº‹</p>
                <p>ã€Œ5 kgã€ã€Œ10ç§’ã€ã€Œ100 Jã€ãªã©ã€æ•°å€¤ã¨å˜ä½ã ã‘ã§å®Œå…¨ã«è¡¨ã›ã¾ã™ã€‚</p>
            </div>
            
            <div class="example-box" style="background: #e3f2fd;">
                <h4>ãƒ™ã‚¯ãƒˆãƒ«é‡ï¼ˆå‘ãã¨å¤§ãã•ã‚’æŒã¤é‡ï¼‰</h4>
                <p>å‘ãã¨å¤§ãã•ã®ä¸¡æ–¹ã‚’è€ƒãˆã‚‹é‡</p>
                <p><strong>ä¾‹ï¼š</strong>å¤‰ä½ã€é€Ÿåº¦ã€åŠ é€Ÿåº¦ã€åŠ›</p>
                <p>ã€Œæ±å‘ãã« 5 m/sã€ã€Œä¸‹å‘ãã« 9.8 m/sÂ²ã€ã®ã‚ˆã†ã«ã€å‘ãã®æƒ…å ±ãŒå¿…è¦ã§ã™ã€‚</p>
            </div>
            
            <div class="warning-box">
                <strong>âš ï¸ æ³¨æ„ï¼šã€Œé€Ÿã•ã€ã¨ã€Œé€Ÿåº¦ã€ã®é•ã„</strong><br>
                <strong>é€Ÿã•ï¼ˆã‚¹ã‚«ãƒ©ãƒ¼ï¼‰</strong>ï¼šå¤§ãã•ã ã‘ â†’ ã€Œæ™‚é€Ÿ 60 kmã€<br>
                <strong>é€Ÿåº¦ï¼ˆãƒ™ã‚¯ãƒˆãƒ«ï¼‰</strong>ï¼šå‘ãã‚‚å«ã‚€ â†’ ã€ŒåŒ—å‘ãã«æ™‚é€Ÿ 60 kmã€<br>
                ç‰©ç†ã§ã¯ã€ã“ã®ä½¿ã„åˆ†ã‘ãŒéå¸¸ã«é‡è¦ã§ã™ï¼
            </div>
            
            <h3>3. ãƒ™ã‚¯ãƒˆãƒ«ã®è¡¨ã—æ–¹</h3>
            
            <p>
                ãƒ™ã‚¯ãƒˆãƒ«ã¯<strong>çŸ¢å°</strong>ã§è¡¨ã—ã¾ã™ã€‚çŸ¢å°ã®<strong>å‘ã</strong>ãŒãƒ™ã‚¯ãƒˆãƒ«ã®å‘ãã‚’ã€çŸ¢å°ã®<strong>é•·ã•</strong>ãŒãƒ™ã‚¯ãƒˆãƒ«ã®å¤§ãã•ã‚’è¡¨ã—ã¾ã™ã€‚
            </p>
            
            <div class="figure-container">
                <canvas id="figure2" width="500" height="200"></canvas>
                <div class="figure-caption">å›³2ï¼šãƒ™ã‚¯ãƒˆãƒ«ã®è¡¨ã—æ–¹</div>
            </div>
            
            <p>
                ãƒ™ã‚¯ãƒˆãƒ«ã¯è¨˜å·ã®ä¸Šã«çŸ¢å°ã‚’ã¤ã‘ã¦ $\vec{a}$ ã®ã‚ˆã†ã«è¡¨ã—ã€ãã®å¤§ãã•ã¯ $|\vec{a}|$ ã¾ãŸã¯å˜ã« $a$ ã¨æ›¸ãã¾ã™ã€‚
            </p>
            
            <h3>4. ãƒ™ã‚¯ãƒˆãƒ«ã®æˆåˆ†åˆ†è§£</h3>
            
            <p>
                æ–œã‚ã®æ–¹å‘ã‚’æŒã¤ãƒ™ã‚¯ãƒˆãƒ«ã¯ã€ãã®ã¾ã¾ã§ã¯è¨ˆç®—ã—ã«ãã„ã§ã™ã€‚ãã“ã§ã€ãƒ™ã‚¯ãƒˆãƒ«ã‚’<strong>xæ–¹å‘ï¼ˆæ¨ªï¼‰</strong>ã¨<strong>yæ–¹å‘ï¼ˆç¸¦ï¼‰</strong>ã«åˆ†ã‘ã¦è€ƒãˆã¾ã™ã€‚ã“ã‚Œã‚’<strong>æˆåˆ†åˆ†è§£</strong>ã¨ã„ã„ã¾ã™ã€‚
            </p>
            
            <div class="figure-container">
                <canvas id="figure4" width="450" height="300"></canvas>
                <div class="figure-caption">å›³3ï¼šãƒ™ã‚¯ãƒˆãƒ«ã®æˆåˆ†åˆ†è§£</div>
            </div>
            
            <div class="point-box">
                <div class="point-box-title">ğŸ“Œ Pointï¼šä¸‰è§’æ¯”ã‚’ä½¿ã£ãŸæˆåˆ†åˆ†è§£</div>
                ãƒ™ã‚¯ãƒˆãƒ« $\vec{a}$ ã®å¤§ãã•ã‚’ $a$ã€xè»¸ã¨ãªã™è§’ã‚’ $\theta$ ã¨ã™ã‚‹ã¨ï¼š
                $$a_x = a\cos\theta \quad \text{ï¼ˆxæˆåˆ†ï¼‰}$$
                $$a_y = a\sin\theta \quad \text{ï¼ˆyæˆåˆ†ï¼‰}$$
                é€†ã«ã€æˆåˆ†ã‹ã‚‰å¤§ãã•ã¨è§’åº¦ã‚’æ±‚ã‚ã‚‹ã«ã¯ï¼š
                $$a = \sqrt{a_x^2 + a_y^2} \quad \text{ï¼ˆä¸‰å¹³æ–¹ã®å®šç†ï¼‰}$$
                $$\tan\theta = \frac{a_y}{a_x}$$
            </div>
            
            <h3>5. ãƒ™ã‚¯ãƒˆãƒ«ã®åˆæˆ</h3>
            
            <p>
                2ã¤ä»¥ä¸Šã®ãƒ™ã‚¯ãƒˆãƒ«ã‚’åˆã‚ã›ã¦1ã¤ã®ãƒ™ã‚¯ãƒˆãƒ«ã«ã™ã‚‹ã“ã¨ã‚’<strong>ãƒ™ã‚¯ãƒˆãƒ«ã®åˆæˆ</strong>ã¨ã„ã„ã¾ã™ã€‚
            </p>
            
            <h4>åŒã˜å‘ãã®å ´åˆï¼ˆç°¡å˜ï¼ï¼‰</h4>
            
            <div class="figure-container">
                <canvas id="figure5" width="500" height="150"></canvas>
                <div class="figure-caption">å›³4ï¼šåŒã˜å‘ãã®ãƒ™ã‚¯ãƒˆãƒ«ã®åˆæˆ</div>
            </div>
            
            <p>
                åŒã˜å‘ãã®ãƒ™ã‚¯ãƒˆãƒ«ã¯ã€å˜ç´”ã«å¤§ãã•ã‚’è¶³ã™ã ã‘ã§ã™ã€‚
                $$|\vec{a} + \vec{b}| = |\vec{a}| + |\vec{b}|$$
            </p>
            
            <h4>åå¯¾å‘ãã®å ´åˆ</h4>
            
            <div class="figure-container">
                <canvas id="figure6" width="500" height="150"></canvas>
                <div class="figure-caption">å›³5ï¼šåå¯¾å‘ãã®ãƒ™ã‚¯ãƒˆãƒ«ã®åˆæˆ</div>
            </div>
            
            <p>
                åå¯¾å‘ãã®ãƒ™ã‚¯ãƒˆãƒ«ã¯ã€å¤§ãã•ã‚’å¼•ãã¾ã™ã€‚åˆæˆãƒ™ã‚¯ãƒˆãƒ«ã®å‘ãã¯ã€å¤§ãã„æ–¹ã®ãƒ™ã‚¯ãƒˆãƒ«ã®å‘ãã«ãªã‚Šã¾ã™ã€‚
            </p>
            
            <h4>æ–œã‚ã®å ´åˆï¼ˆæˆåˆ†åˆ†è§£ãŒå¿…è¦ï¼ï¼‰</h4>
            
            <div class="warning-box">
                <strong>âš ï¸ å‘ããŒé•ã†ã¨è¤‡é›‘ã«ãªã‚‹ï¼</strong><br>
                å‘ããŒç•°ãªã‚‹ãƒ™ã‚¯ãƒˆãƒ«ã‚’åˆæˆã™ã‚‹å ´åˆã€å˜ç´”ãªè¶³ã—ç®—ãƒ»å¼•ãç®—ã¯ã§ãã¾ã›ã‚“ã€‚<br>
                ã“ã®ã¨ãã€<strong>æˆåˆ†ã«åˆ†è§£ã—ã¦ã‹ã‚‰ã€å„æˆåˆ†ã”ã¨ã«è¨ˆç®—</strong>ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
            </div>
            
            <div class="figure-container">
                <canvas id="figure7" width="450" height="300"></canvas>
                <div class="figure-caption">å›³6ï¼šæ–œã‚ã®ãƒ™ã‚¯ãƒˆãƒ«ã®åˆæˆï¼ˆæˆåˆ†åˆ†è§£ã«ã‚ˆã‚‹æ–¹æ³•ï¼‰</div>
            </div>
            
            <div class="point-box">
                <div class="point-box-title">ğŸ“Œ Pointï¼šæˆåˆ†ã‚’ä½¿ã£ãŸãƒ™ã‚¯ãƒˆãƒ«ã®åˆæˆ</div>
                $\vec{a} = (a_x, a_y)$ã€$\vec{b} = (b_x, b_y)$ ã®ã¨ãï¼š
                $$\vec{a} + \vec{b} = (a_x + b_x, a_y + b_y)$$
                åˆæˆãƒ™ã‚¯ãƒˆãƒ«ã®å¤§ãã•ï¼š
                $$|\vec{a} + \vec{b}| = \sqrt{(a_x + b_x)^2 + (a_y + b_y)^2}$$
            </div>
            
            <h3>6. æœ‰åè§’ã®ä¸‰è§’æ¯”ï¼ˆæš—è¨˜å¿…é ˆï¼ï¼‰</h3>
            
            <p>
                ç‰©ç†ã®è¨ˆç®—ã§ã¯ã€ä»¥ä¸‹ã®è§’åº¦ãŒã‚ˆãç™»å ´ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ä¸‰è§’æ¯”ã¯è¦šãˆã¦ãŠãã¾ã—ã‚‡ã†ã€‚
            </p>
            
            <table style="width:100%; border-collapse: collapse; margin: 20px 0;">
                <tr style="background: #667eea; color: white;">
                    <th style="padding: 10px; border: 1px solid #ddd;">è§’åº¦ $\theta$</th>
                    <th style="padding: 10px; border: 1px solid #ddd;">$\cos\theta$</th>
                    <th style="padding: 10px; border: 1px solid #ddd;">$\sin\theta$</th>
                </tr>
                <tr style="background: #f9f9f9;">
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">0Â°</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">1</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">0</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">30Â°</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">$\frac{\sqrt{3}}{2}$</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">$\frac{1}{2}$</td>
                </tr>
                <tr style="background: #f9f9f9;">
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">45Â°</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">$\frac{\sqrt{2}}{2}$</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">$\frac{\sqrt{2}}{2}$</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">60Â°</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">$\frac{1}{2}$</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">$\frac{\sqrt{3}}{2}$</td>
                </tr>
                <tr style="background: #f9f9f9;">
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">90Â°</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">0</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">1</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">120Â°</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">$-\frac{1}{2}$</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">$\frac{\sqrt{3}}{2}$</td>
                </tr>
                <tr style="background: #f9f9f9;">
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">135Â°</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">$-\frac{\sqrt{2}}{2}$</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">$\frac{\sqrt{2}}{2}$</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">180Â°</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">$-1$</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">0</td>
                </tr>
            </table>
            
            <div class="important-box">
                <strong>ğŸ¯ ã¾ã¨ã‚ï¼šé«˜æ ¡ç‰©ç†ã§æ‰±ã†æ•°å­¦ã®ãƒã‚¤ãƒ³ãƒˆ</strong><br>
                1. <strong>ã€Œã©ã“ã‹ã‚‰è¦‹ã‚‹ã‹ã€</strong>ã‚’å¸¸ã«æ„è­˜ã™ã‚‹<br>
                2. ãƒ™ã‚¯ãƒˆãƒ«é‡ã¯<strong>å‘ãã¨å¤§ãã•</strong>ã‚’æŒã¤<br>
                3. æ–œã‚ã®ãƒ™ã‚¯ãƒˆãƒ«ã¯<strong>æˆåˆ†åˆ†è§£</strong>ã—ã¦è€ƒãˆã‚‹<br>
                4. ãƒ™ã‚¯ãƒˆãƒ«ã®åˆæˆã¯<strong>æˆåˆ†ã”ã¨ã«è¨ˆç®—</strong>ã™ã‚‹
            </div>
            
            <h3>æˆæ¥­è³‡æ–™ï¼ˆPDFï¼‰</h3>
            <iframe src="https://drive.google.com/file/d/1rd3AUHNkj-NLM0IEztEdsiVOdPwxD6EA/preview" width="100%" height="500"></iframe>
        </div>
        
        <div id="problem" class="tab-content">
            <h2>ç¢ºèªå•é¡Œ</h2>
            
            <div class="problem">
                <h4>å•é¡Œ1ï¼šã‚¹ã‚«ãƒ©ãƒ¼é‡ã¨ãƒ™ã‚¯ãƒˆãƒ«é‡ã®åŒºåˆ¥</h4>
                <p>
                    æ¬¡ã®ç‰©ç†é‡ã‚’ã€ã‚¹ã‚«ãƒ©ãƒ¼é‡ã¨ãƒ™ã‚¯ãƒˆãƒ«é‡ã«åˆ†é¡ã›ã‚ˆã€‚<br>
                    ï¼ˆã‚¢ï¼‰è³ªé‡ã€€ï¼ˆã‚¤ï¼‰é€Ÿåº¦ã€€ï¼ˆã‚¦ï¼‰åŠ é€Ÿåº¦ã€€ï¼ˆã‚¨ï¼‰æ™‚é–“ã€€ï¼ˆã‚ªï¼‰åŠ›ã€€ï¼ˆã‚«ï¼‰ä»•äº‹ã€€ï¼ˆã‚­ï¼‰å¤‰ä½ã€€ï¼ˆã‚¯ï¼‰é€Ÿã•
                </p>
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p><strong>ã€è§£ç­”ã€‘</strong></p>
                    <p>
                        <strong>ã‚¹ã‚«ãƒ©ãƒ¼é‡ï¼š</strong>ï¼ˆã‚¢ï¼‰è³ªé‡ã€ï¼ˆã‚¨ï¼‰æ™‚é–“ã€ï¼ˆã‚«ï¼‰ä»•äº‹ã€ï¼ˆã‚¯ï¼‰é€Ÿã•<br>
                        <strong>ãƒ™ã‚¯ãƒˆãƒ«é‡ï¼š</strong>ï¼ˆã‚¤ï¼‰é€Ÿåº¦ã€ï¼ˆã‚¦ï¼‰åŠ é€Ÿåº¦ã€ï¼ˆã‚ªï¼‰åŠ›ã€ï¼ˆã‚­ï¼‰å¤‰ä½
                    </p>
                    <p><strong>ã€è§£èª¬ã€‘</strong></p>
                    <p>
                        ãƒ™ã‚¯ãƒˆãƒ«é‡ã¯ã€Œå‘ãã€ã®æƒ…å ±ãŒå¿…è¦ãªé‡ã§ã™ã€‚
                    </p>
                    <ul>
                        <li>é€Ÿåº¦ã¨é€Ÿã•ã®é•ã„ã«æ³¨æ„ï¼é€Ÿåº¦ã¯ã€Œæ±å‘ãã«5 m/sã€ã®ã‚ˆã†ã«å‘ãã‚’å«ã¿ã¾ã™ãŒã€é€Ÿã•ã¯ã€Œ5 m/sã€ã¨å¤§ãã•ã ã‘ã§ã™ã€‚</li>
                        <li>ä»•äº‹ã¯ $W = Fs\cos\theta$ ã§è¨ˆç®—ã•ã‚Œã‚‹ã‚¹ã‚«ãƒ©ãƒ¼é‡ã§ã™ã€‚</li>
                        <li>å¤‰ä½ã¯ã€Œç§»å‹•ã®çµæœã€ã‚’è¡¨ã™ãƒ™ã‚¯ãƒˆãƒ«ã§ã€çµŒè·¯ã«ã‚ˆã‚‰ãšå§‹ç‚¹ã‹ã‚‰çµ‚ç‚¹ã¸ã®çŸ¢å°ã§è¡¨ã•ã‚Œã¾ã™ã€‚</li>
                    </ul>
                </details>
            </div>
            
            <div class="problem">
                <h4>å•é¡Œ2ï¼šãƒ™ã‚¯ãƒˆãƒ«ã®æˆåˆ†åˆ†è§£</h4>
                <p>
                    å¤§ãã• 10 m/s ã®é€Ÿåº¦ãƒ™ã‚¯ãƒˆãƒ« $\vec{v}$ ãŒã€æ°´å¹³æ–¹å‘ã¨ 60Â° ã®è§’åº¦ã‚’ãªã—ã¦ã„ã‚‹ã€‚
                    ã“ã®ãƒ™ã‚¯ãƒˆãƒ«ã®æ°´å¹³æˆåˆ† $v_x$ ã¨é‰›ç›´æˆåˆ† $v_y$ ã‚’æ±‚ã‚ã‚ˆã€‚
                </p>
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p><strong>ã€è§£ç­”ã€‘</strong></p>
                    <p>
                        $v_x = 5.0$ m/s<br>
                        $v_y = 5\sqrt{3} \approx 8.7$ m/s
                    </p>
                    <p><strong>ã€è§£èª¬ã€‘</strong></p>
                    <p>
                        ãƒ™ã‚¯ãƒˆãƒ«ã®æˆåˆ†ã¯ä¸‰è§’æ¯”ã‚’ç”¨ã„ã¦æ±‚ã‚ã¾ã™ã€‚
                    </p>
                    <p>
                        $$v_x = v\cos 60Â° = 10 \times \frac{1}{2} = 5.0 \text{ m/s}$$
                        $$v_y = v\sin 60Â° = 10 \times \frac{\sqrt{3}}{2} = 5\sqrt{3} \approx 8.7 \text{ m/s}$$
                    </p>
                    <p>
                        ç¢ºèªï¼š$\sqrt{v_x^2 + v_y^2} = \sqrt{25 + 75} = \sqrt{100} = 10$ m/s âœ“
                    </p>
                </details>
            </div>
            
            <div class="problem">
                <h4>å•é¡Œ3ï¼šå¤‰ä½ãƒ™ã‚¯ãƒˆãƒ«ã®è¨ˆç®—</h4>
                <p>
                    xyå¹³é¢ä¸Šã§ã€ç‰©ä½“ãŒç‚¹A(2.0, 3.0)ã‹ã‚‰ç‚¹B(5.0, 7.0)ã¾ã§ç§»å‹•ã—ãŸã€‚
                </p>
                <p>
                    (1) ã“ã®ç§»å‹•ã®å¤‰ä½ãƒ™ã‚¯ãƒˆãƒ« $\Delta\vec{r}$ ã‚’æˆåˆ†ã§è¡¨ã›ã€‚<br>
                    (2) å¤‰ä½ã®å¤§ãã• $|\Delta\vec{r}|$ ã‚’æ±‚ã‚ã‚ˆã€‚
                </p>
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p><strong>ã€è§£ç­”ã€‘</strong></p>
                    <p>
                        (1) $\Delta\vec{r} = (3.0, 4.0)$<br>
                        (2) $|\Delta\vec{r}| = 5.0$
                    </p>
                    <p><strong>ã€è§£èª¬ã€‘</strong></p>
                    <p>
                        (1) å¤‰ä½ãƒ™ã‚¯ãƒˆãƒ«ã¯ã€Œçµ‚ç‚¹ã®ä½ç½®ãƒ™ã‚¯ãƒˆãƒ« âˆ’ å§‹ç‚¹ã®ä½ç½®ãƒ™ã‚¯ãƒˆãƒ«ã€ã§æ±‚ã‚ã¾ã™ã€‚
                        $$\Delta\vec{r} = \vec{r}_B - \vec{r}_A = (5.0 - 2.0, 7.0 - 3.0) = (3.0, 4.0)$$
                    </p>
                    <p>
                        (2) å¤§ãã•ã¯ä¸‰å¹³æ–¹ã®å®šç†ã‚ˆã‚Šï¼š
                        $$|\Delta\vec{r}| = \sqrt{3.0^2 + 4.0^2} = \sqrt{9 + 16} = \sqrt{25} = 5.0$$
                    </p>
                    <p>
                        â€» ã“ã‚Œã¯ã€Œ3:4:5ã€ã®ç›´è§’ä¸‰è§’å½¢ã®æ¯”ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚
                    </p>
                </details>
            </div>
        </div>
        
        <div id="simulation" class="tab-content">
            <h2>ãƒ™ã‚¯ãƒˆãƒ«ã®æˆåˆ†åˆ†è§£ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>
            <p>å§‹ç‚¹ã¨çµ‚ç‚¹ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦ã€ãƒ™ã‚¯ãƒˆãƒ«ã‚’è‡ªç”±ã«å‹•ã‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
            
            <div class="drag-hint">
                ğŸ’¡ <strong>æ“ä½œæ–¹æ³•ï¼š</strong>èµ¤ã„ç‚¹ï¼ˆå§‹ç‚¹ï¼‰ã¨é’ã„ç‚¹ï¼ˆçµ‚ç‚¹ï¼‰ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦å‹•ã‹ã›ã¾ã™ã€‚
            </div>
            
            <div id="sim-container">
                <canvas id="physicsCanvas"></canvas>
            </div>
            
            <div class="sim-controls">
                <div class="info-display">
                    <div class="info-item">
                        <div class="info-label">ãƒ™ã‚¯ãƒˆãƒ«ã®å¤§ãã• |r|</div>
                        <div class="info-value" id="magnitudeDisplay">1.00</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">è§’åº¦ Î¸</div>
                        <div class="info-value" id="angleDisplay">0Â°</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">xæˆåˆ†</div>
                        <div class="info-value" id="xDisplay">1.00</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">yæˆåˆ†</div>
                        <div class="info-value" id="yDisplay">0.00</div>
                    </div>
                </div>
                
                <div class="button-group">
                    <button class="sim-button reset" id="resetBtn">ãƒªã‚»ãƒƒãƒˆ</button>
                </div>
                
                <div style="margin-top: 15px;">
                    <label style="font-weight: bold; display: block; margin-bottom: 10px;">æœ‰åè§’ã‚’è¡¨ç¤ºï¼š</label>
                    <div class="angle-buttons">
                        <button class="angle-btn" data-angle="0">0Â°</button>
                        <button class="angle-btn" data-angle="30">30Â°</button>
                        <button class="angle-btn" data-angle="45">45Â°</button>
                        <button class="angle-btn" data-angle="60">60Â°</button>
                        <button class="angle-btn" data-angle="90">90Â°</button>
                        <button class="angle-btn" data-angle="120">120Â°</button>
                        <button class="angle-btn" data-angle="135">135Â°</button>
                    </div>
                </div>
            </div>
            
            <div class="graph-container">
                <h3>æˆåˆ†ã®æ¯”è¼ƒï¼ˆæ£’ã‚°ãƒ©ãƒ•ï¼‰</h3>
                <canvas id="graphCanvas"></canvas>
            </div>
        </div>
    </div>
    
    <script>
    // --- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ ---
    function openTab(tabName) {
        var contents = document.getElementsByClassName("tab-content");
        for (var i = 0; i < contents.length; i++) {
            contents[i].style.display = "none";
            contents[i].classList.remove("active");
        }
        var buttons = document.getElementsByClassName("tab-btn");
        for (var i = 0; i < buttons.length; i++) {
            buttons[i].classList.remove("active");
        }
        document.getElementById(tabName).style.display = "block";
        document.getElementById(tabName).classList.add("active");
        if (event) {
            event.currentTarget.classList.add("active");
        }
        
        // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ–ã‚’é–‹ã„ãŸã¨ãã«Canvasã‚’å†æç”»
        if (tabName === 'simulation') {
            resizeCanvas();
            draw();
        }
    }

    // --- è§£èª¬ç”¨ã®å›³ã‚’æç”» ---
    function drawFigures() {
        // å›³1ï¼šç‚¹Oã‹ã‚‰è¦‹ãŸç‚¹Aã®ä½ç½®
        const fig1 = document.getElementById('figure1');
        if (fig1) {
            const ctx1 = fig1.getContext('2d');
            ctx1.clearRect(0, 0, fig1.width, fig1.height);
            
            const originX = 50;
            const originY = 200;
            
            // åº§æ¨™è»¸ï¼ˆçŸ¢å°ä»˜ãï¼‰
            ctx1.strokeStyle = '#333';
            ctx1.lineWidth = 2;
            
            // xè»¸
            ctx1.beginPath();
            ctx1.moveTo(originX, originY);
            ctx1.lineTo(350, originY);
            ctx1.stroke();
            drawArrowHead(ctx1, 350, originY, 0, '#333');
            
            // yè»¸
            ctx1.beginPath();
            ctx1.moveTo(originX, originY);
            ctx1.lineTo(originX, 30);
            ctx1.stroke();
            drawArrowHead(ctx1, originX, 30, -Math.PI/2, '#333');
            
            // è»¸ãƒ©ãƒ™ãƒ«
            ctx1.fillStyle = '#333';
            ctx1.font = '14px Arial';
            ctx1.fillText('x (æ°´å¹³)', 320, originY + 25);
            ctx1.fillText('y (é‰›ç›´)', originX + 10, 45);
            ctx1.fillText('O', originX - 15, originY + 20);
            
            // ç‚¹Aã¸ã®ãƒ™ã‚¯ãƒˆãƒ«
            const endX = 250;
            const endY = 80;
            ctx1.strokeStyle = '#667eea';
            ctx1.lineWidth = 3;
            ctx1.beginPath();
            ctx1.moveTo(originX, originY);
            ctx1.lineTo(endX, endY);
            ctx1.stroke();
            drawArrowHead(ctx1, endX, endY, Math.atan2(endY - originY, endX - originX), '#667eea');
            
            // ç‚¹A
            ctx1.beginPath();
            ctx1.arc(endX, endY, 6, 0, Math.PI * 2);
            ctx1.fillStyle = '#667eea';
            ctx1.fill();
            ctx1.fillStyle = '#333';
            ctx1.fillText('A', endX + 10, endY - 5);
            
            // ç‚¹Oï¼ˆç·‘ã®ç‚¹ - åŸç‚¹ã«ãƒ”ãƒƒã‚¿ãƒªï¼‰
            ctx1.beginPath();
            ctx1.arc(originX, originY, 8, 0, Math.PI * 2);
            ctx1.fillStyle = '#4CAF50';
            ctx1.fill();
            
            // è·é›¢ã®è¡¨ç¤º
            ctx1.fillStyle = '#667eea';
            ctx1.font = 'bold 14px Arial';
            ctx1.fillText('50m', 130, 110);
        }
        
        // å›³2ï¼šãƒ™ã‚¯ãƒˆãƒ«ã®è¡¨ã—æ–¹
        const fig2 = document.getElementById('figure2');
        if (fig2) {
            const ctx2 = fig2.getContext('2d');
            ctx2.clearRect(0, 0, fig2.width, fig2.height);
            
            // ãƒ™ã‚¯ãƒˆãƒ«a
            ctx2.strokeStyle = '#e74c3c';
            ctx2.lineWidth = 3;
            ctx2.beginPath();
            ctx2.moveTo(50, 150);
            ctx2.lineTo(200, 50);
            ctx2.stroke();
            drawArrowHead(ctx2, 200, 50, Math.atan2(50-150, 200-50), '#e74c3c');
            
            // ãƒ™ã‚¯ãƒˆãƒ«ã®ãƒ©ãƒ™ãƒ«ï¼ˆMathJaxã§è¡¨ç¤ºã™ã‚‹ãŸã‚ã€ã‚·ãƒ³ãƒ—ãƒ«ã«ï¼‰
            ctx2.fillStyle = '#e74c3c';
            ctx2.font = 'bold 18px Arial';
            ctx2.fillText('a', 115, 75);
            // çŸ¢å°ã‚’ä¸Šã«æç”»
            ctx2.strokeStyle = '#e74c3c';
            ctx2.lineWidth = 2;
            ctx2.beginPath();
            ctx2.moveTo(110, 60);
            ctx2.lineTo(125, 60);
            ctx2.stroke();
            drawArrowHead(ctx2, 125, 60, 0, '#e74c3c');
            
            // ãƒ™ã‚¯ãƒˆãƒ«ã®èª¬æ˜
            ctx2.fillStyle = '#333';
            ctx2.font = '14px Arial';
            ctx2.fillText('å‘ãï¼šçŸ¢å°ã®æ–¹å‘', 230, 80);
            ctx2.fillText('å¤§ãã•ï¼šçŸ¢å°ã®é•·ã•', 230, 110);
            
            // å¤§ãã•ã®è¨˜å·
            ctx2.fillText('| a | ã¾ãŸã¯ a', 230, 150);
            // çŸ¢å°ã‚’æç”»
            ctx2.strokeStyle = '#333';
            ctx2.lineWidth = 1.5;
            ctx2.beginPath();
            ctx2.moveTo(237, 138);
            ctx2.lineTo(250, 138);
            ctx2.stroke();
            drawArrowHead(ctx2, 250, 138, 0, '#333');
        }
        
        // å›³4ï¼šãƒ™ã‚¯ãƒˆãƒ«ã®æˆåˆ†åˆ†è§£
        const fig4 = document.getElementById('figure4');
        if (fig4) {
            const ctx4 = fig4.getContext('2d');
            ctx4.clearRect(0, 0, fig4.width, fig4.height);
            
            const originX = 50;
            const originY = 250;
            
            // åº§æ¨™è»¸ï¼ˆçŸ¢å°ä»˜ãï¼‰
            ctx4.strokeStyle = '#333';
            ctx4.lineWidth = 2;
            
            // xè»¸
            ctx4.beginPath();
            ctx4.moveTo(originX, originY);
            ctx4.lineTo(400, originY);
            ctx4.stroke();
            drawArrowHead(ctx4, 400, originY, 0, '#333');
            
            // yè»¸
            ctx4.beginPath();
            ctx4.moveTo(originX, originY);
            ctx4.lineTo(originX, 30);
            ctx4.stroke();
            drawArrowHead(ctx4, originX, 30, -Math.PI/2, '#333');
            
            ctx4.fillStyle = '#333';
            ctx4.font = '14px Arial';
            ctx4.fillText('O', originX - 20, originY + 20);
            ctx4.fillText('x', 390, originY + 25);
            ctx4.fillText('y', originX + 10, 45);
            
            // ãƒ™ã‚¯ãƒˆãƒ«a
            const endX = 300, endY = 100;
            ctx4.strokeStyle = '#667eea';
            ctx4.lineWidth = 3;
            ctx4.beginPath();
            ctx4.moveTo(originX, originY);
            ctx4.lineTo(endX, endY);
            ctx4.stroke();
            drawArrowHead(ctx4, endX, endY, Math.atan2(endY - originY, endX - originX), '#667eea');
            
            // ãƒ™ã‚¯ãƒˆãƒ«ãƒ©ãƒ™ãƒ«
            ctx4.fillStyle = '#667eea';
            ctx4.font = 'bold 16px Arial';
            ctx4.fillText('a', 165, 145);
            ctx4.strokeStyle = '#667eea';
            ctx4.lineWidth = 1.5;
            ctx4.beginPath();
            ctx4.moveTo(160, 132);
            ctx4.lineTo(175, 132);
            ctx4.stroke();
            drawArrowHead(ctx4, 175, 132, 0, '#667eea');
            
            // xæˆåˆ†
            ctx4.strokeStyle = '#e74c3c';
            ctx4.lineWidth = 2;
            ctx4.beginPath();
            ctx4.moveTo(originX, originY);
            ctx4.lineTo(endX, originY);
            ctx4.stroke();
            drawArrowHead(ctx4, endX, originY, 0, '#e74c3c');
            ctx4.fillStyle = '#e74c3c';
            ctx4.font = '14px Arial';
            ctx4.fillText('aâ‚“ = a cos Î¸', 140, originY + 25);
            
            // yæˆåˆ†
            ctx4.strokeStyle = '#2ecc71';
            ctx4.lineWidth = 2;
            ctx4.beginPath();
            ctx4.moveTo(endX, originY);
            ctx4.lineTo(endX, endY);
            ctx4.stroke();
            drawArrowHead(ctx4, endX, endY, -Math.PI/2, '#2ecc71');
            ctx4.fillStyle = '#2ecc71';
            ctx4.fillText('aáµ§ = a sin Î¸', endX + 15, 180);
            
            // è§’åº¦Î¸
            ctx4.beginPath();
            ctx4.arc(originX, originY, 40, -Math.atan2(originY - endY, endX - originX), 0);
            ctx4.strokeStyle = '#9b59b6';
            ctx4.lineWidth = 2;
            ctx4.stroke();
            ctx4.fillStyle = '#9b59b6';
            ctx4.font = '16px Arial';
            ctx4.fillText('Î¸', originX + 50, originY - 15);
        }
        
        // å›³5ï¼šåŒã˜å‘ãã®ãƒ™ã‚¯ãƒˆãƒ«ã®åˆæˆ
        const fig5 = document.getElementById('figure5');
        if (fig5) {
            const ctx5 = fig5.getContext('2d');
            ctx5.clearRect(0, 0, fig5.width, fig5.height);
            
            // ãƒ™ã‚¯ãƒˆãƒ«a
            ctx5.strokeStyle = '#3498db';
            ctx5.lineWidth = 3;
            ctx5.beginPath();
            ctx5.moveTo(50, 60);
            ctx5.lineTo(150, 60);
            ctx5.stroke();
            drawArrowHead(ctx5, 150, 60, 0, '#3498db');
            ctx5.fillStyle = '#3498db';
            ctx5.font = '14px Arial';
            ctx5.fillText('a', 95, 50);
            ctx5.strokeStyle = '#3498db';
            ctx5.lineWidth = 1.5;
            ctx5.beginPath();
            ctx5.moveTo(90, 38);
            ctx5.lineTo(102, 38);
            ctx5.stroke();
            drawArrowHead(ctx5, 102, 38, 0, '#3498db');
            
            // ãƒ™ã‚¯ãƒˆãƒ«b
            ctx5.strokeStyle = '#e74c3c';
            ctx5.lineWidth = 3;
            ctx5.beginPath();
            ctx5.moveTo(150, 60);
            ctx5.lineTo(280, 60);
            ctx5.stroke();
            drawArrowHead(ctx5, 280, 60, 0, '#e74c3c');
            ctx5.fillStyle = '#e74c3c';
            ctx5.font = '14px Arial';
            ctx5.fillText('b', 210, 50);
            ctx5.strokeStyle = '#e74c3c';
            ctx5.lineWidth = 1.5;
            ctx5.beginPath();
            ctx5.moveTo(205, 38);
            ctx5.lineTo(217, 38);
            ctx5.stroke();
            drawArrowHead(ctx5, 217, 38, 0, '#e74c3c');
            
            // åˆæˆãƒ™ã‚¯ãƒˆãƒ«
            ctx5.strokeStyle = '#667eea';
            ctx5.lineWidth = 3;
            ctx5.beginPath();
            ctx5.moveTo(50, 110);
            ctx5.lineTo(280, 110);
            ctx5.stroke();
            drawArrowHead(ctx5, 280, 110, 0, '#667eea');
            ctx5.fillStyle = '#667eea';
            ctx5.font = 'bold 14px Arial';
            ctx5.fillText('a + b', 150, 135);
            ctx5.strokeStyle = '#667eea';
            ctx5.lineWidth = 1.5;
            ctx5.beginPath();
            ctx5.moveTo(145, 123);
            ctx5.lineTo(157, 123);
            ctx5.stroke();
            drawArrowHead(ctx5, 157, 123, 0, '#667eea');
            ctx5.beginPath();
            ctx5.moveTo(165, 123);
            ctx5.lineTo(177, 123);
            ctx5.stroke();
            drawArrowHead(ctx5, 177, 123, 0, '#667eea');
            
            // èª¬æ˜
            ctx5.fillStyle = '#333';
            ctx5.font = '14px Arial';
            ctx5.fillText('åŒã˜å‘ã â†’ å¤§ãã•ã‚’è¶³ã™ã ã‘ï¼', 320, 85);
        }
        
        // å›³6ï¼šåå¯¾å‘ãã®ãƒ™ã‚¯ãƒˆãƒ«ã®åˆæˆ
        const fig6 = document.getElementById('figure6');
        if (fig6) {
            const ctx6 = fig6.getContext('2d');
            ctx6.clearRect(0, 0, fig6.width, fig6.height);
            
            // ãƒ™ã‚¯ãƒˆãƒ«a
            ctx6.strokeStyle = '#3498db';
            ctx6.lineWidth = 3;
            ctx6.beginPath();
            ctx6.moveTo(50, 60);
            ctx6.lineTo(200, 60);
            ctx6.stroke();
            drawArrowHead(ctx6, 200, 60, 0, '#3498db');
            ctx6.fillStyle = '#3498db';
            ctx6.font = '14px Arial';
            ctx6.fillText('a', 115, 50);
            ctx6.strokeStyle = '#3498db';
            ctx6.lineWidth = 1.5;
            ctx6.beginPath();
            ctx6.moveTo(110, 38);
            ctx6.lineTo(122, 38);
            ctx6.stroke();
            drawArrowHead(ctx6, 122, 38, 0, '#3498db');
            
            // ãƒ™ã‚¯ãƒˆãƒ«bï¼ˆåå¯¾å‘ãï¼‰
            ctx6.strokeStyle = '#e74c3c';
            ctx6.lineWidth = 3;
            ctx6.beginPath();
            ctx6.moveTo(200, 60);
            ctx6.lineTo(120, 60);
            ctx6.stroke();
            drawArrowHead(ctx6, 120, 60, Math.PI, '#e74c3c');
            ctx6.fillStyle = '#e74c3c';
            ctx6.font = '14px Arial';
            ctx6.fillText('b', 155, 85);
            ctx6.strokeStyle = '#e74c3c';
            ctx6.lineWidth = 1.5;
            ctx6.beginPath();
            ctx6.moveTo(150, 73);
            ctx6.lineTo(162, 73);
            ctx6.stroke();
            drawArrowHead(ctx6, 162, 73, 0, '#e74c3c');
            
            // åˆæˆãƒ™ã‚¯ãƒˆãƒ«
            ctx6.strokeStyle = '#667eea';
            ctx6.lineWidth = 3;
            ctx6.beginPath();
            ctx6.moveTo(50, 110);
            ctx6.lineTo(120, 110);
            ctx6.stroke();
            drawArrowHead(ctx6, 120, 110, 0, '#667eea');
            ctx6.fillStyle = '#667eea';
            ctx6.font = 'bold 14px Arial';
            ctx6.fillText('a + b', 60, 135);
            ctx6.strokeStyle = '#667eea';
            ctx6.lineWidth = 1.5;
            ctx6.beginPath();
            ctx6.moveTo(55, 123);
            ctx6.lineTo(67, 123);
            ctx6.stroke();
            drawArrowHead(ctx6, 67, 123, 0, '#667eea');
            ctx6.beginPath();
            ctx6.moveTo(75, 123);
            ctx6.lineTo(87, 123);
            ctx6.stroke();
            drawArrowHead(ctx6, 87, 123, 0, '#667eea');
            
            // èª¬æ˜
            ctx6.fillStyle = '#333';
            ctx6.font = '14px Arial';
            ctx6.fillText('åå¯¾å‘ã â†’ å¤§ãã•ã‚’å¼•ã', 320, 85);
        }
        
        // å›³7ï¼šæ–œã‚ã®ãƒ™ã‚¯ãƒˆãƒ«ã®åˆæˆ
        const fig7 = document.getElementById('figure7');
        if (fig7) {
            const ctx7 = fig7.getContext('2d');
            ctx7.clearRect(0, 0, fig7.width, fig7.height);
            
            const originX = 50;
            const originY = 250;
            
            // åº§æ¨™è»¸ï¼ˆçŸ¢å°ä»˜ãï¼‰
            ctx7.strokeStyle = '#ccc';
            ctx7.lineWidth = 1;
            
            // xè»¸
            ctx7.beginPath();
            ctx7.moveTo(originX, originY);
            ctx7.lineTo(400, originY);
            ctx7.stroke();
            drawArrowHead(ctx7, 400, originY, 0, '#ccc');
            
            // yè»¸
            ctx7.beginPath();
            ctx7.moveTo(originX, originY);
            ctx7.lineTo(originX, 30);
            ctx7.stroke();
            drawArrowHead(ctx7, originX, 30, -Math.PI/2, '#ccc');
            
            ctx7.fillStyle = '#333';
            ctx7.font = '14px Arial';
            ctx7.fillText('O', originX - 20, originY + 20);
            
            // ãƒ™ã‚¯ãƒˆãƒ«a
            ctx7.strokeStyle = '#3498db';
            ctx7.lineWidth = 2;
            ctx7.beginPath();
            ctx7.moveTo(originX, originY);
            ctx7.lineTo(180, 150);
            ctx7.stroke();
            drawArrowHead(ctx7, 180, 150, Math.atan2(150 - originY, 180 - originX), '#3498db');
            ctx7.fillStyle = '#3498db';
            ctx7.fillText('a', 95, 180);
            ctx7.strokeStyle = '#3498db';
            ctx7.lineWidth = 1.5;
            ctx7.beginPath();
            ctx7.moveTo(90, 168);
            ctx7.lineTo(102, 168);
            ctx7.stroke();
            drawArrowHead(ctx7, 102, 168, 0, '#3498db');
            
            // ãƒ™ã‚¯ãƒˆãƒ«bï¼ˆaã®å…ˆç«¯ã‹ã‚‰ï¼‰
            ctx7.strokeStyle = '#e74c3c';
            ctx7.lineWidth = 2;
            ctx7.beginPath();
            ctx7.moveTo(180, 150);
            ctx7.lineTo(320, 100);
            ctx7.stroke();
            drawArrowHead(ctx7, 320, 100, Math.atan2(100 - 150, 320 - 180), '#e74c3c');
            ctx7.fillStyle = '#e74c3c';
            ctx7.fillText('b', 255, 105);
            ctx7.strokeStyle = '#e74c3c';
            ctx7.lineWidth = 1.5;
            ctx7.beginPath();
            ctx7.moveTo(250, 93);
            ctx7.lineTo(262, 93);
            ctx7.stroke();
            drawArrowHead(ctx7, 262, 93, 0, '#e74c3c');
            
            // åˆæˆãƒ™ã‚¯ãƒˆãƒ«
            ctx7.strokeStyle = '#667eea';
            ctx7.lineWidth = 3;
            ctx7.beginPath();
            ctx7.moveTo(originX, originY);
            ctx7.lineTo(320, 100);
            ctx7.stroke();
            drawArrowHead(ctx7, 320, 100, Math.atan2(100 - originY, 320 - originX), '#667eea');
            ctx7.fillStyle = '#667eea';
            ctx7.font = 'bold 14px Arial';
            ctx7.fillText('a + b', 160, 200);
            ctx7.strokeStyle = '#667eea';
            ctx7.lineWidth = 1.5;
            ctx7.beginPath();
            ctx7.moveTo(155, 188);
            ctx7.lineTo(167, 188);
            ctx7.stroke();
            drawArrowHead(ctx7, 167, 188, 0, '#667eea');
            ctx7.beginPath();
            ctx7.moveTo(175, 188);
            ctx7.lineTo(187, 188);
            ctx7.stroke();
            drawArrowHead(ctx7, 187, 188, 0, '#667eea');
            
            // æˆåˆ†ã®ç‚¹ç·š
            ctx7.setLineDash([5, 5]);
            ctx7.strokeStyle = '#999';
            ctx7.lineWidth = 1;
            ctx7.beginPath();
            ctx7.moveTo(320, originY);
            ctx7.lineTo(320, 100);
            ctx7.stroke();
            ctx7.beginPath();
            ctx7.moveTo(originX, originY);
            ctx7.lineTo(320, originY);
            ctx7.stroke();
            ctx7.setLineDash([]);
        }
    }
    
    // çŸ¢å°ã®å…ˆç«¯ã‚’æç”»ã™ã‚‹é–¢æ•°
    function drawArrowHead(ctx, x, y, angle, color) {
        const headLen = 10;
        ctx.fillStyle = color;
        ctx.beginPath();
        ctx.moveTo(x, y);
        ctx.lineTo(x - headLen * Math.cos(angle - Math.PI / 6), y - headLen * Math.sin(angle - Math.PI / 6));
        ctx.lineTo(x - headLen * Math.cos(angle + Math.PI / 6), y - headLen * Math.sin(angle + Math.PI / 6));
        ctx.closePath();
        ctx.fill();
    }
    
    // çŸ¢å°ã‚’æç”»ã™ã‚‹é–¢æ•°ï¼ˆç·š + çŸ¢å°ã®å…ˆç«¯ï¼‰
    function drawArrow(ctx, fromX, fromY, toX, toY, color) {
        const angle = Math.atan2(toY - fromY, toX - fromX);
        
        ctx.strokeStyle = color;
        ctx.fillStyle = color;
        
        ctx.beginPath();
        ctx.moveTo(fromX, fromY);
        ctx.lineTo(toX, toY);
        ctx.stroke();
        
        drawArrowHead(ctx, toX, toY, angle, color);
    }

    // --- ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ ---
    const canvas = document.getElementById('physicsCanvas');
    const ctx = canvas.getContext('2d');
    const graphCanvas = document.getElementById('graphCanvas');
    const graphCtx = graphCanvas.getContext('2d');
    
    // å˜ä½é•·ã•ï¼ˆãƒ”ã‚¯ã‚»ãƒ«/1å˜ä½ï¼‰
    let unitLength = 80;
    
    // ãƒ™ã‚¯ãƒˆãƒ«ã®å§‹ç‚¹ã¨çµ‚ç‚¹ï¼ˆå˜ä½åº§æ¨™ç³»ï¼‰
    let startPoint = { x: 0, y: 0 };
    let endPoint = { x: 1, y: 0 };
    
    // ãƒ‰ãƒ©ãƒƒã‚°çŠ¶æ…‹
    let dragging = null; // 'start', 'end', or null
    let canvasOffset = { x: 0, y: 0 };
    
    // Canvasåº§æ¨™ç³»ã®åŸç‚¹ï¼ˆãƒ”ã‚¯ã‚»ãƒ«åº§æ¨™ï¼‰
    let originX, originY;
    
    // Canvasã®ãƒªã‚µã‚¤ã‚º
    function resizeCanvas() {
        const container = canvas.parentElement;
        canvas.width = container.clientWidth;
        canvas.height = 400;
        
        graphCanvas.width = graphCanvas.parentElement.clientWidth - 30;
        graphCanvas.height = 200;
        
        // åŸç‚¹ã‚’ä¸­å¤®ã‚„ã‚„å·¦ä¸‹ã«è¨­å®š
        originX = canvas.width / 2;
        originY = canvas.height / 2;
        
        // å˜ä½é•·ã•ã‚’èª¿æ•´
        unitLength = Math.min(canvas.width, canvas.height) / 6;
    }
    
    // å˜ä½åº§æ¨™ã‹ã‚‰ãƒ”ã‚¯ã‚»ãƒ«åº§æ¨™ã¸ã®å¤‰æ›
    function toPixel(unitX, unitY) {
        return {
            x: originX + unitX * unitLength,
            y: originY - unitY * unitLength  // yè»¸ã¯ä¸ŠãŒæ­£
        };
    }
    
    // ãƒ”ã‚¯ã‚»ãƒ«åº§æ¨™ã‹ã‚‰å˜ä½åº§æ¨™ã¸ã®å¤‰æ›
    function toUnit(pixelX, pixelY) {
        return {
            x: (pixelX - originX) / unitLength,
            y: -(pixelY - originY) / unitLength
        };
    }
    
    // æç”»
    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // ã‚°ãƒªãƒƒãƒ‰ã‚’æç”»
        drawGrid();
        
        // åº§æ¨™è»¸ã‚’æç”»
        drawAxes();
        
        // ãƒ™ã‚¯ãƒˆãƒ«ã®è¨ˆç®—
        const dx = endPoint.x - startPoint.x;
        const dy = endPoint.y - startPoint.y;
        const magnitude = Math.sqrt(dx * dx + dy * dy);
        let angle = Math.atan2(dy, dx) * 180 / Math.PI;
        if (angle < 0) angle += 360;
        
        // æˆåˆ†ã®è¡¨ç¤ºï¼ˆç‚¹ç·šï¼‰
        drawComponents();
        
        // ãƒ¡ã‚¤ãƒ³ãƒ™ã‚¯ãƒˆãƒ«ã‚’æç”»
        const startPx = toPixel(startPoint.x, startPoint.y);
        const endPx = toPixel(endPoint.x, endPoint.y);
        
        ctx.lineWidth = 3;
        drawArrow(ctx, startPx.x, startPx.y, endPx.x, endPx.y, '#667eea');
        
        // å§‹ç‚¹ã‚’æç”»ï¼ˆãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½ï¼‰
        ctx.beginPath();
        ctx.arc(startPx.x, startPx.y, 10, 0, Math.PI * 2);
        ctx.fillStyle = '#e74c3c';
        ctx.fill();
        ctx.strokeStyle = '#c0392b';
        ctx.lineWidth = 2;
        ctx.stroke();
        
        // çµ‚ç‚¹ã‚’æç”»ï¼ˆãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½ï¼‰
        ctx.beginPath();
        ctx.arc(endPx.x, endPx.y, 10, 0, Math.PI * 2);
        ctx.fillStyle = '#3498db';
        ctx.fill();
        ctx.strokeStyle = '#2980b9';
        ctx.lineWidth = 2;
        ctx.stroke();
        
        // è§’åº¦ã®å¼§ã‚’æç”»
        if (magnitude > 0.1) {
            const arcRadius = 30;
            const startAngle = 0;
            const endAngle = -Math.atan2(dy, dx);
            
            ctx.beginPath();
            ctx.arc(startPx.x, startPx.y, arcRadius, startAngle, endAngle, dy > 0);
            ctx.strokeStyle = '#9b59b6';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // Î¸ã®è¡¨ç¤º
            const labelAngle = (Math.atan2(dy, dx)) / 2;
            ctx.fillStyle = '#9b59b6';
            ctx.font = 'bold 16px Arial';
            ctx.fillText('Î¸', startPx.x + 40 * Math.cos(labelAngle), startPx.y - 40 * Math.sin(labelAngle));
        }
        
        // æƒ…å ±è¡¨ç¤ºã‚’æ›´æ–°
        document.getElementById('magnitudeDisplay').textContent = magnitude.toFixed(2);
        document.getElementById('angleDisplay').textContent = angle.toFixed(1) + 'Â°';
        document.getElementById('xDisplay').textContent = dx.toFixed(2);
        document.getElementById('yDisplay').textContent = dy.toFixed(2);
        
        // ã‚°ãƒ©ãƒ•ã‚’æç”»
        drawGraph(dx, dy, magnitude);
    }
    
    // ã‚°ãƒªãƒƒãƒ‰ã‚’æç”»
    function drawGrid() {
        ctx.strokeStyle = '#eee';
        ctx.lineWidth = 1;
        
        // ç¸¦ç·š
        for (let i = -10; i <= 10; i++) {
            const px = toPixel(i, 0);
            ctx.beginPath();
            ctx.moveTo(px.x, 0);
            ctx.lineTo(px.x, canvas.height);
            ctx.stroke();
        }
        
        // æ¨ªç·š
        for (let i = -10; i <= 10; i++) {
            const px = toPixel(0, i);
            ctx.beginPath();
            ctx.moveTo(0, px.y);
            ctx.lineTo(canvas.width, px.y);
            ctx.stroke();
        }
    }
    
    // åº§æ¨™è»¸ã‚’æç”»ï¼ˆçŸ¢å°ä»˜ãï¼‰
    function drawAxes() {
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        
        // xè»¸
        ctx.beginPath();
        ctx.moveTo(0, originY);
        ctx.lineTo(canvas.width - 20, originY);
        ctx.stroke();
        drawArrowHead(ctx, canvas.width - 20, originY, 0, '#333');
        
        // yè»¸
        ctx.beginPath();
        ctx.moveTo(originX, canvas.height);
        ctx.lineTo(originX, 20);
        ctx.stroke();
        drawArrowHead(ctx, originX, 20, -Math.PI/2, '#333');
        
        // è»¸ãƒ©ãƒ™ãƒ«
        ctx.fillStyle = '#333';
        ctx.font = 'bold 16px Arial';
        ctx.fillText('x', canvas.width - 15, originY + 20);
        ctx.fillText('y', originX + 10, 25);
        ctx.fillText('O', originX - 20, originY + 20);
        
        // ç›®ç››ã‚Š
        ctx.font = '12px Arial';
        for (let i = -5; i <= 5; i++) {
            if (i === 0) continue;
            const px = toPixel(i, 0);
            ctx.fillText(i.toString(), px.x - 5, originY + 18);
            
            const py = toPixel(0, i);
            ctx.fillText(i.toString(), originX + 8, py.y + 4);
        }
    }
    
    // æˆåˆ†ã‚’æç”»
    function drawComponents() {
        const dx = endPoint.x - startPoint.x;
        const dy = endPoint.y - startPoint.y;
        
        const startPx = toPixel(startPoint.x, startPoint.y);
        const endPx = toPixel(endPoint.x, endPoint.y);
        const xCompPx = toPixel(endPoint.x, startPoint.y);
        
        // xæˆåˆ†ï¼ˆæ¨ªæ–¹å‘ï¼‰
        ctx.setLineDash([5, 5]);
        ctx.strokeStyle = '#e74c3c';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(startPx.x, startPx.y);
        ctx.lineTo(xCompPx.x, xCompPx.y);
        ctx.stroke();
        ctx.setLineDash([]);
        
        if (Math.abs(dx) > 0.1) {
            drawArrow(ctx, startPx.x, startPx.y, xCompPx.x, xCompPx.y, '#e74c3c');
            ctx.fillStyle = '#e74c3c';
            ctx.font = 'bold 14px Arial';
            const labelY = startPx.y + (dy >= 0 ? 25 : -10);
            ctx.fillText('xæˆåˆ†: ' + dx.toFixed(2), (startPx.x + xCompPx.x) / 2 - 30, labelY);
        }
        
        // yæˆåˆ†ï¼ˆç¸¦æ–¹å‘ï¼‰
        ctx.setLineDash([5, 5]);
        ctx.strokeStyle = '#2ecc71';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(xCompPx.x, xCompPx.y);
        ctx.lineTo(endPx.x, endPx.y);
        ctx.stroke();
        ctx.setLineDash([]);
        
        if (Math.abs(dy) > 0.1) {
            drawArrow(ctx, xCompPx.x, xCompPx.y, endPx.x, endPx.y, '#2ecc71');
            ctx.fillStyle = '#2ecc71';
            ctx.font = 'bold 14px Arial';
            const labelX = xCompPx.x + (dx >= 0 ? 10 : -80);
            ctx.fillText('yæˆåˆ†: ' + dy.toFixed(2), labelX, (xCompPx.y + endPx.y) / 2);
        }
    }
    
    // æ£’ã‚°ãƒ©ãƒ•ã‚’æç”»
    function drawGraph(xComp, yComp, magnitude) {
        graphCtx.clearRect(0, 0, graphCanvas.width, graphCanvas.height);
        
        const barWidth = 60;
        const maxBarHeight = 150;
        const baseline = graphCanvas.height - 30;
        const centerY = baseline - maxBarHeight / 2;
        
        // æœ€å¤§å€¤ï¼ˆã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ç”¨ï¼‰
        const maxVal = Math.max(Math.abs(xComp), Math.abs(yComp), magnitude, 2);
        const scale = (maxBarHeight / 2) / maxVal;
        
        // xæˆåˆ†ã®æ£’
        const xBarHeight = xComp * scale;
        const xBarX = graphCanvas.width / 4 - barWidth / 2;
        
        graphCtx.fillStyle = xComp >= 0 ? '#e74c3c' : '#c0392b';
        if (xComp >= 0) {
            graphCtx.fillRect(xBarX, centerY - xBarHeight, barWidth, xBarHeight);
        } else {
            graphCtx.fillRect(xBarX, centerY, barWidth, -xBarHeight);
        }
        
        // yæˆåˆ†ã®æ£’
        const yBarHeight = yComp * scale;
        const yBarX = graphCanvas.width / 2 - barWidth / 2;
        
        graphCtx.fillStyle = yComp >= 0 ? '#2ecc71' : '#27ae60';
        if (yComp >= 0) {
            graphCtx.fillRect(yBarX, centerY - yBarHeight, barWidth, yBarHeight);
        } else {
            graphCtx.fillRect(yBarX, centerY, barWidth, -yBarHeight);
        }
        
        // å¤§ãã•ã®æ£’
        const magBarHeight = magnitude * scale;
        const magBarX = graphCanvas.width * 3 / 4 - barWidth / 2;
        
        graphCtx.fillStyle = '#667eea';
        graphCtx.fillRect(magBarX, centerY - magBarHeight, barWidth, magBarHeight);
        
        // åŸºæº–ç·šï¼ˆ0ã®ãƒ©ã‚¤ãƒ³ï¼‰
        graphCtx.strokeStyle = '#333';
        graphCtx.lineWidth = 2;
        graphCtx.beginPath();
        graphCtx.moveTo(30, centerY);
        graphCtx.lineTo(graphCanvas.width - 30, centerY);
        graphCtx.stroke();
        
        // ãƒ©ãƒ™ãƒ«
        graphCtx.fillStyle = '#333';
        graphCtx.font = 'bold 14px Arial';
        graphCtx.textAlign = 'center';
        graphCtx.fillText('xæˆåˆ†', xBarX + barWidth / 2, baseline + 5);
        graphCtx.fillText(xComp.toFixed(2), xBarX + barWidth / 2, baseline + 20);
        
        graphCtx.fillText('yæˆåˆ†', yBarX + barWidth / 2, baseline + 5);
        graphCtx.fillText(yComp.toFixed(2), yBarX + barWidth / 2, baseline + 20);
        
        graphCtx.fillText('å¤§ãã• |r|', magBarX + barWidth / 2, baseline + 5);
        graphCtx.fillText(magnitude.toFixed(2), magBarX + barWidth / 2, baseline + 20);
        
        // 0ã®ãƒ©ãƒ™ãƒ«
        graphCtx.textAlign = 'right';
        graphCtx.fillText('0', 25, centerY + 5);
        
        graphCtx.textAlign = 'left';
    }
    
    // ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆ
    function getMousePos(e) {
        const rect = canvas.getBoundingClientRect();
        return {
            x: e.clientX - rect.left,
            y: e.clientY - rect.top
        };
    }
    
    function getTouchPos(e) {
        const rect = canvas.getBoundingClientRect();
        return {
            x: e.touches[0].clientX - rect.left,
            y: e.touches[0].clientY - rect.top
        };
    }
    
    function hitTest(pos) {
        const startPx = toPixel(startPoint.x, startPoint.y);
        const endPx = toPixel(endPoint.x, endPoint.y);
        
        const distToStart = Math.sqrt(Math.pow(pos.x - startPx.x, 2) + Math.pow(pos.y - startPx.y, 2));
        const distToEnd = Math.sqrt(Math.pow(pos.x - endPx.x, 2) + Math.pow(pos.y - endPx.y, 2));
        
        if (distToStart < 20) return 'start';
        if (distToEnd < 20) return 'end';
        return null;
    }
    
    canvas.addEventListener('mousedown', function(e) {
        const pos = getMousePos(e);
        dragging = hitTest(pos);
        if (dragging) {
            canvas.style.cursor = 'grabbing';
        }
    });
    
    canvas.addEventListener('mousemove', function(e) {
        const pos = getMousePos(e);
        
        if (dragging) {
            const unitPos = toUnit(pos.x, pos.y);
            // ã‚°ãƒªãƒƒãƒ‰ã«ã‚¹ãƒŠãƒƒãƒ—ï¼ˆ0.1å˜ä½ï¼‰
            unitPos.x = Math.round(unitPos.x * 10) / 10;
            unitPos.y = Math.round(unitPos.y * 10) / 10;
            
            if (dragging === 'start') {
                startPoint.x = unitPos.x;
                startPoint.y = unitPos.y;
            } else if (dragging === 'end') {
                endPoint.x = unitPos.x;
                endPoint.y = unitPos.y;
            }
            draw();
            clearActiveAngleButton();
        } else {
            const hit = hitTest(pos);
            canvas.style.cursor = hit ? 'grab' : 'crosshair';
        }
    });
    
    canvas.addEventListener('mouseup', function() {
        dragging = null;
        canvas.style.cursor = 'crosshair';
    });
    
    canvas.addEventListener('mouseleave', function() {
        dragging = null;
        canvas.style.cursor = 'crosshair';
    });
    
    // ã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆ
    canvas.addEventListener('touchstart', function(e) {
        e.preventDefault();
        const pos = getTouchPos(e);
        dragging = hitTest(pos);
    });
    
    canvas.addEventListener('touchmove', function(e) {
        e.preventDefault();
        if (dragging) {
            const pos = getTouchPos(e);
            const unitPos = toUnit(pos.x, pos.y);
            unitPos.x = Math.round(unitPos.x * 10) / 10;
            unitPos.y = Math.round(unitPos.y * 10) / 10;
            
            if (dragging === 'start') {
                startPoint.x = unitPos.x;
                startPoint.y = unitPos.y;
            } else if (dragging === 'end') {
                endPoint.x = unitPos.x;
                endPoint.y = unitPos.y;
            }
            draw();
            clearActiveAngleButton();
        }
    });
    
    canvas.addEventListener('touchend', function() {
        dragging = null;
    });
    
    // ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³
    document.getElementById('resetBtn').addEventListener('click', function() {
        startPoint = { x: 0, y: 0 };
        endPoint = { x: 1, y: 0 };
        draw();
        clearActiveAngleButton();
        // 0Â°ãƒœã‚¿ãƒ³ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
        document.querySelector('.angle-btn[data-angle="0"]').classList.add('active');
    });
    
    // æœ‰åè§’ãƒœã‚¿ãƒ³
    function clearActiveAngleButton() {
        document.querySelectorAll('.angle-btn').forEach(btn => btn.classList.remove('active'));
    }
    
    document.querySelectorAll('.angle-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const angle = parseInt(this.dataset.angle);
            const rad = angle * Math.PI / 180;
            
            startPoint = { x: 0, y: 0 };
            endPoint = {
                x: Math.cos(rad),
                y: Math.sin(rad)
            };
            
            // å°æ•°ç‚¹ã®èª¤å·®ã‚’ä¿®æ­£
            endPoint.x = Math.round(endPoint.x * 1000) / 1000;
            endPoint.y = Math.round(endPoint.y * 1000) / 1000;
            
            draw();
            
            clearActiveAngleButton();
            this.classList.add('active');
        });
    });
    
    // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚µã‚¤ã‚ºå¯¾å¿œ
    window.addEventListener('resize', function() {
        resizeCanvas();
        draw();
    });
    
    // åˆæœŸåŒ–
    window.addEventListener('load', function() {
        resizeCanvas();
        drawFigures();
        draw();
        // 0Â°ãƒœã‚¿ãƒ³ã‚’åˆæœŸã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
        document.querySelector('.angle-btn[data-angle="0"]').classList.add('active');
    });
    </script>
</body>
</html>