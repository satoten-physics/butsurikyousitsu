<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜æ ¡ç‰©ç† - ã€Œåœ§åŠ›ã€ã¯åŠ›ã§ã¯ãªã„ï¼</title>
    <script>
      window.MathJax = {
      tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
     }
     };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .back-link {
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 10px;
        }
        h1 {
            color: #333;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .tab-btn {
            flex: 1;
            min-width: 150px;
            padding: 12px 20px;
            border: none;
            background: #f0f0f0;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
            transition: all 0.3s;
        }
        .tab-btn.active {
            background: #667eea;
            color: white;
        }
        .tab-btn:hover {
            background: #8899f0;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        h2 {
            color: #667eea;
            margin-bottom: 15px;
        }
        h3 {
            color: #555;
            margin: 25px 0 15px 0;
            padding-bottom: 5px;
            border-bottom: 2px solid #667eea;
        }
        .pdf-placeholder {
            background: #f9f9f9;
            padding: 40px;
            text-align: center;
            border-radius: 5px;
            color: #666;
        }
        .lecture-content {
            line-height: 1.8;
            color: #333;
        }
        .lecture-content p {
            margin-bottom: 15px;
        }
        .point-box {
            background: linear-gradient(135deg, #e8f4fd 0%, #f0e6ff 100%);
            border-left: 5px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }
        .point-box h4 {
            color: #667eea;
            margin-bottom: 10px;
        }
        .formula-box {
            background: #fff9e6;
            border: 2px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            text-align: center;
        }
        .warning-box {
            background: #fff0f0;
            border-left: 5px solid #f44336;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }
        .warning-box strong {
            color: #f44336;
        }
        .image-explanation {
            background: #f5f5f5;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            text-align: center;
        }
        .image-explanation img {
            max-width: 100%;
            border-radius: 5px;
        }
        
        /* å•é¡Œã‚¿ãƒ–ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .problem-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #fafafa;
            border-radius: 10px;
        }
        .problem-section h4 {
            color: #667eea;
            margin-bottom: 15px;
        }
        details {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
        }
        details summary {
            cursor: pointer;
            font-weight: bold;
            color: #667eea;
        }
        details[open] summary {
            margin-bottom: 10px;
        }
        
        /* ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        #sim-container {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        #physicsCanvas {
            display: block;
            width: 100%;
            background: white;
            border-radius: 5px;
            border: 2px solid #ddd;
        }
        .sim-controls {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
        }
        .control-group {
            margin-bottom: 20px;
        }
        .control-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        .control-group input[type="range"] {
            width: 100%;
            margin: 10px 0;
        }
        .value-display {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 5px;
            font-weight: bold;
            min-width: 100px;
            text-align: center;
        }
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .sim-button {
            flex: 1;
            min-width: 120px;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .sim-button.start {
            background: #4CAF50;
            color: white;
        }
        .sim-button.start:hover {
            background: #45a049;
        }
        .sim-button.reset {
            background: #f44336;
            color: white;
        }
        .sim-button.reset:hover {
            background: #da190b;
        }
        .graph-container {
            margin-top: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #ddd;
        }
        .graph-container h3 {
            color: #667eea;
            margin-bottom: 10px;
            border-bottom: none;
        }
        #graphCanvas {
            display: block;
            width: 100%;
            border: 1px solid #eee;
        }
        .sim-explanation {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }
        .sim-explanation h4 {
            color: #667eea;
            margin-bottom: 10px;
        }
        .sim-section {
            margin-bottom: 30px;
        }
        .sim-section h3 {
            color: #667eea;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        #sim-container-1, #sim-container-2 {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        #canvas1, #canvas2 {
            display: block;
            width: 100%;
            background: white;
            border-radius: 5px;
            border: 2px solid #ddd;
        }
        .pressure-info {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        .pressure-item {
            background: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-align: center;
            min-width: 150px;
        }
        .pressure-item .label {
            font-size: 12px;
            color: #666;
        }
        .pressure-item .value {
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            header, .container {
                padding: 15px;
            }
            .tab-btn {
                min-width: 100px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <header>
        <a href="index.html" class="back-link">â† ç›®æ¬¡ã«æˆ»ã‚‹</a>
        <h1>ã€Œåœ§åŠ›ã€ã¯åŠ›ã§ã¯ãªã„ï¼</h1>
    </header>
    <div class="container">
        
        <div class="tabs">
            <button class="tab-btn active" onclick="openTab('lecture')">è§£èª¬ç·¨</button>
            <button class="tab-btn" onclick="openTab('problem')">å•é¡Œç·¨</button>
            <button class="tab-btn" onclick="openTab('simulation')">ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
        </div>
        
        <!-- ========== è§£èª¬ã‚¿ãƒ– ========== -->
        <div id="lecture" class="tab-content active">
            <h2>æˆæ¥­è³‡æ–™</h2>
            <iframe src="https://drive.google.com/file/d/1rd3AUHNkj-NLM0IEztEdsiVOdPwxD6EA/preview" width="100%" height="500"></iframe>
            
            <div class="lecture-content">
                <h3>1. åœ§åŠ›ã¨ã¯ä½•ã‹ï¼Ÿ â”€ ã€ŒåŠ›ã€ã¨ã®é•ã„</h3>
                
                <p>ã“ã‚Œã¾ã§ã€é‡åŠ›ãƒ»å¼µåŠ›ãƒ»å‚ç›´æŠ—åŠ›ãªã©ã€æ§˜ã€…ãªã€ŒåŠ›ã€ã‚’å­¦ã‚“ã§ãã¾ã—ãŸã€‚ã“ã“ã§æ³¨æ„ã—ã¦ã»ã—ã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</p>
                
                <div class="warning-box">
                    <strong>âš ï¸ é‡è¦ï¼šã€Œåœ§åŠ›ã€ã¯åŠ›ã§ã¯ãªã„ï¼åœ§åŠ›ã¯åœ§åŠ›ã§ã‚ã‚‹ã€‚</strong>
                </div>
                
                <p>ã‚·ãƒ£ãƒ¼ãƒšãƒ³ã‚’æŒ‡ã«æŠ¼ã—ä»˜ã‘ã¦ã¿ã¾ã—ã‚‡ã†ã€‚å¾Œã‚ã®æ¶ˆã—ã‚´ãƒ ã®æ–¹ã‚ˆã‚Šã‚‚ã€èŠ¯ãŒå‡ºã‚‹æ–¹ãŒç—›ã„ã¯ãšã§ã™ã€‚åŒã˜åŠ›ã§ã‚ã£ã¦ã‚‚ã€æŒ‡ã«ã‹ã‹ã‚‹åŠ›ãŒä¸€ç‚¹ã«å‡ç¸®ã•ã‚Œã‚‹ã‹ã‚‰ç—›ãæ„Ÿã˜ã‚‹ã®ã§ã™ã€‚</p>
                
                <p>ã¤ã¾ã‚Šã€<strong>é¢ç©ã«å¿œã˜ã¦åŠ ã‚ã‚‹åŠ›ãŒå¤‰ã‚ã£ã¦ãã‚‹</strong>ã®ã§ã™ã€‚ã“ã®ã€ŒåŠ ã‚ã‚Šå…·åˆã€ã‚’è¡¨ã™é‡ãŒ<strong>åœ§åŠ›</strong>ã§ã™ã€‚</p>
                
                <div class="formula-box">
                    <h4>ğŸ“ åœ§åŠ›ã®å®šç¾©</h4>
                    <p>åœ§åŠ›ï¼š1 mÂ²ã‚ãŸã‚Šã«åŠ ã‚ã‚‹åŠ›</p>
                    $$P = \frac{F}{S}$$
                    <p>$P$ï¼šåœ§åŠ› [Pa]ã€$F$ï¼šåŠ› [N]ã€$S$ï¼šé¢ç© [mÂ²]</p>
                    <p style="color: #f44336; font-weight: bold;">â€» P ã¯ S ã«åæ¯”ä¾‹ï¼</p>
                </div>
                
                <h3>2. æ°´åœ§ãƒ»å¤§æ°—åœ§ã¯ãªãœç”Ÿã˜ã‚‹ã®ã‹ï¼Ÿ</h3>
                
                <p>æ°´åœ§ã¨ã¯ã€æ–‡å­—é€šã‚Šã€Œæ°´ä¸­ã§ç”Ÿã˜ã‚‹åœ§åŠ›ã€ã§ã™ã€‚ç°¡å˜ã«è¨€ã†ã¨ã€<strong>ç‰©ä½“ã®ä¸Šã«ã®ã£ã¦ã„ã‚‹æ°´ã®é‡ã•ã«ã‚ˆã‚‹åœ§åŠ›</strong>ã§ã™ã€‚</p>
                
                <div class="point-box">
                    <h4>ğŸ’¡ æ°´åœ§ãŒç”Ÿã˜ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸</h4>
                    <p>ãƒ—ãƒ¼ãƒ«ã®åº•ã«ã„ã‚‹ã“ã¨ã‚’æƒ³åƒã—ã¦ãã ã•ã„ã€‚ã‚ãªãŸã®é ­ä¸Šã«ã¯å¤§é‡ã®æ°´ãŒã‚ã‚Šã€ãã®æ°´ã®é‡ã•ãŒã‚ãªãŸã‚’æŠ¼ã—ã¦ã„ã¾ã™ã€‚</p>
                    <p>æ·±ãæ½œã‚Œã°æ½œã‚‹ã»ã©ã€é ­ä¸Šã®æ°´ã®é‡ãŒå¢—ãˆã‚‹ã®ã§ã€æŠ¼ã•ã‚Œã‚‹åŠ›ï¼ˆåœ§åŠ›ï¼‰ã‚‚å¤§ãããªã‚Šã¾ã™ã€‚</p>
                </div>
                
                <p>å¤§æ°—åœ§ã‚‚åŒã˜è€ƒãˆæ–¹ã§ã™ã€‚ç§ãŸã¡ã®é ­ä¸Šã«ã¯ç´„100kmã‚‚ã®å¤§æ°—ï¼ˆç©ºæ°—ï¼‰ã®å±¤ãŒã‚ã‚Šã€ãã®ç©ºæ°—ã®é‡ã•ãŒç§ãŸã¡ã‚’æŠ¼ã—ã¦ã„ã¾ã™ã€‚æ¨™é«˜ãŒä½ã„å ´æ‰€ã»ã©ã€é ­ä¸Šã®ç©ºæ°—ã®é‡ãŒå¤šã„ã®ã§ã€å¤§æ°—åœ§ã¯é«˜ããªã‚Šã¾ã™ã€‚é€†ã«ã€å±±ã®ä¸Šã§ã¯é ­ä¸Šã®ç©ºæ°—ãŒå°‘ãªã„ã®ã§ã€å¤§æ°—åœ§ã¯ä½ããªã‚Šã¾ã™ã€‚</p>
                
                <p>æ°´é¢ã‹ã‚‰æ·±ã• $h$ [m] ã®ã¨ã“ã‚ã«ã‚ã‚‹å††æ¿ã«ã‹ã‹ã‚‹æ°´åœ§ã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
                
                <div class="formula-box">
                    <h4>ğŸ“ æ°´åœ§ã®å…¬å¼</h4>
                    <p>æ°´åœ§ $P$ [Pa] ã¯</p>
                    $$P = \frac{\text{å††æ¿ã®ä¸Šã«ã‚ã‚‹æ°´ã®é‡ã•}}{\text{é¢ç©}} = \frac{\rho \times S \times h \times g}{S} = \rho h g$$
                    <p>$\rho$ï¼šæ°´ã®å¯†åº¦ [kg/mÂ³]ã€$h$ï¼šæ·±ã• [m]ã€$g$ï¼šé‡åŠ›åŠ é€Ÿåº¦ [m/sÂ²]</p>
                </div>
                
                <div class="point-box">
                    <h4>ğŸŒŸ Pointï¼šæ°´åœ§</h4>
                    <p><strong>æ°´åœ§ã¯ã€Œæ·±ã•ã®ã¿ã€ã§æ±ºã¾ã‚‹ï¼</strong></p>
                    $$P = \rho h g$$
                    <p>â€» æ°´åœ§ã¯ç‰©ä½“ã«å¯¾ã—ã¦ã€Œ<span style="color: #f44336; font-weight: bold;">å…¨æ–¹å‘</span>ã€ã‹ã‚‰ã‹ã‹ã‚‹ï¼</p>
                </div>
                
                <h3>3. æµ®åŠ› â”€ ã“ã‚Œã¯ã€ŒåŠ›ã€ã§ã‚ã‚‹ï¼</h3>
                
                <p>æµ®åŠ›ã¯åœ§åŠ›ã¨é•ã£ã¦ã€ã‚Œã£ãã¨ã—ãŸã€Œ<strong>åŠ›</strong>ã€ã§ã™ã€‚æ°´ã«å…¥ã£ãŸæ™‚ã«æµ®ã„ã¦ã“ã‚ˆã†ã¨ã™ã‚‹åŠ›ã®ã“ã¨ã§ã™ã€‚</p>
                
                <p>æµ®åŠ›ãŒç”Ÿã˜ã‚‹ç†ç”±ã‚’ç‰©ç†çš„ã«è€ƒãˆã¦ã„ãã¾ã—ã‚‡ã†ã€‚æµ®åŠ›ã®åŸå› ã¯<strong>ã€Œæ°´åœ§ã®å·®ã€</strong>ã§æ±ºã¾ã‚Šã¾ã™ï¼</p>
                
                <div class="point-box">
                    <h4>ğŸ’¡ å¤§äº‹ãªãƒã‚¤ãƒ³ãƒˆï¼</h4>
                    <p>ãƒ»å´é¢ã‹ã‚‰ç‰©ä½“ã«ã‹ã‹ã‚‹æ°´åœ§ã¯å­˜åœ¨ã™ã‚‹ã‘ã©ã€<strong>åˆåŠ›ã¯æ‰“ã¡æ¶ˆã—åˆã£ã¦ 0</strong> ã§ã‚ã‚‹ã€‚</p>
                    <p>ãƒ»æ°´åœ§ã¯æ·±ã•ã«ã‚ˆã£ã¦æ±ºã¾ã‚‹ã®ã§ã€ä¸Šä¸‹é¢ã®åŠ›é–¢ä¿‚ã¯ <strong style="color: #f44336;">ä¸Šé¢ ï¼œ ä¸‹é¢</strong> ã§ã‚ã‚‹ï¼</p>
                </div>
                
                <p>ã¤ã¾ã‚Šã€æµ®åŠ›ã¨ã„ã†ã‚‚ã®ã¯ã€<strong>ä¸Šé¢ã¨ä¸‹é¢ã®ã¿ãŒé–¢ã‚ã£ã¦ã„ã‚‹</strong>ã®ã§ã™ã€‚å¼ã«ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
                
                <p>åº•é¢ç© $S$ [mÂ²]ã€é«˜ã• $l$ [m] ã®ç›´æ–¹ä½“ã‚’ã€ä¸Šé¢ãŒæ°´é¢ã‹ã‚‰æ·±ã• $h_1$ã€ä¸‹é¢ãŒæ·±ã• $h_2$ ã«ãªã‚‹ã‚ˆã†ã«æ²ˆã‚ãŸã¨ãï¼š</p>
                
                <p>ãƒ»ä¸Šé¢ã«ã‹ã‹ã‚‹ã€ŒåŠ›ã€ï¼š$F_1 = \rho h_1 g \times S$</p>
                <p>ãƒ»ä¸‹é¢ã«ã‹ã‹ã‚‹ã€ŒåŠ›ã€ï¼š$F_2 = \rho h_2 g \times S$</p>
                
                <p>ã“ã®å·®ãŒæµ®åŠ›ã§ã‚ã‚‹ã®ã§</p>
                $$F = F_2 - F_1 = \rho(h_2 - h_1)Sg = \rho V g$$
                
                <div class="formula-box">
                    <h4>ğŸ“ æµ®åŠ›ã®å…¬å¼ï¼ˆã‚¢ãƒ«ã‚­ãƒ¡ãƒ‡ã‚¹ã®åŸç†ï¼‰</h4>
                    $$F = \rho V g$$
                    <p>ã€Œ<span style="color: #667eea;">æ°´ã®å¯†åº¦</span>ã€Ã—ã€Œ<span style="color: #667eea;">æ²ˆã‚“ã§ã‚‹ç‰©ä½“ã®ä½“ç©</span>ã€Ã— $g$</p>
                    <p style="margin-top: 10px;">ã“ã‚Œã¯ã€Œæ²ˆã‚“ã§ã„ã‚‹ç‰©ä½“ã€ã®éƒ¨åˆ†ã«ã‚‚ã¨ã‚‚ã¨ã‚ã£ãŸã€<strong>æ°´ã®ä½“ç©ã«ã‚ˆã‚‹é‡ã•ãŒæµ®åŠ›ã«ãªã£ã¦ã„ã‚‹</strong></p>
                </div>
            </div>
        </div>
        
        <!-- ========== å•é¡Œã‚¿ãƒ– ========== -->
        <div id="problem" class="tab-content">
            <h2>ç¢ºèªå•é¡Œ</h2>
            
            <div class="problem-section">
                <h4>ã€å•é¡Œ1ã€‘åœ§åŠ›ã®åŸºæœ¬</h4>
                <p>è³ªé‡ 60 kg ã®äººãŒã€é¢ç© 0.04 mÂ² ã®æ¿ã®ä¸Šã«ç«‹ã£ã¦ã„ã¾ã™ã€‚æ¿ãŒåœ°é¢ã«åŠã¼ã™åœ§åŠ›ã¯ä½• Pa ã§ã™ã‹ï¼ŸãŸã ã—ã€é‡åŠ›åŠ é€Ÿåº¦ã‚’ $g = 10$ m/sÂ² ã¨ã—ã¾ã™ã€‚</p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p><strong>ã€è§£ç­”ã€‘</strong> 15000 Paï¼ˆ= 15 kPaï¼‰</p>
                    <p><strong>ã€è§£èª¬ã€‘</strong></p>
                    <p>åœ§åŠ›ã®å®šç¾© $P = \frac{F}{S}$ ã‚’ä½¿ã„ã¾ã™ã€‚</p>
                    <p>äººãŒæ¿ã‚’æŠ¼ã™åŠ› $F$ ã¯ã€äººã«ã¯ãŸã‚‰ãé‡åŠ›ã¨ç­‰ã—ã„ã®ã§</p>
                    <p>$$F = mg = 60 \times 10 = 600 \text{ [N]}$$</p>
                    <p>ã‚ˆã£ã¦ã€åœ§åŠ›ã¯</p>
                    <p>$$P = \frac{F}{S} = \frac{600}{0.04} = 15000 \text{ [Pa]}$$</p>
                </details>
            </div>
            
            <div class="problem-section">
                <h4>ã€å•é¡Œ2ã€‘æ°´åœ§ã®ç†è§£</h4>
                <p>æ°´ã®å¯†åº¦ã‚’ $\rho = 1000$ kg/mÂ³ã€é‡åŠ›åŠ é€Ÿåº¦ã‚’ $g = 10$ m/sÂ² ã¨ã—ã¾ã™ã€‚</p>
                <p>(1) æ°´é¢ã‹ã‚‰æ·±ã• 5 m ã®ä½ç½®ã§ã®æ°´åœ§ã‚’æ±‚ã‚ãªã•ã„ã€‚</p>
                <p>(2) ã€Œæ°´åœ§ã¯æ·±ã•ã®ã¿ã§æ±ºã¾ã‚‹ã€ã¨ã¯ã©ã†ã„ã†æ„å‘³ã‹ã€èª¬æ˜ã—ãªã•ã„ã€‚</p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p><strong>ã€è§£ç­”ã€‘</strong></p>
                    <p>(1) 50000 Paï¼ˆ= 50 kPaï¼‰</p>
                    <p>(2) ä¸‹è¨˜å‚ç…§</p>
                    <p><strong>ã€è§£èª¬ã€‘</strong></p>
                    <p>(1) æ°´åœ§ã®å…¬å¼ $P = \rho h g$ ã‚ˆã‚Š</p>
                    <p>$$P = 1000 \times 5 \times 10 = 50000 \text{ [Pa]}$$</p>
                    <p>(2) æ°´åœ§ã¯ $P = \rho h g$ ã§è¡¨ã•ã‚Œã€ã“ã®å¼ã«ã¯ã€Œé¢ç©ã€ã‚„ã€Œç‰©ä½“ã®å½¢ã€ã¯å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã¤ã¾ã‚Šã€åŒã˜æ·±ã•ã§ã‚ã‚Œã°ã€å®¹å™¨ã®å½¢ã‚„å¤§ãã•ã«é–¢ä¿‚ãªãã€æ°´åœ§ã¯åŒã˜å€¤ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€åŒã˜æ·±ã•ã§ã‚ã‚Œã°ã€ä¸Šä¸‹å·¦å³ã©ã®æ–¹å‘ã‹ã‚‰æ¸¬ã£ã¦ã‚‚æ°´åœ§ã¯åŒã˜ã§ã™ï¼ˆæ°´åœ§ã¯å…¨æ–¹å‘ã‹ã‚‰ã‹ã‹ã‚‹ï¼‰ã€‚</p>
                </details>
            </div>
            
            <div class="problem-section">
                <h4>ã€å•é¡Œ3ã€‘æµ®åŠ›ã®å°å‡º</h4>
                <p>å›³ã®ã‚ˆã†ã«ã€é«˜ã• $l$ã€åº•é¢ç© $S$ ã®å††æŸ±å½¢ã®ç‰©ä½“ã‚’ã€ãã®ä¸Šé¢ã®æ°´é¢ã‹ã‚‰ã®æ·±ã•ãŒ $d$ ã¨ãªã‚‹ã‚ˆã†ã«æ°´ä¸­ã«æ²ˆã‚ãŸã€‚å¤§æ°—åœ§ã‚’ $p_0$ã€æ°´ã®å¯†åº¦ã‚’ $\rho$ã€é‡åŠ›åŠ é€Ÿåº¦ã®å¤§ãã•ã‚’ $g$ ã¨ã™ã‚‹ã€‚</p>
                <p>(1) ç‰©ä½“ã®ä¸Šé¢ãŒå—ã‘ã‚‹åœ§åŠ› $p_1$ ã¨ä¸‹é¢ãŒå—ã‘ã‚‹åœ§åŠ› $p_2$ ã‚’æ±‚ã‚ã‚ˆã€‚</p>
                <p>(2) ç‰©ä½“ã®ä¸Šé¢ãŒå—ã‘ã‚‹åŠ›ã¨ä¸‹é¢ãŒå—ã‘ã‚‹åŠ›ã®å¤§ãã•ã®å·®ã‚’æ±‚ã‚ã‚ˆã€‚</p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p><strong>ã€è§£ç­”ã€‘</strong></p>
                    <p>(1) $p_1 = p_0 + \rho d g$ã€$p_2 = p_0 + \rho (d + l) g$</p>
                    <p>(2) $\rho S l g$ï¼ˆ= $\rho V g$ï¼‰</p>
                    <p><strong>ã€è§£èª¬ã€‘</strong></p>
                    <p>(1) ä¸Šé¢ã¯æ·±ã• $d$ ã«ã‚ã‚‹ã®ã§ã€æ°´åœ§ã¯ $\rho d g$ã€‚å¤§æ°—åœ§ $p_0$ ã‚‚åŠ ã‚ã‚‹ã®ã§</p>
                    <p>$$p_1 = p_0 + \rho d g$$</p>
                    <p>ä¸‹é¢ã¯æ·±ã• $d + l$ ã«ã‚ã‚‹ã®ã§</p>
                    <p>$$p_2 = p_0 + \rho (d + l) g$$</p>
                    <p>(2) ä¸Šä¸‹é¢ãŒå—ã‘ã‚‹åŠ›ã¯ã€åœ§åŠ›ã®å¼ $F = P \times S$ ã‚ˆã‚Š</p>
                    <p>$$F_2 - F_1 = p_2 \times S - p_1 \times S$$</p>
                    <p>$$= \{p_0 + \rho(d+l)g\} \times S - \{p_0 + \rho d g\} \times S$$</p>
                    <p>$$= \rho l g \times S = \rho S l g$$</p>
                    <p>ã“ã‚Œã¯ $\rho V g$ï¼ˆ$V = Sl$ ã¯ç‰©ä½“ã®ä½“ç©ï¼‰ã«ç­‰ã—ãã€æµ®åŠ›ã®å…¬å¼ã¨ä¸€è‡´ã—ã¾ã™ã€‚ã¤ã¾ã‚Šã€<strong>æµ®åŠ›ã¯æ°´åœ§ã®å·®ã«ã‚ˆã£ã¦ç”Ÿã˜ã‚‹</strong>ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p>
                </details>
            </div>
        </div>
        
        <!-- ========== ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ– ========== -->
        <div id="simulation" class="tab-content">
            <h2>æ°´åœ§ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ç†è§£ã™ã‚‹ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>
            
            <!-- ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³1: æ°´åˆ†å­ã®å¾©å…ƒåŠ› -->
            <div class="sim-section">
                <h3>ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³â‘  æ°´åˆ†å­ã®å¾©å…ƒåŠ›ã¨æ°´åœ§</h3>
                <p>ç‰©ä½“ãŒæ°´ä¸­ã«å…¥ã‚‹ã¨ã€æ°´åˆ†å­ãŒæŠ¼ã—ã®ã‘ã‚‰ã‚Œã¾ã™ã€‚æŠ¼ã—ã®ã‘ã‚‰ã‚ŒãŸæ°´åˆ†å­ã¯å…ƒã®ä½ç½®ã«æˆ»ã‚ã†ã¨ã—ã¦ç‰©ä½“ã‚’æŠ¼ã—è¿”ã—ã¾ã™ã€‚ã“ã®<strong>ã€Œå¾©å…ƒåŠ›ã®é›†ã¾ã‚Šã€</strong>ãŒæ°´åœ§ã¨ã—ã¦ä½œç”¨ã—ã¾ã™ã€‚</p>
                
                <div id="sim-container-1">
                    <canvas id="canvas1"></canvas>
                </div>
                
                <div class="sim-controls">
                    <div class="button-group">
                        <button class="sim-button start" id="insertBtn">ç‰©ä½“ã‚’å…¥ã‚Œã‚‹</button>
                        <button class="sim-button reset" id="resetBtn1">ãƒªã‚»ãƒƒãƒˆ</button>
                    </div>
                </div>
                
                <div class="sim-explanation">
                    <h4>ğŸ”¬ ãƒã‚¤ãƒ³ãƒˆ</h4>
                    <p>ãƒ»æ°´åˆ†å­ï¼ˆé’ã„ä¸¸ï¼‰ãŒè¦å‰‡æ­£ã—ãä¸¦ã‚“ã§ã„ã¾ã™ã€‚</p>
                    <p>ãƒ»ç‰©ä½“ãŒå…¥ã‚‹ã¨ã€å‘¨ã‚Šã®æ°´åˆ†å­ãŒæŠ¼ã—ã®ã‘ã‚‰ã‚Œã¾ã™ã€‚</p>
                    <p>ãƒ»æŠ¼ã—ã®ã‘ã‚‰ã‚ŒãŸæ°´åˆ†å­ãŒå…ƒã«æˆ»ã‚ã†ã¨ã™ã‚‹åŠ›ï¼ˆèµ¤ã„çŸ¢å°ï¼‰ãŒã€æ°´åœ§ã®æ­£ä½“ã§ã™ã€‚</p>
                    <p>ãƒ»ã“ã®åŠ›ã¯<strong>å…¨æ–¹å‘ã‹ã‚‰</strong>ç‰©ä½“ã«ã‹ã‹ã‚Šã¾ã™ã€‚</p>
                </div>
            </div>
            
            <hr style="margin: 40px 0; border: none; border-top: 2px dashed #ddd;">
            
            <!-- ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³2: åœ§åŠ›ã®ç©ã¿é‡ã­ -->
            <div class="sim-section">
                <h3>ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³â‘¡ ãªãœæ·±ã„ã»ã©æ°´åœ§ãŒé«˜ã„ï¼Ÿ</h3>
                <p>å„åˆ†å­ã«ã€Œ1 Nã€ã®é‡åŠ›ãŒã‹ã‹ã‚‹ã¨ä»®å®šã—ã¾ã™ã€‚åˆ†å­ãŒç©ã¿é‡ãªã‚‹ã¨ã€ä¸‹ã®åˆ†å­ã«ã¯ä¸Šã‹ã‚‰ã®é‡ã•ãŒåŠ ã‚ã‚Šã¾ã™ã€‚ã“ã‚ŒãŒ<strong>æ·±ã„ã»ã©æ°´åœ§ãŒé«˜ããªã‚‹ç†ç”±</strong>ã§ã™ã€‚</p>
                
                <div id="sim-container-2">
                    <canvas id="canvas2"></canvas>
                </div>
                
                <div class="sim-controls">
                    <div class="control-group">
                        <label>è¡¨ç¤ºã™ã‚‹æ®µæ•°: <span class="value-display" id="layerDisplay">3 æ®µ</span></label>
                        <input type="range" id="layerSlider" min="1" max="5" value="3" step="1">
                    </div>
                    <div class="button-group">
                        <button class="sim-button start" id="animateBtn">ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹</button>
                        <button class="sim-button reset" id="resetBtn2">ãƒªã‚»ãƒƒãƒˆ</button>
                    </div>
                </div>
                
                <div class="sim-explanation">
                    <h4>ğŸ”¬ ãƒã‚¤ãƒ³ãƒˆ</h4>
                    <p>ãƒ»å„åˆ†å­ï¼ˆä¸¸ï¼‰ã«ã¯ã€Œ1 Nã€ã®é‡åŠ›ãŒã‹ã‹ã£ã¦ã„ã¾ã™ã€‚</p>
                    <p>ãƒ»<span style="color: #4CAF50;">1æ®µç›®ï¼ˆç·‘ï¼‰</span>ï¼šå…¨æ–¹å‘ã« 1 N ã‚’åŠã¼ã™</p>
                    <p>ãƒ»<span style="color: #2196F3;">2æ®µç›®ï¼ˆé’ï¼‰</span>ï¼šä¸Šã‹ã‚‰ 1 N + è‡ªåˆ†ã® 1 N â†’ åˆè¨ˆ 2 N</p>
                    <p>ãƒ»<span style="color: #f44336;">3æ®µç›®ï¼ˆèµ¤ï¼‰</span>ï¼šä¸Šã‹ã‚‰ 2 N + è‡ªåˆ†ã® 1 N â†’ åˆè¨ˆ 3 N</p>
                    <p>ãƒ»ã“ã®ã‚ˆã†ã«<strong>ä¸‹ã«è¡Œãã»ã©åœ§åŠ›ãŒç©ã¿é‡ãªã£ã¦é«˜ããªã‚Šã¾ã™</strong>ã€‚</p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
    // --- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ ---
    function openTab(tabName) {
        var contents = document.getElementsByClassName("tab-content");
        for (var i = 0; i < contents.length; i++) {
            contents[i].style.display = "none";
            contents[i].classList.remove("active");
        }
        var buttons = document.getElementsByClassName("tab-btn");
        for (var i = 0; i < buttons.length; i++) {
            buttons[i].classList.remove("active");
        }
        document.getElementById(tabName).style.display = "block";
        document.getElementById(tabName).classList.add("active");
        if (event) {
            event.currentTarget.classList.add("active");
        }
        
        // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ–ãŒé–‹ã‹ã‚ŒãŸã‚‰Canvasã‚’ãƒªã‚µã‚¤ã‚º
        if (tabName === 'simulation') {
            resizeAllCanvas();
            drawSim1();
            drawSim2();
        }
    }

    // ====================================================
    // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³1: æ°´åˆ†å­ã®å¾©å…ƒåŠ›ã¨æ°´åœ§
    // ====================================================
    const canvas1 = document.getElementById('canvas1');
    const ctx1 = canvas1.getContext('2d');
    
    // æ°´åˆ†å­ã®é…åˆ—
    let molecules1 = [];
    let objectInserted = false;
    let animationId1 = null;
    let insertProgress = 0;
    
    // ç‰©ä½“ã®ä½ç½®ã¨ã‚µã‚¤ã‚º
    const objectWidth = 80;
    const objectHeight = 100;
    let objectX, objectY;
    let targetObjectY;
    
    // åˆ†å­ã®åˆæœŸåŒ–
    function initMolecules1() {
        molecules1 = [];
        const spacing = 30;
        const rows = 10;
        const cols = Math.floor((canvas1.width - 100) / spacing);
        
        for (let row = 0; row < rows; row++) {
            for (let col = 0; col < cols; col++) {
                molecules1.push({
                    baseX: 50 + col * spacing + (row % 2) * (spacing / 2),
                    baseY: 50 + row * spacing,
                    x: 50 + col * spacing + (row % 2) * (spacing / 2),
                    y: 50 + row * spacing,
                    radius: 10,
                    displaced: false,
                    displaceX: 0,
                    displaceY: 0
                });
            }
        }
        
        objectX = canvas1.width / 2 - objectWidth / 2;
        objectY = -objectHeight - 20;
        targetObjectY = canvas1.height / 2 - objectHeight / 2;
    }
    
    // åˆ†å­ã®å¤‰ä½ã‚’è¨ˆç®—
    function updateMoleculeDisplacement() {
        const objCenterX = objectX + objectWidth / 2;
        const objCenterY = objectY + objectHeight / 2;
        const pushRadius = 60;
        
        molecules1.forEach(mol => {
            if (!objectInserted || objectY < 0) {
                mol.x = mol.baseX;
                mol.y = mol.baseY;
                mol.displaced = false;
                return;
            }
            
            // ç‰©ä½“ã¨ã®è·é›¢ã‚’è¨ˆç®—
            const dx = mol.baseX - objCenterX;
            const dy = mol.baseY - objCenterY;
            
            // ç‰©ä½“å†…éƒ¨ã¾ãŸã¯è¿‘ãã«ã‚ã‚‹åˆ†å­ã‚’æŠ¼ã—ã®ã‘ã‚‹
            const inObjectX = mol.baseX > objectX - pushRadius && mol.baseX < objectX + objectWidth + pushRadius;
            const inObjectY = mol.baseY > objectY - pushRadius && mol.baseY < objectY + objectHeight + pushRadius;
            
            if (inObjectX && inObjectY) {
                // æŠ¼ã—ã®ã‘æ–¹å‘ã‚’è¨ˆç®—
                let pushX = 0, pushY = 0;
                
                if (mol.baseX < objCenterX) {
                    pushX = objectX - pushRadius - mol.baseX;
                } else {
                    pushX = objectX + objectWidth + pushRadius - mol.baseX;
                }
                
                if (mol.baseY < objCenterY) {
                    pushY = objectY - pushRadius - mol.baseY;
                } else {
                    pushY = objectY + objectHeight + pushRadius - mol.baseY;
                }
                
                // è¿‘ã„æ–¹å‘ã«æŠ¼ã—ã®ã‘ã‚‹
                if (Math.abs(pushX) < Math.abs(pushY)) {
                    mol.x = mol.baseX + pushX * 0.8;
                    mol.y = mol.baseY;
                    mol.displaceX = -pushX * 0.8;
                    mol.displaceY = 0;
                } else {
                    mol.x = mol.baseX;
                    mol.y = mol.baseY + pushY * 0.8;
                    mol.displaceX = 0;
                    mol.displaceY = -pushY * 0.8;
                }
                mol.displaced = true;
            } else {
                mol.x = mol.baseX;
                mol.y = mol.baseY;
                mol.displaced = false;
            }
        });
    }
    
    // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³1ã®æç”»
    function drawSim1() {
        const w = canvas1.width;
        const h = canvas1.height;
        
        // èƒŒæ™¯
        ctx1.fillStyle = '#e3f2fd';
        ctx1.fillRect(0, 0, w, h);
        
        // æ°´é¢
        ctx1.fillStyle = '#1976D2';
        ctx1.font = 'bold 14px sans-serif';
        ctx1.fillText('æ°´é¢', 10, 25);
        ctx1.strokeStyle = '#1976D2';
        ctx1.lineWidth = 2;
        ctx1.beginPath();
        ctx1.moveTo(0, 35);
        ctx1.lineTo(w, 35);
        ctx1.stroke();
        
        // æ°´åˆ†å­ã‚’æç”»
        molecules1.forEach(mol => {
            // åˆ†å­æœ¬ä½“
            ctx1.beginPath();
            ctx1.arc(mol.x, mol.y, mol.radius, 0, Math.PI * 2);
            ctx1.fillStyle = mol.displaced ? '#64B5F6' : '#2196F3';
            ctx1.fill();
            ctx1.strokeStyle = '#1565C0';
            ctx1.lineWidth = 1;
            ctx1.stroke();
            
            // æŠ¼ã—ã®ã‘ã‚‰ã‚ŒãŸåˆ†å­ã¯å¾©å…ƒåŠ›ã®çŸ¢å°ã‚’æç”»
            if (mol.displaced && objectInserted) {
                const arrowLen = Math.sqrt(mol.displaceX * mol.displaceX + mol.displaceY * mol.displaceY) * 0.5;
                if (arrowLen > 5) {
                    const angle = Math.atan2(mol.displaceY, mol.displaceX);
                    const startX = mol.x + Math.cos(angle) * mol.radius;
                    const startY = mol.y + Math.sin(angle) * mol.radius;
                    const endX = startX + Math.cos(angle) * arrowLen;
                    const endY = startY + Math.sin(angle) * arrowLen;
                    
                    ctx1.strokeStyle = '#f44336';
                    ctx1.lineWidth = 2;
                    ctx1.beginPath();
                    ctx1.moveTo(startX, startY);
                    ctx1.lineTo(endX, endY);
                    ctx1.stroke();
                    
                    // çŸ¢å°ã®å…ˆç«¯
                    const headLen = 6;
                    ctx1.beginPath();
                    ctx1.moveTo(endX, endY);
                    ctx1.lineTo(endX - headLen * Math.cos(angle - Math.PI/6), endY - headLen * Math.sin(angle - Math.PI/6));
                    ctx1.lineTo(endX - headLen * Math.cos(angle + Math.PI/6), endY - headLen * Math.sin(angle + Math.PI/6));
                    ctx1.closePath();
                    ctx1.fillStyle = '#f44336';
                    ctx1.fill();
                }
            }
        });
        
        // ç‰©ä½“ã‚’æç”»
        if (objectInserted || animationId1) {
            ctx1.fillStyle = 'rgba(255, 193, 7, 0.9)';
            ctx1.strokeStyle = '#F57C00';
            ctx1.lineWidth = 3;
            ctx1.fillRect(objectX, objectY, objectWidth, objectHeight);
            ctx1.strokeRect(objectX, objectY, objectWidth, objectHeight);
            
            ctx1.fillStyle = '#333';
            ctx1.font = 'bold 16px sans-serif';
            ctx1.textAlign = 'center';
            ctx1.fillText('ç‰©', objectX + objectWidth/2, objectY + objectHeight/2 - 5);
            ctx1.fillText('ä½“', objectX + objectWidth/2, objectY + objectHeight/2 + 15);
            ctx1.textAlign = 'left';
        }
        
        // èª¬æ˜ãƒ†ã‚­ã‚¹ãƒˆ
        if (objectInserted) {
            ctx1.fillStyle = '#f44336';
            ctx1.font = 'bold 14px sans-serif';
            ctx1.fillText('â† èµ¤ã„çŸ¢å° = å¾©å…ƒåŠ›ï¼ˆæ°´åœ§ã®æ­£ä½“ï¼‰', w - 250, h - 20);
        } else {
            ctx1.fillStyle = '#666';
            ctx1.font = '14px sans-serif';
            ctx1.fillText('ã€Œç‰©ä½“ã‚’å…¥ã‚Œã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„', 10, h - 20);
        }
        
        // ãƒ©ãƒ™ãƒ«
        ctx1.fillStyle = '#1565C0';
        ctx1.font = '12px sans-serif';
        ctx1.fillText('â—‹ = æ°´åˆ†å­', 10, h - 40);
    }
    
    // ç‰©ä½“æŒ¿å…¥ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    function animateInsert() {
        if (objectY < targetObjectY) {
            objectY += 3;
            updateMoleculeDisplacement();
            drawSim1();
            animationId1 = requestAnimationFrame(animateInsert);
        } else {
            objectY = targetObjectY;
            objectInserted = true;
            updateMoleculeDisplacement();
            drawSim1();
            animationId1 = null;
        }
    }
    
    // ====================================================
    // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³2: åœ§åŠ›ã®ç©ã¿é‡ã­
    // ====================================================
    const canvas2 = document.getElementById('canvas2');
    const ctx2 = canvas2.getContext('2d');
    
    let layers = 3;
    let animating2 = false;
    let animationId2 = null;
    let animStep = 0;
    let maxAnimStep = 100;
    
    // è‰²ã®é…åˆ—ï¼ˆæ®µã”ã¨ï¼‰
    const layerColors = ['#4CAF50', '#2196F3', '#f44336', '#9C27B0', '#FF9800'];
    const layerColorsLight = ['#C8E6C9', '#BBDEFB', '#FFCDD2', '#E1BEE7', '#FFE0B2'];
    
    // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³2ã®æç”»
    function drawSim2() {
        const w = canvas2.width;
        const h = canvas2.height;
        
        ctx2.fillStyle = '#fff';
        ctx2.fillRect(0, 0, w, h);
        
        const moleculeRadius = 25;
        const spacing = moleculeRadius * 2 + 5;
        const cols = 6;
        const startX = w / 2 - (cols * spacing) / 2 + spacing / 2;
        const startY = 60;
        
        // å‡¡ä¾‹ã‚’æç”»
        ctx2.fillStyle = '#333';
        ctx2.font = 'bold 14px sans-serif';
        ctx2.fillText('å‡¡ä¾‹ï¼šâ—‹ = 1 N ã®é‡åŠ›ã‚’åŠã¼ã™åˆ†å­', 10, 25);
        
        // å„æ®µã‚’æç”»
        for (let row = 0; row < layers; row++) {
            const y = startY + row * spacing;
            const pressure = row + 1; // ãã®æ®µã§ã®åœ§åŠ›ï¼ˆNï¼‰
            const color = layerColors[row % layerColors.length];
            const colorLight = layerColorsLight[row % layerColorsLight.length];
            
            for (let col = 0; col < cols; col++) {
                const x = startX + col * spacing;
                
                // åˆ†å­ã‚’æç”»
                ctx2.beginPath();
                ctx2.arc(x, y, moleculeRadius, 0, Math.PI * 2);
                ctx2.fillStyle = colorLight;
                ctx2.fill();
                ctx2.strokeStyle = color;
                ctx2.lineWidth = 3;
                ctx2.stroke();
                
                // é‡åŠ›ã®çŸ¢å°ï¼ˆä¸‹å‘ãï¼‰
                if (animating2 || !animating2) {
                    const arrowStartY = y + moleculeRadius + 2;
                    const arrowLen = 15;
                    
                    ctx2.strokeStyle = '#333';
                    ctx2.lineWidth = 2;
                    ctx2.beginPath();
                    ctx2.moveTo(x, arrowStartY);
                    ctx2.lineTo(x, arrowStartY + arrowLen);
                    ctx2.stroke();
                    
                    // çŸ¢å°ã®å…ˆç«¯
                    ctx2.beginPath();
                    ctx2.moveTo(x, arrowStartY + arrowLen);
                    ctx2.lineTo(x - 4, arrowStartY + arrowLen - 6);
                    ctx2.lineTo(x + 4, arrowStartY + arrowLen - 6);
                    ctx2.closePath();
                    ctx2.fillStyle = '#333';
                    ctx2.fill();
                }
            }
            
            // æ®µã®ãƒ©ãƒ™ãƒ«ã¨åœ§åŠ›è¡¨ç¤º
            const labelX = startX + cols * spacing + 20;
            ctx2.fillStyle = color;
            ctx2.font = 'bold 16px sans-serif';
            ctx2.fillText((row + 1) + 'æ®µç›®', labelX, y + 5);
            
            // åœ§åŠ›ã®èª¬æ˜
            ctx2.font = '14px sans-serif';
            if (row === 0) {
                ctx2.fillText('â†’ å…¨æ–¹å‘ã« 1 N ã‚’åŠã¼ã™', labelX + 60, y + 5);
            } else {
                ctx2.fillText('â†’ ä¸Šã‹ã‚‰ ' + row + ' N + è‡ªåˆ† 1 N', labelX + 60, y - 5);
                ctx2.fillStyle = '#f44336';
                ctx2.font = 'bold 14px sans-serif';
                ctx2.fillText('= åˆè¨ˆ ' + (row + 1) + ' N ã§æŠ¼ã™', labelX + 60, y + 15);
            }
        }
        
        // æ¨ªæ–¹å‘ã®åœ§åŠ›ï¼ˆå£ã¸ã®æŠ¼ã—ä»˜ã‘ï¼‰ã‚’è¡¨ç¤º
        const wallX = startX - 50;
        ctx2.strokeStyle = '#666';
        ctx2.lineWidth = 4;
        ctx2.beginPath();
        ctx2.moveTo(wallX, startY - 30);
        ctx2.lineTo(wallX, startY + layers * spacing);
        ctx2.stroke();
        ctx2.fillStyle = '#666';
        ctx2.font = '12px sans-serif';
        ctx2.fillText('å£', wallX - 15, startY + layers * spacing / 2);
        
        // å„æ®µã‹ã‚‰å£ã¸ã®åœ§åŠ›çŸ¢å°
        for (let row = 0; row < layers; row++) {
            const y = startY + row * spacing;
            const pressure = row + 1;
            const arrowLen = 10 + pressure * 8;
            const color = layerColors[row % layerColors.length];
            
            ctx2.strokeStyle = color;
            ctx2.lineWidth = 2 + pressure;
            ctx2.beginPath();
            ctx2.moveTo(startX - moleculeRadius - 5, y);
            ctx2.lineTo(wallX + 10, y);
            ctx2.stroke();
            
            // çŸ¢å°ã®å…ˆç«¯
            ctx2.beginPath();
            ctx2.moveTo(wallX + 10, y);
            ctx2.lineTo(wallX + 18, y - 5);
            ctx2.lineTo(wallX + 18, y + 5);
            ctx2.closePath();
            ctx2.fillStyle = color;
            ctx2.fill();
            
            // åœ§åŠ›å€¤
            ctx2.fillStyle = color;
            ctx2.font = 'bold 12px sans-serif';
            ctx2.fillText(pressure + ' N', wallX - 5, y - 15);
        }
        
        // çµè«–
        const conclusionY = startY + layers * spacing + 50;
        ctx2.fillStyle = '#333';
        ctx2.font = 'bold 16px sans-serif';
        ctx2.fillText('â˜… çµè«–ï¼šä¸‹ã«è¡Œãã»ã©ã€ä¸Šã‹ã‚‰ã®é‡ã•ãŒç©ã¿é‡ãªã£ã¦åœ§åŠ›ãŒé«˜ããªã‚‹ï¼', 20, conclusionY);
        
        // æ•°å¼
        ctx2.fillStyle = '#667eea';
        ctx2.font = '14px sans-serif';
        ctx2.fillText('ã“ã‚ŒãŒ P = Ïhg ï¼ˆæ·±ã•ã«æ¯”ä¾‹ï¼‰ã®ç†ç”±ã§ã™', 20, conclusionY + 25);
    }
    
    // ====================================================
    // ã‚­ãƒ£ãƒ³ãƒã‚¹ã®ãƒªã‚µã‚¤ã‚º
    // ====================================================
    function resizeAllCanvas() {
        if (canvas1.parentElement) {
            canvas1.width = canvas1.parentElement.clientWidth - 40;
            canvas1.height = 350;
        }
        if (canvas2.parentElement) {
            canvas2.width = canvas2.parentElement.clientWidth - 40;
            canvas2.height = 400;
        }
        initMolecules1();
    }
    
    // ====================================================
    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
    // ====================================================
    
    // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³1ã®ãƒœã‚¿ãƒ³
    document.getElementById('insertBtn').addEventListener('click', function() {
        if (animationId1) return;
        if (objectInserted) {
            // ãƒªã‚»ãƒƒãƒˆã—ã¦ã‹ã‚‰å†æŒ¿å…¥
            objectInserted = false;
            objectY = -objectHeight - 20;
            initMolecules1();
        }
        animateInsert();
    });
    
    document.getElementById('resetBtn1').addEventListener('click', function() {
        if (animationId1) {
            cancelAnimationFrame(animationId1);
            animationId1 = null;
        }
        objectInserted = false;
        objectY = -objectHeight - 20;
        initMolecules1();
        drawSim1();
    });
    
    // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³2ã®ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã¨ãƒœã‚¿ãƒ³
    document.getElementById('layerSlider').addEventListener('input', function() {
        layers = parseInt(this.value);
        document.getElementById('layerDisplay').textContent = layers + ' æ®µ';
        drawSim2();
    });
    
    document.getElementById('animateBtn').addEventListener('click', function() {
        // æ®µã‚’1ã‹ã‚‰é †ã«è¡¨ç¤ºã™ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        layers = 0;
        document.getElementById('layerSlider').value = 1;
        
        let currentLayer = 1;
        const maxLayers = 5;
        
        function showNextLayer() {
            if (currentLayer <= maxLayers) {
                layers = currentLayer;
                document.getElementById('layerSlider').value = currentLayer;
                document.getElementById('layerDisplay').textContent = currentLayer + ' æ®µ';
                drawSim2();
                currentLayer++;
                setTimeout(showNextLayer, 1000);
            }
        }
        
        showNextLayer();
    });
    
    document.getElementById('resetBtn2').addEventListener('click', function() {
        layers = 3;
        document.getElementById('layerSlider').value = 3;
        document.getElementById('layerDisplay').textContent = '3 æ®µ';
        drawSim2();
    });
    
    // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚µã‚¤ã‚ºå¯¾å¿œ
    window.addEventListener('resize', function() {
        resizeAllCanvas();
        drawSim1();
        drawSim2();
    });
    
    // åˆæœŸåŒ–
    resizeAllCanvas();
    drawSim1();
    drawSim2();
    
    // MathJaxã®å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ™‚ç”¨ï¼‰
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            setTimeout(() => {
                if (window.MathJax) {
                    MathJax.typesetPromise();
                }
            }, 100);
        });
    });
    </script>
</body>
</html>