<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜æ ¡ç‰©ç† - éŸ³æ³¢ï¼ˆéŸ³ã®3è¦ç´ ï¼‰</title>
    <script>
      window.MathJax = {
      tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
     }
     };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .back-link {
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 10px;
        }
        h1 {
            color: #333;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .tab-btn {
            flex: 1;
            min-width: 150px;
            padding: 12px 20px;
            border: none;
            background: #f0f0f0;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
            transition: all 0.3s;
        }
        .tab-btn.active {
            background: #667eea;
            color: white;
        }
        .tab-btn:hover {
            background: #8899f0;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        h2 {
            color: #667eea;
            margin-bottom: 15px;
        }
        h3 {
            color: #667eea;
            margin: 25px 0 15px 0;
            padding-bottom: 5px;
            border-bottom: 2px solid #667eea;
        }
        h4 {
            color: #333;
            margin: 20px 0 10px 0;
        }
        p {
            line-height: 1.8;
            margin-bottom: 15px;
        }
        .important-box {
            background: linear-gradient(135deg, #667eea20 0%, #764ba220 100%);
            border-left: 4px solid #667eea;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }
        .important-box p {
            margin-bottom: 0;
        }
        .note-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }
        .review-link {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            margin: 10px 0;
            transition: background 0.3s;
        }
        .review-link:hover {
            background: #5a6fd6;
        }
        .formula-box {
            background: #f8f9fa;
            border: 2px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            text-align: center;
        }
        .db-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .db-table th, .db-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }
        .db-table th {
            background: #667eea;
            color: white;
        }
        .db-table tr:nth-child(even) {
            background: #f9f9f9;
        }
        
        /* éŸ³è‰²ãƒ„ãƒ¼ãƒ«ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .timbre-tool {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .timbre-tool h4 {
            margin-top: 0;
        }
        .harmonic-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        .harmonic-slider {
            background: white;
            padding: 10px;
            border-radius: 5px;
        }
        .harmonic-slider label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 14px;
        }
        .harmonic-slider input {
            width: 100%;
        }
        #timbreCanvas {
            width: 100%;
            background: white;
            border-radius: 5px;
            border: 2px solid #ddd;
            margin-top: 15px;
        }
        .preset-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        .preset-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        .preset-btn:hover, .preset-btn.active {
            background: #667eea;
            color: white;
        }
        
        /* å•é¡Œç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .problem-section {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .problem-section h4 {
            color: #667eea;
            margin-top: 0;
        }
        details {
            background: white;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            border: 1px solid #ddd;
        }
        summary {
            cursor: pointer;
            font-weight: bold;
            color: #667eea;
        }
        details[open] summary {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
        }
        
        /* ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        #sim-container {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        #physicsCanvas {
            display: block;
            width: 100%;
            background: white;
            border-radius: 5px;
            border: 2px solid #ddd;
        }
        .sim-controls {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
        }
        .control-group {
            margin-bottom: 20px;
        }
        .control-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        .control-group input[type="range"] {
            width: 100%;
            margin: 10px 0;
        }
        .control-group select {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
            font-size: 16px;
        }
        .value-display {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 5px;
            font-weight: bold;
            min-width: 100px;
            text-align: center;
        }
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .sim-button {
            flex: 1;
            min-width: 120px;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .sim-button.start {
            background: #4CAF50;
            color: white;
        }
        .sim-button.start:hover {
            background: #45a049;
        }
        .sim-button.stop {
            background: #ff9800;
            color: white;
        }
        .sim-button.stop:hover {
            background: #f57c00;
        }
        .sim-button.reset {
            background: #f44336;
            color: white;
        }
        .sim-button.reset:hover {
            background: #da190b;
        }
        .graph-container {
            margin-top: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #ddd;
        }
        .graph-container h3 {
            color: #667eea;
            margin-bottom: 10px;
            border: none;
        }
        #graphCanvas {
            display: block;
            width: 100%;
            border: 1px solid #eee;
        }
        .info-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        .info-item {
            background: #e8eaf6;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }
        .info-item .label {
            font-size: 12px;
            color: #666;
        }
        .info-item .value {
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            header, .container {
                padding: 15px;
            }
            .tab-btn {
                min-width: 100px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <header>
        <a href="index.html" class="back-link">â† ç›®æ¬¡ã«æˆ»ã‚‹</a>
        <h1>éŸ³æ³¢ï¼ˆéŸ³ã®3è¦ç´ ï¼‰</h1>
    </header>
    <div class="container">
        
        <div class="tabs">
            <button class="tab-btn active" onclick="openTab('lecture')">è§£èª¬ç·¨</button>
            <button class="tab-btn" onclick="openTab('problem')">å•é¡Œç·¨</button>
            <button class="tab-btn" onclick="openTab('simulation')">ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
        </div>
        
        <!-- è§£èª¬ã‚¿ãƒ– -->
        <div id="lecture" class="tab-content active">
            <h2>éŸ³ã®3è¦ç´ </h2>
            
            <div class="important-box">
                <p><strong>ğŸ”Š éŸ³ã¯ã€Œç¸¦æ³¢ã€ã§ã‚ã‚‹</strong><br>
                éŸ³ã¯ç©ºæ°—ãªã©ã®åª’è³ªä¸­ã‚’ä¼ã‚ã‚‹<strong>ç¸¦æ³¢ï¼ˆç–å¯†æ³¢ï¼‰</strong>ã§ã™ã€‚ç©ºæ°—åˆ†å­ãŒæŒ¯å‹•ã®é€²è¡Œæ–¹å‘ã¨åŒã˜æ–¹å‘ã«æŒ¯å‹•ã—ã€å¯†ãªéƒ¨åˆ†ã¨ç–ãªéƒ¨åˆ†ãŒäº¤äº’ã«ä¼ã‚ã£ã¦ã„ãã¾ã™ã€‚</p>
            </div>
            
            <p>æ³¢ã®åŸºæœ¬çš„ãªæ€§è³ªã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã§å¾©ç¿’ã—ã¾ã—ã‚‡ã†ã€‚</p>
            <a href="æ³¢(æ³¢å‹•)ã¨ã„ã†æ¦‚å¿µ.html" class="review-link">ğŸ“š æ³¢ï¼ˆæ³¢å‹•ï¼‰ã®åŸºç¤ã‚’å¾©ç¿’ã™ã‚‹</a>
            
            <p style="margin-top: 20px;">éŸ³ã‚’ç‰¹å¾´ã¥ã‘ã‚‹è¦ç´ ã¯3ã¤ã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’<strong>éŸ³ã®3è¦ç´ </strong>ã¨ã„ã„ã¾ã™ã€‚</p>
            
            <div class="formula-box">
                <p style="font-size: 1.2em; margin: 0;">
                    <strong>â‘  éŸ³ã®é«˜ã•</strong>ï¼ˆå‘¨æ³¢æ•°ï¼‰ã€€
                    <strong>â‘¡ éŸ³ã®å¼·ã•</strong>ï¼ˆæŒ¯å¹…ï¼‰ã€€
                    <strong>â‘¢ éŸ³è‰²</strong>ï¼ˆæ³¢å½¢ï¼‰
                </p>
            </div>
            
            <h3>â‘  éŸ³ã®é«˜ã•ï¼ˆå‘¨æ³¢æ•°ï¼‰</h3>
            
            <p>éŸ³ã®é«˜ã•ã¯<strong>å‘¨æ³¢æ•° $f$ [Hz]</strong>ï¼ˆãƒ˜ãƒ«ãƒ„ï¼‰ã«ã‚ˆã£ã¦æ±ºã¾ã‚Šã¾ã™ã€‚</p>
            
            <ul style="margin: 15px 0 15px 30px; line-height: 2;">
                <li>å‘¨æ³¢æ•°ãŒ<strong>å¤§ãã„</strong> â†’ <strong>é«˜ã„éŸ³</strong>ã«èã“ãˆã‚‹</li>
                <li>å‘¨æ³¢æ•°ãŒ<strong>å°ã•ã„</strong> â†’ <strong>ä½ã„éŸ³</strong>ã«èã“ãˆã‚‹</li>
            </ul>
            
            <div class="note-box">
                <p><strong>ğŸ’¡ ãªãœå‘¨æ³¢æ•°ãŒé«˜ã„ã¨ã€Œé«˜ã„éŸ³ã€ã«æ„Ÿã˜ã‚‹ã®ã‹ï¼Ÿ</strong><br>
                ã“ã‚Œã¯ç‰©ç†çš„ãªå¿…ç„¶ã§ã¯ãªãã€<strong>äººé–“ã®è„³ã®èªçŸ¥</strong>ã«ã‚ˆã‚‹ã‚‚ã®ã§ã™ã€‚é¼“è†œã«å±Šã„ãŸæŒ¯å‹•ã‚’è„³ãŒå‡¦ç†ã™ã‚‹éš›ã€å‘¨æ³¢æ•°ãŒé«˜ã„æŒ¯å‹•ã‚’ã€Œé«˜ã„éŸ³ã€ã¨ã—ã¦èªè­˜ã™ã‚‹ã‚ˆã†ã«ã§ãã¦ã„ã¾ã™ã€‚ã€Œãã†ã„ã†ã‚‚ã®ã ã€ã¨ç†è§£ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚</p>
            </div>
            
            <h4>äººé–“ã®å¯è´åŸŸ</h4>
            <p>äººé–“ãŒèãå–ã‚Œã‚‹å‘¨æ³¢æ•°ã®ç¯„å›²ã¯ç´„ <strong>20 Hz ã€œ 20,000 Hz</strong> ã§ã™ã€‚ã“ã‚Œã‚’<strong>å¯è´åŸŸ</strong>ã¨ã„ã„ã¾ã™ã€‚</p>
            
            <h4>1ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ã¨ã¯</h4>
            <p>éŸ³æ¥½ã§ä½¿ã‚ã‚Œã‚‹ã€Œ1ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–é«˜ã„ã€ã¨ã¯ã€<strong>å‘¨æ³¢æ•°ãŒ2å€</strong>ã«ãªã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚</p>
            <p>ä¾‹ï¼šãƒ©ã®éŸ³ï¼ˆA4ï¼‰= 440 Hz â†’ 1ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Šã®ãƒ©ï¼ˆA5ï¼‰= 880 Hz</p>
            
            <h3>â‘¡ éŸ³ã®å¼·ã•ï¼ˆæŒ¯å¹…ï¼‰</h3>
            
            <p>éŸ³ã®å¼·ã•ã¯æ³¢ã®<strong>æŒ¯å¹…</strong>ã«é–¢ä¿‚ã—ã¦ã„ã¾ã™ã€‚</p>
            
            <div class="important-box">
                <p><strong>âš ï¸ é‡è¦ãªæ³¨æ„ç‚¹</strong><br>
                å¤§ããªå£°ã‚’å‡ºã—ã¦ã‚‚ã€<strong>éŸ³é€Ÿã¯å¤‰ã‚ã‚Šã¾ã›ã‚“</strong>ã€‚éŸ³é€Ÿã¯åª’è³ªã®ç¨®é¡ã¨æ¸©åº¦ã®ã¿ã«ä¾å­˜ã—ã¾ã™ã€‚<br>
                å¤§ããªå£° = <strong>æŒ¯å¹…ãŒå¤§ãã„</strong> = <strong>éŸ³ã‚’ä¼ãˆã‚‹ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒå¤§ãã„</strong></p>
            </div>
            
            <h4>ãƒ‡ã‚·ãƒ™ãƒ«ï¼ˆdBï¼‰</h4>
            <p>éŸ³ã®å¼·ã•ã®å˜ä½ã«ã¯<strong>ãƒ‡ã‚·ãƒ™ãƒ« [dB]</strong>ãŒä½¿ã‚ã‚Œã¾ã™ã€‚</p>
            
            <table class="db-table">
                <tr>
                    <th>ãƒ‡ã‚·ãƒ™ãƒ«ã®å·® [dB]</th>
                    <th>éŸ³ã®å¤§ãã•ã®å€ç‡</th>
                    <th>å…·ä½“ä¾‹</th>
                </tr>
                <tr><td>0</td><td>1å€</td><td>äººé–“ã®è´åŠ›ã®é™ç•Œ</td></tr>
                <tr><td>20</td><td>10å€</td><td>è‘‰ãŒå‹•ãéŸ³</td></tr>
                <tr><td>40</td><td>100å€</td><td>é™ã‹ãªå›³æ›¸é¤¨</td></tr>
                <tr><td>60</td><td>1,000å€</td><td>ä¸€èˆ¬çš„ãªä¼šè©±</td></tr>
                <tr><td>80</td><td>10,000å€</td><td>ç›®è¦šã¾ã—æ™‚è¨ˆ</td></tr>
                <tr><td>100</td><td>100,000å€</td><td>é›»è»Š</td></tr>
                <tr><td>120</td><td>1,000,000å€</td><td>é£›è¡Œæ©Ÿ</td></tr>
            </table>
            
            <details style="margin: 20px 0;">
                <summary>ğŸ“ è£œè¶³ï¼šãƒ‡ã‚·ãƒ™ãƒ«ã¨å¯¾æ•°ã‚¹ã‚±ãƒ¼ãƒ«</summary>
                <p style="margin-top: 15px;">ãƒ‡ã‚·ãƒ™ãƒ«ã¯<strong>å¯¾æ•°ã‚¹ã‚±ãƒ¼ãƒ«</strong>ã§å®šç¾©ã•ã‚Œã¾ã™ã€‚éŸ³åœ§ $P$ ã¨åŸºæº–éŸ³åœ§ $P_0$ ã®é–¢ä¿‚ã¯ï¼š</p>
                <div class="formula-box">
                    $$ \text{ãƒ‡ã‚·ãƒ™ãƒ«} = 20 \log_{10} \frac{P}{P_0} $$
                </div>
                <p>ã“ã“ã§ $P_0 = 2.0 \times 10^{-5}$ Paï¼ˆäººé–“ãŒèãå–ã‚Œã‚‹æœ€å°ã®éŸ³åœ§ï¼‰ã§ã™ã€‚</p>
                <p>å¯¾æ•°ã‚’ä½¿ã†ç†ç”±ã¯ã€éŸ³ã®å¼·ã•ã®ç¯„å›²ãŒéå¸¸ã«åºƒã„ï¼ˆ100ä¸‡å€ä»¥ä¸Šï¼‰ãŸã‚ã€ãã®ã¾ã¾æ•°å€¤ã§è¡¨ã™ã¨æ‰±ã„ã«ãããªã‚‹ã‹ã‚‰ã§ã™ã€‚å¯¾æ•°ã‚¹ã‚±ãƒ¼ãƒ«ã‚’ä½¿ã†ã“ã¨ã§ã€20 dBå¢—ãˆã‚‹ã”ã¨ã«10å€ã¨ã„ã†åˆ†ã‹ã‚Šã‚„ã™ã„é–¢ä¿‚ã«ãªã‚Šã¾ã™ã€‚</p>
            </details>
            
            <h3>â‘¢ éŸ³è‰²ï¼ˆæ³¢å½¢ï¼‰</h3>
            
            <p>åŒã˜é«˜ã•ãƒ»åŒã˜å¤§ãã•ã®éŸ³ã§ã‚‚ã€ãƒ”ã‚¢ãƒã¨ãƒã‚¤ã‚ªãƒªãƒ³ã§ã¯éŸ³ã®å°è±¡ãŒç•°ãªã‚Šã¾ã™ã€‚ã“ã®é•ã„ã‚’ç”Ÿã¿å‡ºã™ã®ãŒ<strong>éŸ³è‰²</strong>ã§ã™ã€‚</p>
            
            <div class="important-box">
                <p><strong>éŸ³è‰² = æ³¢å½¢ã®é•ã„</strong><br>
                æ¥½å™¨ã«ã‚ˆã£ã¦å«ã¾ã‚Œã‚‹å€éŸ³ï¼ˆåŸºæœ¬å‘¨æ³¢æ•°ã®æ•´æ•°å€ã®æˆåˆ†ï¼‰ã®å¼·ã•ãŒç•°ãªã‚‹ãŸã‚ã€åˆæˆã•ã‚ŒãŸæ³¢å½¢ãŒå¤‰ã‚ã‚Šã€ç•°ãªã‚‹éŸ³è‰²ã¨ã—ã¦èã“ãˆã¾ã™ã€‚</p>
            </div>
            
            <div class="timbre-tool">
                <h4>ğŸµ éŸ³è‰²ä½“é¨“ãƒ„ãƒ¼ãƒ«ï¼šå€éŸ³ã®åˆæˆ</h4>
                <p>å„ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§å€éŸ³æˆåˆ†ã®å¼·ã•ã‚’èª¿æ•´ã—ã€æ³¢å½¢ãŒã©ã†å¤‰åŒ–ã™ã‚‹ã‹è¦³å¯Ÿã—ã¾ã—ã‚‡ã†ã€‚</p>
                
                <div class="preset-buttons">
                    <button class="preset-btn" onclick="setTimbrePreset('sine')">ç´”éŸ³ï¼ˆæ­£å¼¦æ³¢ï¼‰</button>
                    <button class="preset-btn" onclick="setTimbrePreset('clarinet')">ã‚¯ãƒ©ãƒªãƒãƒƒãƒˆé¢¨</button>
                    <button class="preset-btn" onclick="setTimbrePreset('trumpet')">ãƒˆãƒ©ãƒ³ãƒšãƒƒãƒˆé¢¨</button>
                    <button class="preset-btn" onclick="setTimbrePreset('organ')">ã‚ªãƒ«ã‚¬ãƒ³é¢¨</button>
                </div>
                
                <div class="harmonic-controls">
                    <div class="harmonic-slider">
                        <label>åŸºæœ¬æ³¢ (f): <span id="h1Val">100</span>%</label>
                        <input type="range" id="h1Slider" min="0" max="100" value="100" oninput="updateTimbre()">
                    </div>
                    <div class="harmonic-slider">
                        <label>ç¬¬2å€éŸ³ (2f): <span id="h2Val">0</span>%</label>
                        <input type="range" id="h2Slider" min="0" max="100" value="0" oninput="updateTimbre()">
                    </div>
                    <div class="harmonic-slider">
                        <label>ç¬¬3å€éŸ³ (3f): <span id="h3Val">0</span>%</label>
                        <input type="range" id="h3Slider" min="0" max="100" value="0" oninput="updateTimbre()">
                    </div>
                    <div class="harmonic-slider">
                        <label>ç¬¬4å€éŸ³ (4f): <span id="h4Val">0</span>%</label>
                        <input type="range" id="h4Slider" min="0" max="100" value="0" oninput="updateTimbre()">
                    </div>
                    <div class="harmonic-slider">
                        <label>ç¬¬5å€éŸ³ (5f): <span id="h5Val">0</span>%</label>
                        <input type="range" id="h5Slider" min="0" max="100" value="0" oninput="updateTimbre()">
                    </div>
                </div>
                
                <canvas id="timbreCanvas" height="200"></canvas>
            </div>
            
            <h3>æˆæ¥­è³‡æ–™ï¼ˆPDFï¼‰</h3>
            <iframe src="https://drive.google.com/file/d/1rd3AUHNkj-NLM0IEztEdsiVOdPwxD6EA/preview" width="100%" height="500"></iframe>
        </div>
        
        <!-- å•é¡Œã‚¿ãƒ– -->
        <div id="problem" class="tab-content">
            <h2>ç¢ºèªå•é¡Œ</h2>
            
            <div class="problem-section">
                <h4>å•é¡Œ1ï¼šéŸ³ã®3è¦ç´ </h4>
                <p>éŸ³ã‚’ç‰¹å¾´ã¥ã‘ã‚‹3ã¤ã®è¦ç´ ã¨ã€ãã‚Œãã‚Œã«å¯¾å¿œã™ã‚‹ç‰©ç†é‡ã‚’ç­”ãˆãªã•ã„ã€‚</p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p><strong>è§£ç­”ï¼š</strong></p>
                    <ol style="margin-left: 20px; line-height: 2;">
                        <li><strong>éŸ³ã®é«˜ã•</strong> â† å‘¨æ³¢æ•° $f$ [Hz]</li>
                        <li><strong>éŸ³ã®å¼·ã•</strong> â† æŒ¯å¹…ï¼ˆéŸ³åœ§ï¼‰[dB]</li>
                        <li><strong>éŸ³è‰²</strong> â† æ³¢å½¢ï¼ˆå€éŸ³æ§‹æˆï¼‰</li>
                    </ol>
                    <p style="margin-top: 15px;"><strong>è§£èª¬ï¼š</strong><br>
                    éŸ³ã¯ç¸¦æ³¢ã¨ã—ã¦åª’è³ªä¸­ã‚’ä¼ã‚ã‚Šã¾ã™ã€‚å‘¨æ³¢æ•°ãŒé«˜ã„ã»ã©é«˜ã„éŸ³ã€æŒ¯å¹…ãŒå¤§ãã„ã»ã©å¤§ããªéŸ³ã¨ã—ã¦èªè­˜ã•ã‚Œã¾ã™ã€‚åŒã˜å‘¨æ³¢æ•°ãƒ»æŒ¯å¹…ã§ã‚‚ã€å«ã¾ã‚Œã‚‹å€éŸ³æˆåˆ†ã«ã‚ˆã£ã¦æ³¢å½¢ãŒç•°ãªã‚Šã€ãã‚ŒãŒéŸ³è‰²ã®é•ã„ã¨ãªã‚Šã¾ã™ã€‚</p>
                </details>
            </div>
            
            <div class="problem-section">
                <h4>å•é¡Œ2ï¼šãƒ‡ã‚·ãƒ™ãƒ«ã®è¨ˆç®—</h4>
                <p>é™ã‹ãªå›³æ›¸é¤¨ï¼ˆ40 dBï¼‰ã¨ä¸€èˆ¬çš„ãªä¼šè©±ï¼ˆ60 dBï¼‰ã§ã¯ã€éŸ³ã®å¤§ãã•ã¯ä½•å€ç•°ãªã‚‹ã‹ç­”ãˆãªã•ã„ã€‚</p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p><strong>è§£ç­”ï¼š10å€</strong></p>
                    <p style="margin-top: 15px;"><strong>è§£èª¬ï¼š</strong><br>
                    ãƒ‡ã‚·ãƒ™ãƒ«ã®å·®ã¯ $60 - 40 = 20$ dB ã§ã™ã€‚<br>
                    ãƒ‡ã‚·ãƒ™ãƒ«ã¯å¯¾æ•°ã‚¹ã‚±ãƒ¼ãƒ«ãªã®ã§ã€20 dB ã®å·®ã¯éŸ³ã®å¤§ãã•ãŒ <strong>10å€</strong> ç•°ãªã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚</p>
                    <p>ä¸€èˆ¬ã«ã€ãƒ‡ã‚·ãƒ™ãƒ«ãŒ 20 dB å¢—ãˆã‚‹ã”ã¨ã«éŸ³ã®å¤§ãã•ã¯ 10 å€ã«ãªã‚Šã¾ã™ã€‚</p>
                </details>
            </div>
            
            <div class="problem-section">
                <h4>å•é¡Œ3ï¼šã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ã¨å‘¨æ³¢æ•°</h4>
                <p>ã‚ã‚‹éŸ³ã®å‘¨æ³¢æ•°ãŒ 220 Hz ã§ã‚ã‚‹ã€‚ã“ã®éŸ³ã‚ˆã‚Š2ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–é«˜ã„éŸ³ã®å‘¨æ³¢æ•°ã‚’æ±‚ã‚ãªã•ã„ã€‚</p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p><strong>è§£ç­”ï¼š880 Hz</strong></p>
                    <p style="margin-top: 15px;"><strong>è§£èª¬ï¼š</strong><br>
                    1ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸ŠãŒã‚‹ã¨å‘¨æ³¢æ•°ã¯2å€ã«ãªã‚Šã¾ã™ã€‚</p>
                    <ul style="margin-left: 20px; line-height: 2;">
                        <li>å…ƒã®éŸ³ï¼š220 Hz</li>
                        <li>1ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Šï¼š$220 \times 2 = 440$ Hz</li>
                        <li>2ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Šï¼š$440 \times 2 = 880$ Hz</li>
                    </ul>
                    <p>ã¾ãŸã¯ã€2ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ä¸Š = $2^2 = 4$ å€ãªã®ã§ã€$220 \times 4 = 880$ Hz</p>
                </details>
            </div>
        </div>
        
        <!-- ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ– -->
        <div id="simulation" class="tab-content">
            <h2>éŸ³æ³¢ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>
            <p>å‘¨æ³¢æ•°ãƒ»æŒ¯å¹…ãƒ»æ³¢å½¢ã‚’å¤‰ãˆã¦ã€éŸ³ã¨æ³¢å½¢ã®é–¢ä¿‚ã‚’ä½“é¨“ã—ã¾ã—ã‚‡ã†ã€‚</p>
            
            <div id="sim-container">
                <canvas id="physicsCanvas"></canvas>
            </div>
            
            <div class="info-display">
                <div class="info-item">
                    <div class="label">å‘¨æ³¢æ•°</div>
                    <div class="value" id="freqInfo">440 Hz</div>
                </div>
                <div class="info-item">
                    <div class="label">å‘¨æœŸ</div>
                    <div class="value" id="periodInfo">2.27 ms</div>
                </div>
                <div class="info-item">
                    <div class="label">æ³¢é•·ï¼ˆç©ºæ°—ä¸­ï¼‰</div>
                    <div class="value" id="wavelengthInfo">0.77 m</div>
                </div>
            </div>
            
            <div class="sim-controls">
                <div class="control-group">
                    <label>å‘¨æ³¢æ•° (f): <span class="value-display" id="freqDisplay">440 Hz</span></label>
                    <input type="range" id="freqSlider" min="100" max="1000" value="440" step="10">
                </div>
                
                <div class="control-group">
                    <label>æŒ¯å¹…: <span class="value-display" id="ampDisplay">0.5</span></label>
                    <input type="range" id="ampSlider" min="0.1" max="1" value="0.5" step="0.1">
                </div>
                
                <div class="control-group">
                    <label>æ³¢å½¢:</label>
                    <select id="waveformSelect">
                        <option value="sine">æ­£å¼¦æ³¢ï¼ˆã‚µã‚¤ãƒ³æ³¢ï¼‰</option>
                        <option value="square">çŸ©å½¢æ³¢</option>
                        <option value="sawtooth">ã®ã“ãã‚Šæ³¢</option>
                        <option value="triangle">ä¸‰è§’æ³¢</option>
                    </select>
                </div>
                
                <div class="button-group">
                    <button class="sim-button start" id="startBtn">â–¶ éŸ³ã‚’å†ç”Ÿ</button>
                    <button class="sim-button stop" id="stopBtn" style="display:none;">â¹ åœæ­¢</button>
                    <button class="sim-button reset" id="resetBtn">ğŸ”„ ãƒªã‚»ãƒƒãƒˆ</button>
                </div>
            </div>
            
            <div class="graph-container">
                <h3>æ³¢å½¢ã‚°ãƒ©ãƒ•</h3>
                <canvas id="graphCanvas"></canvas>
            </div>
        </div>
    </div>
    
    <script>
    // --- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ ---
    function openTab(tabName) {
        var contents = document.getElementsByClassName("tab-content");
        for (var i = 0; i < contents.length; i++) {
            contents[i].style.display = "none";
            contents[i].classList.remove("active");
        }
        var buttons = document.getElementsByClassName("tab-btn");
        for (var i = 0; i < buttons.length; i++) {
            buttons[i].classList.remove("active");
        }
        document.getElementById(tabName).style.display = "block";
        if (event) {
            event.currentTarget.classList.add("active");
        }
        
        // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ–ã‚’é–‹ã„ãŸã¨ãã«Canvasã‚’åˆæœŸåŒ–
        if (tabName === 'simulation') {
            initSimulation();
        }
    }
    
    // ========================================
    // éŸ³è‰²ä½“é¨“ãƒ„ãƒ¼ãƒ«ï¼ˆè§£èª¬ã‚¿ãƒ–å†…ã®é™çš„ãƒ„ãƒ¼ãƒ«ï¼‰
    // ========================================
    const timbreCanvas = document.getElementById('timbreCanvas');
    const timbreCtx = timbreCanvas.getContext('2d');
    
    function updateTimbre() {
        const h1 = parseInt(document.getElementById('h1Slider').value);
        const h2 = parseInt(document.getElementById('h2Slider').value);
        const h3 = parseInt(document.getElementById('h3Slider').value);
        const h4 = parseInt(document.getElementById('h4Slider').value);
        const h5 = parseInt(document.getElementById('h5Slider').value);
        
        document.getElementById('h1Val').textContent = h1;
        document.getElementById('h2Val').textContent = h2;
        document.getElementById('h3Val').textContent = h3;
        document.getElementById('h4Val').textContent = h4;
        document.getElementById('h5Val').textContent = h5;
        
        drawTimbreWave(h1, h2, h3, h4, h5);
    }
    
    function drawTimbreWave(h1, h2, h3, h4, h5) {
        const width = timbreCanvas.width = timbreCanvas.parentElement.clientWidth - 40;
        const height = timbreCanvas.height;
        
        timbreCtx.fillStyle = '#fff';
        timbreCtx.fillRect(0, 0, width, height);
        
        // ã‚°ãƒªãƒƒãƒ‰æç”»
        timbreCtx.strokeStyle = '#eee';
        timbreCtx.lineWidth = 1;
        for (let i = 0; i <= 10; i++) {
            const x = (width / 10) * i;
            timbreCtx.beginPath();
            timbreCtx.moveTo(x, 0);
            timbreCtx.lineTo(x, height);
            timbreCtx.stroke();
        }
        timbreCtx.beginPath();
        timbreCtx.moveTo(0, height / 2);
        timbreCtx.lineTo(width, height / 2);
        timbreCtx.stroke();
        
        // åˆæˆæ³¢æç”»
        timbreCtx.strokeStyle = '#667eea';
        timbreCtx.lineWidth = 3;
        timbreCtx.beginPath();
        
        const total = (h1 + h2 + h3 + h4 + h5) || 1;
        const amp = height * 0.4;
        
        for (let x = 0; x < width; x++) {
            const t = (x / width) * 4 * Math.PI;
            let y = 0;
            y += (h1 / total) * Math.sin(t);
            y += (h2 / total) * Math.sin(2 * t);
            y += (h3 / total) * Math.sin(3 * t);
            y += (h4 / total) * Math.sin(4 * t);
            y += (h5 / total) * Math.sin(5 * t);
            
            const screenY = height / 2 - y * amp;
            if (x === 0) {
                timbreCtx.moveTo(x, screenY);
            } else {
                timbreCtx.lineTo(x, screenY);
            }
        }
        timbreCtx.stroke();
        
        // ãƒ©ãƒ™ãƒ«
        timbreCtx.fillStyle = '#666';
        timbreCtx.font = '12px sans-serif';
        timbreCtx.fillText('åˆæˆæ³¢å½¢', 10, 20);
    }
    
    function setTimbrePreset(preset) {
        // ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
        document.querySelectorAll('.preset-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
        
        let values = [100, 0, 0, 0, 0];
        switch (preset) {
            case 'sine':
                values = [100, 0, 0, 0, 0];
                break;
            case 'clarinet':
                values = [100, 0, 75, 0, 50];
                break;
            case 'trumpet':
                values = [100, 80, 60, 40, 20];
                break;
            case 'organ':
                values = [100, 50, 33, 25, 20];
                break;
        }
        
        document.getElementById('h1Slider').value = values[0];
        document.getElementById('h2Slider').value = values[1];
        document.getElementById('h3Slider').value = values[2];
        document.getElementById('h4Slider').value = values[3];
        document.getElementById('h5Slider').value = values[4];
        
        updateTimbre();
    }
    
    // åˆæœŸæç”»
    updateTimbre();
    
    // ========================================
    // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆWeb Audio APIï¼‰
    // ========================================
    const physicsCanvas = document.getElementById('physicsCanvas');
    const physicsCtx = physicsCanvas.getContext('2d');
    const graphCanvas = document.getElementById('graphCanvas');
    const graphCtx = graphCanvas.getContext('2d');
    
    let audioContext = null;
    let oscillator = null;
    let gainNode = null;
    let isPlaying = false;
    let animationId = null;
    let phase = 0;
    
    const SOUND_SPEED = 340; // éŸ³é€Ÿ m/s
    
    function initSimulation() {
        resizeCanvases();
        drawWave();
        updateInfo();
    }
    
    function resizeCanvases() {
        physicsCanvas.width = physicsCanvas.parentElement.clientWidth;
        physicsCanvas.height = 250;
        graphCanvas.width = graphCanvas.parentElement.clientWidth - 30;
        graphCanvas.height = 200;
    }
    
    function getWaveValue(t, waveform) {
        switch (waveform) {
            case 'sine':
                return Math.sin(t);
            case 'square':
                return Math.sin(t) > 0 ? 1 : -1;
            case 'sawtooth':
                return 2 * ((t / (2 * Math.PI)) % 1) - 1;
            case 'triangle':
                const p = (t / (2 * Math.PI)) % 1;
                return 4 * Math.abs(p - 0.5) - 1;
            default:
                return Math.sin(t);
        }
    }
    
    function drawWave() {
        const freq = parseFloat(document.getElementById('freqSlider').value);
        const amp = parseFloat(document.getElementById('ampSlider').value);
        const waveform = document.getElementById('waveformSelect').value;
        
        // ç‰©ç†Canvasã®æç”»ï¼ˆç¸¦æ³¢ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼‰
        const pWidth = physicsCanvas.width;
        const pHeight = physicsCanvas.height;
        
        physicsCtx.fillStyle = '#f8f9fa';
        physicsCtx.fillRect(0, 0, pWidth, pHeight);
        
        // ã‚¿ã‚¤ãƒˆãƒ«
        physicsCtx.fillStyle = '#333';
        physicsCtx.font = 'bold 14px sans-serif';
        physicsCtx.fillText('ç¸¦æ³¢ã¨ã—ã¦ã®éŸ³æ³¢ï¼ˆç©ºæ°—åˆ†å­ã®ç–å¯†ï¼‰', 10, 25);
        
        // ç²’å­æç”»
        const numParticles = 60;
        const baseSpacing = pWidth / (numParticles + 1);
        const particleY = pHeight / 2 + 20;
        
        for (let i = 0; i < numParticles; i++) {
            const baseX = baseSpacing * (i + 1);
            const displacement = amp * 20 * getWaveValue(phase + (i / numParticles) * 4 * Math.PI, waveform);
            const x = baseX + displacement;
            
            // å¯†åº¦ã«ã‚ˆã‚‹è‰²ã®å¤‰åŒ–
            const nextDisp = amp * 20 * getWaveValue(phase + ((i + 1) / numParticles) * 4 * Math.PI, waveform);
            const density = (displacement - nextDisp) / 40;
            const colorVal = Math.floor(128 - density * 100);
            
            physicsCtx.beginPath();
            physicsCtx.arc(x, particleY, 6, 0, 2 * Math.PI);
            physicsCtx.fillStyle = `rgb(${colorVal}, ${colorVal}, ${Math.min(255, colorVal + 50)})`;
            physicsCtx.fill();
        }
        
        // å‡¡ä¾‹
        physicsCtx.font = '12px sans-serif';
        physicsCtx.fillStyle = '#666';
        physicsCtx.fillText('â† ç–ï¼ˆåˆ†å­ãŒã¾ã°ã‚‰ï¼‰', 20, pHeight - 20);
        physicsCtx.fillText('å¯†ï¼ˆåˆ†å­ãŒå¯†é›†ï¼‰â†’', pWidth - 150, pHeight - 20);
        
        // ã‚°ãƒ©ãƒ•Canvasï¼ˆæ¨ªæ³¢ã¨ã—ã¦å¯è¦–åŒ–ï¼‰
        const gWidth = graphCanvas.width;
        const gHeight = graphCanvas.height;
        
        graphCtx.fillStyle = '#fff';
        graphCtx.fillRect(0, 0, gWidth, gHeight);
        
        // ã‚°ãƒªãƒƒãƒ‰
        graphCtx.strokeStyle = '#eee';
        graphCtx.lineWidth = 1;
        for (let i = 0; i <= 10; i++) {
            const x = (gWidth / 10) * i;
            graphCtx.beginPath();
            graphCtx.moveTo(x, 0);
            graphCtx.lineTo(x, gHeight);
            graphCtx.stroke();
        }
        graphCtx.strokeStyle = '#ccc';
        graphCtx.beginPath();
        graphCtx.moveTo(0, gHeight / 2);
        graphCtx.lineTo(gWidth, gHeight / 2);
        graphCtx.stroke();
        
        // æ³¢å½¢æç”»
        graphCtx.strokeStyle = '#667eea';
        graphCtx.lineWidth = 3;
        graphCtx.beginPath();
        
        const waveAmp = (gHeight / 2 - 20) * amp;
        
        for (let x = 0; x < gWidth; x++) {
            const t = phase + (x / gWidth) * 4 * Math.PI;
            const y = gHeight / 2 - getWaveValue(t, waveform) * waveAmp;
            
            if (x === 0) {
                graphCtx.moveTo(x, y);
            } else {
                graphCtx.lineTo(x, y);
            }
        }
        graphCtx.stroke();
        
        // ãƒ©ãƒ™ãƒ«
        graphCtx.fillStyle = '#333';
        graphCtx.font = '12px sans-serif';
        graphCtx.fillText('å¤‰ä½', 10, 15);
        graphCtx.fillText('æ™‚é–“ â†’', gWidth - 60, gHeight - 10);
    }
    
    function updateInfo() {
        const freq = parseFloat(document.getElementById('freqSlider').value);
        const period = 1000 / freq; // ms
        const wavelength = SOUND_SPEED / freq; // m
        
        document.getElementById('freqInfo').textContent = freq + ' Hz';
        document.getElementById('periodInfo').textContent = period.toFixed(2) + ' ms';
        document.getElementById('wavelengthInfo').textContent = wavelength.toFixed(2) + ' m';
    }
    
    function animate() {
        phase += 0.1;
        drawWave();
        animationId = requestAnimationFrame(animate);
    }
    
    function startSound() {
        if (isPlaying) return;
        
        const freq = parseFloat(document.getElementById('freqSlider').value);
        const amp = parseFloat(document.getElementById('ampSlider').value);
        const waveform = document.getElementById('waveformSelect').value;
        
        // AudioContextä½œæˆ
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
        oscillator = audioContext.createOscillator();
        gainNode = audioContext.createGain();
        
        oscillator.type = waveform;
        oscillator.frequency.setValueAtTime(freq, audioContext.currentTime);
        gainNode.gain.setValueAtTime(amp * 0.3, audioContext.currentTime);
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        oscillator.start();
        
        isPlaying = true;
        document.getElementById('startBtn').style.display = 'none';
        document.getElementById('stopBtn').style.display = 'block';
        
        animate();
    }
    
    function stopSound() {
        if (!isPlaying) return;
        
        if (oscillator) {
            oscillator.stop();
            oscillator.disconnect();
        }
        if (gainNode) {
            gainNode.disconnect();
        }
        if (audioContext) {
            audioContext.close();
        }
        
        if (animationId) {
            cancelAnimationFrame(animationId);
        }
        
        oscillator = null;
        gainNode = null;
        audioContext = null;
        isPlaying = false;
        
        document.getElementById('startBtn').style.display = 'block';
        document.getElementById('stopBtn').style.display = 'none';
    }
    
    function resetSimulation() {
        stopSound();
        
        document.getElementById('freqSlider').value = 440;
        document.getElementById('ampSlider').value = 0.5;
        document.getElementById('waveformSelect').value = 'sine';
        
        document.getElementById('freqDisplay').textContent = '440 Hz';
        document.getElementById('ampDisplay').textContent = '0.5';
        
        phase = 0;
        updateInfo();
        drawWave();
    }
    
    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
    document.getElementById('freqSlider').addEventListener('input', function() {
        const val = this.value;
        document.getElementById('freqDisplay').textContent = val + ' Hz';
        updateInfo();
        
        if (isPlaying && oscillator) {
            oscillator.frequency.setValueAtTime(parseFloat(val), audioContext.currentTime);
        }
        if (!isPlaying) drawWave();
    });
    
    document.getElementById('ampSlider').addEventListener('input', function() {
        const val = this.value;
        document.getElementById('ampDisplay').textContent = val;
        
        if (isPlaying && gainNode) {
            gainNode.gain.setValueAtTime(parseFloat(val) * 0.3, audioContext.currentTime);
        }
        if (!isPlaying) drawWave();
    });
    
    document.getElementById('waveformSelect').addEventListener('change', function() {
        if (isPlaying && oscillator) {
            oscillator.type = this.value;
        }
        if (!isPlaying) drawWave();
    });
    
    document.getElementById('startBtn').addEventListener('click', startSound);
    document.getElementById('stopBtn').addEventListener('click', stopSound);
    document.getElementById('resetBtn').addEventListener('click', resetSimulation);
    
    // ãƒªã‚µã‚¤ã‚ºå¯¾å¿œ
    window.addEventListener('resize', function() {
        resizeCanvases();
        drawWave();
        
        // éŸ³è‰²ãƒ„ãƒ¼ãƒ«ã‚‚å†æç”»
        updateTimbre();
    });
    
    // åˆæœŸåŒ–
    window.addEventListener('load', function() {
        initSimulation();
    });
    </script>
</body>
</html>