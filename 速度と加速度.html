<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜æ ¡ç‰©ç† - é€Ÿåº¦ã¨åŠ é€Ÿåº¦</title>
    <script>
      window.MathJax = {
      tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
     }
     };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .back-link {
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 10px;
        }
        h1 {
            color: #333;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .tab-btn {
            flex: 1;
            min-width: 150px;
            padding: 12px 20px;
            border: none;
            background: #f0f0f0;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
            transition: all 0.3s;
        }
        .tab-btn.active {
            background: #667eea;
            color: white;
        }
        .tab-btn:hover {
            background: #8899f0;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        h2 {
            color: #667eea;
            margin-bottom: 15px;
        }
        h3 {
            color: #555;
            margin: 25px 0 15px 0;
            padding-bottom: 5px;
            border-bottom: 2px solid #667eea;
        }
        .pdf-placeholder {
            background: #f9f9f9;
            padding: 40px;
            text-align: center;
            border-radius: 5px;
            color: #666;
        }
        
        /* è§£èª¬ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .lecture-content {
            line-height: 1.8;
            color: #333;
        }
        .lecture-content p {
            margin-bottom: 15px;
        }
        .point-box {
            background: linear-gradient(135deg, #e8f4fd 0%, #e0e7ff 100%);
            border-left: 5px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }
        .point-box h4 {
            color: #667eea;
            margin-bottom: 10px;
        }
        .formula-box {
            background: #fff9e6;
            border: 2px solid #f0c36d;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            text-align: center;
        }
        .warning-box {
            background: #fff0f0;
            border-left: 5px solid #e74c3c;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }
        .warning-box h4 {
            color: #e74c3c;
            margin-bottom: 10px;
        }
        .example-box {
            background: #f0fff0;
            border: 2px solid #27ae60;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }
        .example-box h4 {
            color: #27ae60;
            margin-bottom: 10px;
        }
        
        /* å•é¡Œç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .problem-section {
            margin-bottom: 30px;
        }
        .problem-section h3 {
            color: #667eea;
        }
        details {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }
        summary {
            cursor: pointer;
            font-weight: bold;
            color: #667eea;
        }
        details[open] summary {
            margin-bottom: 15px;
        }
        
        /* ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        #sim-container {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        #physicsCanvas {
            display: block;
            width: 100%;
            background: white;
            border-radius: 5px;
            border: 2px solid #ddd;
            cursor: grab;
        }
        #physicsCanvas:active {
            cursor: grabbing;
        }
        .sim-controls {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
        }
        .control-group {
            margin-bottom: 20px;
        }
        .control-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        .control-group input[type="range"] {
            width: 100%;
            margin: 10px 0;
        }
        .value-display {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 5px;
            font-weight: bold;
            min-width: 100px;
            text-align: center;
        }
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .sim-button {
            flex: 1;
            min-width: 120px;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .sim-button.start {
            background: #4CAF50;
            color: white;
        }
        .sim-button.start:hover {
            background: #45a049;
        }
        .sim-button.reset {
            background: #f44336;
            color: white;
        }
        .sim-button.reset:hover {
            background: #da190b;
        }
        .graph-container {
            margin-top: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #ddd;
        }
        .graph-container h3 {
            color: #667eea;
            margin-bottom: 10px;
            border: none;
        }
        #graphCanvas {
            display: block;
            width: 100%;
            border: 1px solid #eee;
        }
        
        /* ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æƒ…å ±è¡¨ç¤º */
        .sim-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .info-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #ddd;
            text-align: center;
        }
        .info-card.average {
            border-color: #3498db;
        }
        .info-card.instant {
            border-color: #e74c3c;
        }
        .info-card h4 {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }
        .info-card .value {
            font-size: 24px;
            font-weight: bold;
        }
        .info-card.average .value {
            color: #3498db;
        }
        .info-card.instant .value {
            color: #e74c3c;
        }
        .info-card.velocity {
            border-color: #3498db;
            transition: border-color 0.3s;
        }
        .info-card.velocity.instant-mode {
            border-color: #e67e22;
        }
        .info-card.velocity .value {
            color: #3498db;
            transition: color 0.3s;
        }
        .info-card.velocity.instant-mode .value {
            color: #e67e22;
        }
        .info-card.velocity h4 {
            transition: color 0.3s;
        }
        .info-card.velocity.instant-mode h4 {
            color: #e67e22;
        }
        
        .legend-color.secant {
            background: #3498db;
            transition: background 0.3s;
        }
        .legend-color.secant.instant-mode {
            background: #e67e22;
        }
        .info-card .unit {
            font-size: 14px;
            color: #999;
        }
        
        .sim-instruction {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            color: #2980b9;
            font-weight: bold;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legend-color {
            width: 30px;
            height: 4px;
            border-radius: 2px;
        }
        .legend-color.curve {
            background: #333;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            header, .container {
                padding: 15px;
            }
            .tab-btn {
                min-width: 100px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <header>
        <a href="index.html" class="back-link">â† ç›®æ¬¡ã«æˆ»ã‚‹</a>
        <h1>é€Ÿåº¦ã¨åŠ é€Ÿåº¦</h1>
    </header>
    <div class="container">
        
        <div class="tabs">
            <button class="tab-btn active" onclick="openTab('lecture')">è§£èª¬ç·¨</button>
            <button class="tab-btn" onclick="openTab('problem')">å•é¡Œç·¨</button>
            <button class="tab-btn" onclick="openTab('simulation')">ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
        </div>
        
        <div id="lecture" class="tab-content active">
            <h2>é€Ÿåº¦ã¨åŠ é€Ÿåº¦ã®åŸºç¤</h2>
            
            <div class="lecture-content">
                <h3>1. é€Ÿåº¦ã¨ã¯ä½•ã‹</h3>
                
                <p>
                    å°å­¦æ ¡ã§ç¿’ã£ãŸã€Œé€Ÿã•ã€ã¯ã€ç§»å‹•è·é›¢ã‚’æ™‚é–“ã§å‰²ã£ãŸã‚‚ã®ã§ã—ãŸã€‚ä¾‹ãˆã°ã€800mã‚’10åˆ†ã§æ­©ã‘ã°ã€Œåˆ†é€Ÿ80mã€ã§ã™ã€‚
                    ã—ã‹ã—ã€ã“ã‚Œã¯ã€Œå¹³å‡ã€ã®é€Ÿã•ã§ã‚ã‚Šã€å®Ÿéš›ã«ã¯æ­©ãé€Ÿã•ã¯ä¸€å®šã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
                </p>
                
                <div class="point-box">
                    <h4>ğŸ“Œ ç‰©ç†ã«ãŠã‘ã‚‹é€Ÿåº¦ã®è€ƒãˆæ–¹</h4>
                    <p>ç‰©ç†ã§ã¯ã€Œã‚ã‚‹ç¬é–“ã€ã§ã®å‹•ãã‚’æ•°å¼ã§èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚ãã®ãŸã‚ã«ã€æ™‚é–“é–“éš”ã‚’ã©ã‚“ã©ã‚“çŸ­ãã—ã¦ã„ãè€ƒãˆæ–¹ãŒé‡è¦ã§ã™ã€‚</p>
                </div>
                
                <p>
                    ä½ç½® $\vec{r}$ ãŒæ™‚åˆ» $t_1$ ã‹ã‚‰ $t_2$ ã®é–“ã« $\Delta \vec{r}$ ã ã‘å¤‰åŒ–ã—ãŸã¨ãã€é€Ÿåº¦ã¯æ¬¡ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¾ã™ï¼š
                </p>
                
                <div class="formula-box">
                    <p><strong>é€Ÿåº¦ã®å®šç¾©</strong></p>
                    $$\vec{v} = \frac{\Delta \vec{r}}{\Delta t} = \frac{\vec{r}_2 - \vec{r}_1}{t_2 - t_1}$$
                </div>
                
                <p>
                    ã“ã“ã§é‡è¦ãªã®ã¯ã€<strong>æ™‚é–“é–“éš” $\Delta t$ ã®å–ã‚Šæ–¹</strong>ã«ã‚ˆã£ã¦æ„å‘³ãŒå¤‰ã‚ã‚‹ã“ã¨ã§ã™ï¼š
                </p>
                
                <div class="example-box">
                    <h4>ğŸ’¡ å¹³å‡ã®é€Ÿåº¦ã¨ç¬é–“ã®é€Ÿåº¦</h4>
                    <p><strong>æ™‚é–“é–“éš”ãŒé•·ã„å ´åˆ</strong> â†’ å¹³å‡ã®é€Ÿåº¦ï¼ˆå¤§ã¾ã‹ãªå‹•ãã®æŠŠæ¡ï¼‰</p>
                    <p><strong>æ™‚é–“é–“éš”ãŒçŸ­ã„å ´åˆ</strong> â†’ ç¬é–“ã®é€Ÿåº¦ï¼ˆãã®ç¬é–“ã®æ­£ç¢ºãªå‹•ãï¼‰</p>
                    <p>å¼ã®å½¢ã¯åŒã˜ã§ã‚‚ã€$\Delta t$ ã‚’é™ã‚Šãªãå°ã•ãã™ã‚‹ã¨ã€Œç¬é–“ã®é€Ÿåº¦ã€ã«ãªã‚Šã¾ã™ã€‚</p>
                </div>
                
                <h3>2. ã‚°ãƒ©ãƒ•ã‹ã‚‰é€Ÿåº¦ã‚’èª­ã¿å–ã‚‹</h3>
                
                <p>
                    $x$-$t$ ã‚°ãƒ©ãƒ•ï¼ˆä½ç½®-æ™‚é–“ã‚°ãƒ©ãƒ•ï¼‰ã‹ã‚‰é€Ÿåº¦ã‚’èª­ã¿å–ã‚‹æ–¹æ³•ã‚’ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚
                </p>
                
                <div class="point-box">
                    <h4>ğŸ“Œ x-tã‚°ãƒ©ãƒ•ã®å‚¾ãã¨é€Ÿåº¦</h4>
                    <p><strong>2ç‚¹ã‚’çµã¶ç›´ç·šã®å‚¾ã</strong> = å¹³å‡ã®é€Ÿåº¦</p>
                    <p><strong>æ›²ç·šä¸Šã®ã‚ã‚‹ç‚¹ã«ãŠã‘ã‚‹æ¥ç·šã®å‚¾ã</strong> = ç¬é–“ã®é€Ÿåº¦</p>
                    <p>2ç‚¹ã‚’ã©ã‚“ã©ã‚“è¿‘ã¥ã‘ã¦ã„ãã¨ã€å‰²ç·šï¼ˆ2ç‚¹ã‚’çµã¶ç›´ç·šï¼‰ãŒæ¥ç·šã«è¿‘ã¥ãã¾ã™ã€‚ã“ã‚ŒãŒã€Œç¬é–“ã®é€Ÿåº¦ã€ã®æ¦‚å¿µã§ã™ã€‚</p>
                </div>
                
                <p>
                    ä¸‹ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ–ã§ã€å®Ÿéš›ã«ã“ã®é–¢ä¿‚ã‚’ç¢ºã‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ï¼
                </p>
                
                <h3>3. åŠ é€Ÿåº¦ã¨ã¯ä½•ã‹</h3>
                
                <p>
                    ç¾å®Ÿã§ã¯ä¸€å®šã®é€Ÿåº¦ã§å‹•ãã“ã¨ã¯ã»ã¨ã‚“ã©ã‚ã‚Šã¾ã›ã‚“ã€‚è»Šã®ã‚ˆã†ã«åŠ é€Ÿã—ãŸã‚Šæ¸›é€Ÿã—ãŸã‚Šã—ã¾ã™ã€‚
                    ã“ã®ã€Œé€Ÿåº¦ã®å¤‰åŒ–ã®å‰²åˆã€ã‚’<strong>åŠ é€Ÿåº¦</strong>ã¨ã„ã„ã¾ã™ã€‚
                </p>
                
                <div class="formula-box">
                    <p><strong>åŠ é€Ÿåº¦ã®å®šç¾©</strong></p>
                    $$\vec{a} = \frac{\Delta \vec{v}}{\Delta t} = \frac{\vec{v}_2 - \vec{v}_1}{t_2 - t_1}$$
                    <p>åŠ é€Ÿåº¦ã¯ã€Œ1ç§’ã‚ãŸã‚Šã®é€Ÿåº¦å¤‰åŒ–ã€ã‚’è¡¨ã—ã¾ã™ã€‚</p>
                </div>
                
                <p>
                    é€Ÿåº¦ã¨åŒæ§˜ã«ã€æ™‚é–“é–“éš”ã«ã‚ˆã£ã¦ã€Œå¹³å‡ã®åŠ é€Ÿåº¦ã€ã¨ã€Œç¬é–“ã®åŠ é€Ÿåº¦ã€ãŒã‚ã‚Šã¾ã™ã€‚
                </p>
                
                <h3>4. é€Ÿåº¦ãƒ»åŠ é€Ÿåº¦ã¯ãƒ™ã‚¯ãƒˆãƒ«é‡</h3>
                
                <div class="warning-box">
                    <h4>âš ï¸ é‡è¦ï¼šãƒ™ã‚¯ãƒˆãƒ«é‡ã§ã‚ã‚‹ã“ã¨ã®æ„å‘³</h4>
                    <p>
                        é€Ÿåº¦ã‚‚åŠ é€Ÿåº¦ã‚‚<strong>ãƒ™ã‚¯ãƒˆãƒ«é‡</strong>ã§ã™ã€‚ã¤ã¾ã‚Šã€å¤§ãã•ã ã‘ã§ãªã<strong>å‘ã</strong>ã‚‚æŒã£ã¦ã„ã¾ã™ã€‚
                    </p>
                    <p>
                        ã“ã‚Œã¯éå¸¸ã«é‡è¦ã§ã€ã€Œæ¸›é€Ÿã—ã¦ã„ã‚‹ï¼è² ã®åŠ é€Ÿåº¦ã€ã¨ã¯é™ã‚Šã¾ã›ã‚“ã€‚
                        ä¾‹ãˆã°ã€è² ã®æ–¹å‘ã«é€²ã‚“ã§ã„ã‚‹ç‰©ä½“ãŒæ¸›é€Ÿã™ã‚‹ã¨ãã€åŠ é€Ÿåº¦ã¯æ­£ã«ãªã‚Šã¾ã™ã€‚
                    </p>
                </div>
                
                <div class="example-box">
                    <h4>ğŸ’¡ å…·ä½“ä¾‹ã§è€ƒãˆã‚‹</h4>
                    <p><strong>ä¾‹1ï¼š</strong>æ­£ã®å‘ãã«é€Ÿåº¦ $+5$ m/s ã§å‹•ãç‰©ä½“ãŒã€$+3$ m/s ã«ãªã£ãŸ</p>
                    <p>â†’ é€Ÿåº¦å¤‰åŒ– $\Delta v = 3 - 5 = -2$ m/s â†’ åŠ é€Ÿåº¦ã¯è² ï¼ˆæ¸›é€Ÿï¼‰</p>
                    <br>
                    <p><strong>ä¾‹2ï¼š</strong>è² ã®å‘ãã«é€Ÿåº¦ $-5$ m/s ã§å‹•ãç‰©ä½“ãŒã€$-3$ m/s ã«ãªã£ãŸ</p>
                    <p>â†’ é€Ÿåº¦å¤‰åŒ– $\Delta v = -3 - (-5) = +2$ m/s â†’ åŠ é€Ÿåº¦ã¯æ­£ï¼ˆã§ã‚‚æ¸›é€Ÿã—ã¦ã„ã‚‹ï¼ï¼‰</p>
                </div>
                
                <div class="warning-box">
                    <h4>âš ï¸ ãƒ™ã‚¯ãƒˆãƒ«ã®åˆæˆã«æ³¨æ„</h4>
                    <p>
                        é€Ÿåº¦ã‚„åŠ é€Ÿåº¦ã‚’åˆæˆã™ã‚‹ã¨ãã¯ã€å˜ç´”ãªè¶³ã—ç®—ã§ã¯ãªã<strong>ãƒ™ã‚¯ãƒˆãƒ«ã®åˆæˆ</strong>ãŒå¿…è¦ã§ã™ã€‚
                        å‘ããŒç•°ãªã‚‹å ´åˆã¯ã€æˆåˆ†ã«åˆ†è§£ã—ã¦è¨ˆç®—ã™ã‚‹ã‹ã€å¹³è¡Œå››è¾ºå½¢ã®æ³•å‰‡ã‚’ä½¿ã„ã¾ã™ã€‚
                    </p>
                    <p>
                        ä¾‹ãˆã°ã€åŒ—å‘ã 3 m/s ã¨æ±å‘ã 4 m/s ã®åˆæˆé€Ÿåº¦ã¯ã€$7$ m/s ã§ã¯ãªã $\sqrt{3^2 + 4^2} = 5$ m/s ã§ã™ã€‚
                    </p>
                </div>
                
                <h3>5. v-tã‚°ãƒ©ãƒ•ã®èª­ã¿å–ã‚Š</h3>
                
                <p>
                    $v$-$t$ ã‚°ãƒ©ãƒ•ï¼ˆé€Ÿåº¦-æ™‚é–“ã‚°ãƒ©ãƒ•ï¼‰ã‹ã‚‰ã‚‚é‡è¦ãªæƒ…å ±ãŒèª­ã¿å–ã‚Œã¾ã™ï¼š
                </p>
                
                <div class="point-box">
                    <h4>ğŸ“Œ v-tã‚°ãƒ©ãƒ•ã®ãƒã‚¤ãƒ³ãƒˆ</h4>
                    <p><strong>ã‚°ãƒ©ãƒ•ã®å‚¾ã</strong> = åŠ é€Ÿåº¦</p>
                    <p><strong>ã‚°ãƒ©ãƒ•ã¨æ™‚é–“è»¸ã§å›²ã¾ã‚ŒãŸé¢ç©</strong> = å¤‰ä½ï¼ˆç§»å‹•è·é›¢ã§ã¯ãªã„ï¼ï¼‰</p>
                    <p>â€» æ™‚é–“è»¸ã‚ˆã‚Šä¸‹ã®é¢ç©ã¯è² ã®å¤‰ä½ã¨ã—ã¦è¨ˆç®—ã—ã¾ã™ã€‚</p>
                </div>
                
                <h3>æˆæ¥­è³‡æ–™</h3>
                <iframe src="https://drive.google.com/file/d/1rd3AUHNkj-NLM0IEztEdsiVOdPwxD6EA/preview" width="100%" height="500"></iframe>
            </div>
        </div>
        
        <div id="problem" class="tab-content">
            <h2>ç¢ºèªå•é¡Œ</h2>
            
            <div class="problem-section">
                <h3>å•é¡Œ1ï¼šx-tã‚°ãƒ©ãƒ•ã‹ã‚‰é€Ÿåº¦ã‚’æ±‚ã‚ã‚‹</h3>
                <p>
                    å³å›³ã¯ã€$x$ è»¸ä¸Šã‚’é‹å‹•ã™ã‚‹ç‰©ä½“ã®ä½ç½® $x$ [m] ã¨æ™‚é–“ $t$ [s] ã®é–¢ä¿‚ã‚’è¡¨ã™ $x$-$t$ å›³ã§ã‚ã‚‹ã€‚
                    æ›²ç·šã¯ $x = t^2$ ã§è¡¨ã•ã‚Œã‚‹æ”¾ç‰©ç·šã§ã‚ã‚‹ã€‚
                </p>
                <p>ï¼ˆ1ï¼‰$t = 0$ s ã‹ã‚‰ $t = 4.0$ s ã¾ã§ã®å¹³å‡ã®é€Ÿåº¦ã‚’æ±‚ã‚ã‚ˆã€‚</p>
                <p>ï¼ˆ2ï¼‰$t = 2.0$ s ã«ãŠã‘ã‚‹ç¬é–“ã®é€Ÿåº¦ã‚’æ±‚ã‚ã‚ˆã€‚</p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p><strong>ï¼ˆ1ï¼‰å¹³å‡ã®é€Ÿåº¦</strong></p>
                    <p>
                        å¹³å‡ã®é€Ÿåº¦ã¯ã€2ç‚¹é–“ã®å¤‰ä½ã‚’æ™‚é–“ã§å‰²ã£ãŸã‚‚ã®ã§ã™ã€‚
                    </p>
                    <p>
                        $t = 0$ s ã®ã¨ã $x = 0^2 = 0$ m<br>
                        $t = 4.0$ s ã®ã¨ã $x = 4.0^2 = 16$ m
                    </p>
                    <p>
                        $$\bar{v} = \frac{\Delta x}{\Delta t} = \frac{16 - 0}{4.0 - 0} = \frac{16}{4.0} = 4.0 \text{ m/s}$$
                    </p>
                    <p><strong>ç­”ãˆï¼š4.0 m/s</strong></p>
                    <br>
                    <p><strong>ï¼ˆ2ï¼‰ç¬é–“ã®é€Ÿåº¦</strong></p>
                    <p>
                        $x = t^2$ ã‚’æ™‚é–“ $t$ ã§å¾®åˆ†ã™ã‚‹ã¨ã€ç¬é–“ã®é€Ÿåº¦ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚
                    </p>
                    <p>
                        $$v = \frac{dx}{dt} = 2t$$
                    </p>
                    <p>
                        $t = 2.0$ s ã‚’ä»£å…¥ã™ã‚‹ã¨ï¼š
                        $$v = 2 \times 2.0 = 4.0 \text{ m/s}$$
                    </p>
                    <p><strong>ç­”ãˆï¼š4.0 m/s</strong></p>
                    <p>
                        â€» ã“ã®å•é¡Œã§ã¯å¶ç„¶ã€å¹³å‡é€Ÿåº¦ã¨ç¬é–“é€Ÿåº¦ãŒåŒã˜å€¤ã«ãªã‚Šã¾ã—ãŸã€‚
                        ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ç¢ºèªã™ã‚‹ã¨ã€$t = 2.0$ s ã¯ $t = 0$ s ã¨ $t = 4.0$ s ã®ã¡ã‚‡ã†ã©ä¸­é–“ã§ã‚ã‚Šã€
                        æ”¾ç‰©ç·šã§ã¯ã“ã®ã‚ˆã†ãªå¯¾ç§°æ€§ãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚
                    </p>
                </details>
            </div>
            
            <div class="problem-section">
                <h3>å•é¡Œ2ï¼šåŠ é€Ÿåº¦ã®æ­£è² ã¨é‹å‹•ã®å‘ã</h3>
                <p>
                    $x$ è»¸ä¸Šã‚’é‹å‹•ã™ã‚‹ç‰©ä½“ã«ã¤ã„ã¦ã€ä»¥ä¸‹ã®å„å ´åˆã«ãŠã‘ã‚‹åŠ é€Ÿåº¦ã®æ­£è² ã‚’ç­”ãˆã‚ˆã€‚
                    ã¾ãŸã€ç‰©ä½“ãŒã€ŒåŠ é€Ÿã€ã—ã¦ã„ã‚‹ã‹ã€Œæ¸›é€Ÿã€ã—ã¦ã„ã‚‹ã‹ã‚‚ç­”ãˆã‚ˆã€‚
                </p>
                <p>ï¼ˆ1ï¼‰é€Ÿåº¦ãŒ $+3$ m/s ã‹ã‚‰ $+7$ m/s ã«å¤‰åŒ–ã—ãŸã€‚</p>
                <p>ï¼ˆ2ï¼‰é€Ÿåº¦ãŒ $+5$ m/s ã‹ã‚‰ $+2$ m/s ã«å¤‰åŒ–ã—ãŸã€‚</p>
                <p>ï¼ˆ3ï¼‰é€Ÿåº¦ãŒ $-6$ m/s ã‹ã‚‰ $-2$ m/s ã«å¤‰åŒ–ã—ãŸã€‚</p>
                <p>ï¼ˆ4ï¼‰é€Ÿåº¦ãŒ $-2$ m/s ã‹ã‚‰ $-8$ m/s ã«å¤‰åŒ–ã—ãŸã€‚</p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p>åŠ é€Ÿåº¦ã®ç¬¦å·ã¯ $a = \frac{\Delta v}{\Delta t}$ ã§æ±ºã¾ã‚Šã¾ã™ã€‚$\Delta t > 0$ ãªã®ã§ã€$\Delta v$ ã®ç¬¦å·ã§åˆ¤æ–­ã§ãã¾ã™ã€‚</p>
                    <p>ã€ŒåŠ é€Ÿãƒ»æ¸›é€Ÿã€ã¯é€Ÿã•ï¼ˆé€Ÿåº¦ã®çµ¶å¯¾å€¤ï¼‰ãŒå¢—ãˆã‚‹ã‹æ¸›ã‚‹ã‹ã§åˆ¤æ–­ã—ã¾ã™ã€‚</p>
                    <br>
                    <p><strong>ï¼ˆ1ï¼‰</strong>$\Delta v = 7 - 3 = +4$ m/s â†’ <strong>åŠ é€Ÿåº¦ã¯æ­£</strong></p>
                    <p>é€Ÿã•ï¼š$3 â†’ 7$ ã¨å¢—åŠ  â†’ <strong>åŠ é€Ÿ</strong></p>
                    <br>
                    <p><strong>ï¼ˆ2ï¼‰</strong>$\Delta v = 2 - 5 = -3$ m/s â†’ <strong>åŠ é€Ÿåº¦ã¯è² </strong></p>
                    <p>é€Ÿã•ï¼š$5 â†’ 2$ ã¨æ¸›å°‘ â†’ <strong>æ¸›é€Ÿ</strong></p>
                    <br>
                    <p><strong>ï¼ˆ3ï¼‰</strong>$\Delta v = -2 - (-6) = +4$ m/s â†’ <strong>åŠ é€Ÿåº¦ã¯æ­£</strong></p>
                    <p>é€Ÿã•ï¼š$6 â†’ 2$ ã¨æ¸›å°‘ â†’ <strong>æ¸›é€Ÿ</strong>ï¼ˆåŠ é€Ÿåº¦ãŒæ­£ã§ã‚‚æ¸›é€Ÿï¼ï¼‰</p>
                    <br>
                    <p><strong>ï¼ˆ4ï¼‰</strong>$\Delta v = -8 - (-2) = -6$ m/s â†’ <strong>åŠ é€Ÿåº¦ã¯è² </strong></p>
                    <p>é€Ÿã•ï¼š$2 â†’ 8$ ã¨å¢—åŠ  â†’ <strong>åŠ é€Ÿ</strong>ï¼ˆåŠ é€Ÿåº¦ãŒè² ã§ã‚‚åŠ é€Ÿï¼ï¼‰</p>
                    <br>
                    <div class="warning-box">
                        <h4>âš ï¸ ãƒã‚¤ãƒ³ãƒˆ</h4>
                        <p>ã€ŒåŠ é€Ÿåº¦ãŒæ­£ = åŠ é€Ÿã€ã€ŒåŠ é€Ÿåº¦ãŒè²  = æ¸›é€Ÿã€ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼</p>
                        <p>åŠ é€Ÿåº¦ã¨é€Ÿåº¦ãŒ<strong>åŒã˜ç¬¦å·</strong>ãªã‚‰åŠ é€Ÿã€<strong>é€†ã®ç¬¦å·</strong>ãªã‚‰æ¸›é€Ÿã§ã™ã€‚</p>
                    </div>
                </details>
            </div>
            
            <div class="problem-section">
                <h3>å•é¡Œ3ï¼šãƒ™ã‚¯ãƒˆãƒ«ã®åˆæˆ</h3>
                <p>
                    ãƒœãƒ¼ãƒˆãŒé™æ°´ä¸­ã§ã¯æ±å‘ãã« 4.0 m/s ã®é€Ÿã•ã§é€²ã‚€ã“ã¨ãŒã§ãã‚‹ã€‚
                    ã“ã®ãƒœãƒ¼ãƒˆãŒã€å—å‘ãã« 3.0 m/s ã§æµã‚Œã‚‹å·ã‚’æ¨ªæ–­ã™ã‚‹ã¨ãã€
                    å²¸ã‹ã‚‰è¦‹ãŸãƒœãƒ¼ãƒˆã®é€Ÿåº¦ã®å¤§ãã•ã¨å‘ãã‚’æ±‚ã‚ã‚ˆã€‚
                </p>
                
                <details>
                    <summary>è§£ç­”ãƒ»è§£èª¬ã‚’è¦‹ã‚‹</summary>
                    <p>
                        ãƒœãƒ¼ãƒˆã®é€Ÿåº¦ã¨å·ã®æµã‚Œã®é€Ÿåº¦ã‚’ãƒ™ã‚¯ãƒˆãƒ«åˆæˆã—ã¾ã™ã€‚
                    </p>
                    <p>
                        æ±å‘ãã‚’ $x$ è»¸æ­£ã€åŒ—å‘ãã‚’ $y$ è»¸æ­£ã¨ã™ã‚‹ã¨ï¼š<br>
                        ãƒœãƒ¼ãƒˆã®é€Ÿåº¦ï¼š$\vec{v}_{\text{boat}} = (4.0, 0)$ m/s<br>
                        å·ã®æµã‚Œï¼š$\vec{v}_{\text{river}} = (0, -3.0)$ m/s
                    </p>
                    <p>
                        åˆæˆé€Ÿåº¦ï¼š
                        $$\vec{v} = \vec{v}_{\text{boat}} + \vec{v}_{\text{river}} = (4.0, -3.0) \text{ m/s}$$
                    </p>
                    <p>
                        <strong>é€Ÿã•ï¼ˆå¤§ãã•ï¼‰ï¼š</strong>
                        $$|\vec{v}| = \sqrt{4.0^2 + 3.0^2} = \sqrt{16 + 9} = \sqrt{25} = 5.0 \text{ m/s}$$
                    </p>
                    <p>
                        <strong>å‘ãï¼š</strong>æ±ã‹ã‚‰å—ã¸æ¸¬ã£ãŸè§’åº¦ã‚’ $\theta$ ã¨ã™ã‚‹ã¨
                        $$\tan\theta = \frac{3.0}{4.0} = 0.75$$
                        $$\theta = \arctan(0.75) \approx 37Â°$$
                    </p>
                    <p><strong>ç­”ãˆï¼š5.0 m/sã€æ±ã‹ã‚‰å—ã¸ç´„37Â°ã®å‘ã</strong></p>
                    <br>
                    <div class="point-box">
                        <h4>ğŸ“Œ ãƒã‚¤ãƒ³ãƒˆ</h4>
                        <p>é€Ÿåº¦ã¯ãƒ™ã‚¯ãƒˆãƒ«é‡ãªã®ã§ã€å˜ç´”ã« $4.0 + 3.0 = 7.0$ m/s ã¨ã¯ãªã‚Šã¾ã›ã‚“ã€‚</p>
                        <p>ãƒ”ã‚¿ã‚´ãƒ©ã‚¹ã®å®šç†ï¼ˆã¾ãŸã¯ä¸‰å¹³æ–¹ã®å®šç†ï¼‰ã‚’ä½¿ã£ã¦ãƒ™ã‚¯ãƒˆãƒ«åˆæˆã—ã¾ã™ã€‚</p>
                    </div>
                </details>
            </div>
        </div>
        
        <div id="simulation" class="tab-content">
            <h2>å¹³å‡ã®é€Ÿåº¦ã¨ç¬é–“ã®é€Ÿåº¦</h2>
            <p>$x$-$t$ ã‚°ãƒ©ãƒ•ä¸Šã§ã€2ç‚¹Aãƒ»Bã‚’çµã¶ç›´ç·šã®å‚¾ããŒé€Ÿåº¦ã‚’è¡¨ã—ã¾ã™ã€‚æ™‚é–“é–“éš” $\Delta t$ ã‚’å°ã•ãã—ã¦ã„ãã¨ã€å¹³å‡ã®é€Ÿåº¦ãŒç¬é–“ã®é€Ÿåº¦ã«è¿‘ã¥ãã¾ã™ã€‚</p>
            
            <div class="sim-instruction">
                ğŸ–±ï¸ ç‚¹Aãƒ»Bã‚’ãƒ‰ãƒ©ãƒƒã‚°ã€ã¾ãŸã¯ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§å‹•ã‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼<br>
              â€» ã“ã“ã§ã¯  Î”t â‰¤ 0.1 ç§’ã«ãªã‚‹ã¨ã€Œç¬é–“ã®é€Ÿåº¦ã€ã¨è¦‹ãªã—ã¾ã™ã€‚
            </div>
            
            <div id="sim-container">
                <canvas id="physicsCanvas"></canvas>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color curve"></div>
                    <span>x = tÂ² ã®ã‚°ãƒ©ãƒ•</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color secant" id="legendLine"></div>
                    <span id="legendText">2ç‚¹Aãƒ»Bã‚’çµã¶ç›´ç·š</span>
                </div>
            </div>
            
            <div class="sim-info">
                <div class="info-card">
                    <h4>ç‚¹Aã®æ™‚åˆ» t<sub>A</sub></h4>
                    <div class="value" id="tADisplay">2.00</div>
                    <div class="unit">ç§’</div>
                </div>
                <div class="info-card">
                    <h4>ç‚¹Bã®æ™‚åˆ» t<sub>B</sub></h4>
                    <div class="value" id="tBDisplay">4.00</div>
                    <div class="unit">ç§’</div>
                </div>
                <div class="info-card">
                    <h4>æ™‚é–“é–“éš” Î”t</h4>
                    <div class="value" id="dtDisplay">2.00</div>
                    <div class="unit">ç§’</div>
                </div>
                <div class="info-card velocity" id="velocityCard">
                    <h4 id="velocityLabel">å¹³å‡ã®é€Ÿåº¦</h4>
                    <div class="value" id="velocityDisplay">6.00</div>
                    <div class="unit">m/s</div>
                </div>
            </div>
            
            <div class="sim-controls">
                <div class="control-group">
                    <label>ç‚¹Aã®æ™‚åˆ» (t<sub>A</sub>): <span class="value-display" id="t1Display">2.0 s</span></label>
                    <input type="range" id="t1Slider" min="0" max="5" value="2.0" step="0.05">
                </div>
                
                <div class="control-group">
                    <label>ç‚¹Bã®æ™‚åˆ» (t<sub>B</sub>): <span class="value-display" id="t2Display">4.0 s</span></label>
                    <input type="range" id="t2Slider" min="0" max="5" value="4.0" step="0.05">
                </div>
                
                <div class="button-group">
                    <button class="sim-button reset" id="resetBtn">ãƒªã‚»ãƒƒãƒˆ</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
    // --- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ ---
    function openTab(tabName) {
        var contents = document.getElementsByClassName("tab-content");
        for (var i = 0; i < contents.length; i++) {
            contents[i].style.display = "none";
            contents[i].classList.remove("active");
        }
        var buttons = document.getElementsByClassName("tab-btn");
        for (var i = 0; i < buttons.length; i++) {
            buttons[i].classList.remove("active");
        }
        document.getElementById(tabName).style.display = "block";
        document.getElementById(tabName).classList.add("active");
        if (event) {
            event.currentTarget.classList.add("active");
        }
        
        // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ–ãŒé–‹ã‹ã‚ŒãŸã‚‰å†æç”»
        if (tabName === 'simulation') {
            resizeCanvas();
            draw();
        }
    }

    // --- ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ ---
    const canvas = document.getElementById('physicsCanvas');
    const ctx = canvas.getContext('2d');
    
    // ã‚°ãƒ©ãƒ•ã®è¨­å®š
    const margin = { top: 40, right: 40, bottom: 60, left: 70 };
    let graphWidth, graphHeight;
    
    // ç‰©ç†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    let tA = 2.0;  // ç‚¹Aã®æ™‚åˆ»
    let tB = 4.0;  // ç‚¹Bã®æ™‚åˆ»
    
    // ç¬é–“é€Ÿåº¦ã¨ã¿ãªã™é–¾å€¤
    const INSTANT_THRESHOLD = 0.1;
    
    // x = t^2 ã®é–¢æ•°
    function x(t) {
        return t * t;
    }
    
    // ç¬é–“ã®é€Ÿåº¦ï¼ˆå¾®åˆ†ï¼‰: v = 2t
    function instantVelocity(t) {
        return 2 * t;
    }
    
    // ãƒ‰ãƒ©ãƒƒã‚°çŠ¶æ…‹
    let isDragging = false;
    let dragTarget = null; // 'A' or 'B'
    
    // ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›
    function toCanvasX(t) {
        return margin.left + (t / 5) * graphWidth;
    }
    
    function toCanvasY(xVal) {
        return canvas.height - margin.bottom - (xVal / 25) * graphHeight;
    }
    
    function toGraphT(canvasX) {
        return ((canvasX - margin.left) / graphWidth) * 5;
    }
    
    // Canvas ãƒªã‚µã‚¤ã‚º
    function resizeCanvas() {
        canvas.width = canvas.parentElement.clientWidth;
        canvas.height = 400;
        graphWidth = canvas.width - margin.left - margin.right;
        graphHeight = canvas.height - margin.top - margin.bottom;
    }
    
    // æç”»
    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        const dt = Math.abs(tB - tA);
        const isInstant = dt <= INSTANT_THRESHOLD;
        
        // ç·šã®è‰²ã‚’æ±ºå®š
        const lineColor = isInstant ? '#e67e22' : '#3498db';
        
        // èƒŒæ™¯
        ctx.fillStyle = '#fafafa';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        // ã‚°ãƒ©ãƒ•é ˜åŸŸã®èƒŒæ™¯
        ctx.fillStyle = 'white';
        ctx.fillRect(margin.left, margin.top, graphWidth, graphHeight);
        
        // ã‚°ãƒªãƒƒãƒ‰ç·š
        ctx.strokeStyle = '#e0e0e0';
        ctx.lineWidth = 1;
        
        // ç¸¦ã®ã‚°ãƒªãƒƒãƒ‰ï¼ˆtè»¸ï¼‰
        for (let t = 0; t <= 5; t += 1) {
            const cx = toCanvasX(t);
            ctx.beginPath();
            ctx.moveTo(cx, margin.top);
            ctx.lineTo(cx, canvas.height - margin.bottom);
            ctx.stroke();
        }
        
        // æ¨ªã®ã‚°ãƒªãƒƒãƒ‰ï¼ˆxè»¸ï¼‰
        for (let xVal = 0; xVal <= 25; xVal += 5) {
            const cy = toCanvasY(xVal);
            ctx.beginPath();
            ctx.moveTo(margin.left, cy);
            ctx.lineTo(canvas.width - margin.right, cy);
            ctx.stroke();
        }
        
        // è»¸
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        
        // xè»¸ï¼ˆæ™‚é–“è»¸ï¼‰
        ctx.beginPath();
        ctx.moveTo(margin.left, canvas.height - margin.bottom);
        ctx.lineTo(canvas.width - margin.right, canvas.height - margin.bottom);
        ctx.stroke();
        
        // yè»¸ï¼ˆä½ç½®è»¸ï¼‰
        ctx.beginPath();
        ctx.moveTo(margin.left, margin.top);
        ctx.lineTo(margin.left, canvas.height - margin.bottom);
        ctx.stroke();
        
        // è»¸ãƒ©ãƒ™ãƒ«
        ctx.fillStyle = '#333';
        ctx.font = '16px sans-serif';
        ctx.textAlign = 'center';
        
        // tè»¸ã®ç›®ç››ã‚Š
        for (let t = 0; t <= 5; t += 1) {
            const cx = toCanvasX(t);
            ctx.fillText(t.toString(), cx, canvas.height - margin.bottom + 25);
        }
        ctx.fillText('t [s]', canvas.width - margin.right + 20, canvas.height - margin.bottom + 5);
        
        // xè»¸ã®ç›®ç››ã‚Š
        ctx.textAlign = 'right';
        for (let xVal = 0; xVal <= 25; xVal += 5) {
            const cy = toCanvasY(xVal);
            ctx.fillText(xVal.toString(), margin.left - 10, cy + 5);
        }
        ctx.save();
        ctx.translate(20, margin.top + graphHeight / 2);
        ctx.rotate(-Math.PI / 2);
        ctx.textAlign = 'center';
        ctx.fillText('x [m]', 0, 0);
        ctx.restore();
        
        // x = tÂ² ã®ã‚°ãƒ©ãƒ•ã‚’æç”»
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 3;
        ctx.beginPath();
        for (let t = 0; t <= 5; t += 0.05) {
            const cx = toCanvasX(t);
            const cy = toCanvasY(x(t));
            if (t === 0) {
                ctx.moveTo(cx, cy);
            } else {
                ctx.lineTo(cx, cy);
            }
        }
        ctx.stroke();
        
        // 2ç‚¹ã‚’çµã¶ç›´ç·šï¼ˆå‰²ç·šï¼‰ã‚’æç”»
        // Canvasã‚¯ãƒªãƒƒãƒ”ãƒ³ã‚°ã‚’ä½¿ç”¨ã—ã¦ã‚°ãƒ©ãƒ•é ˜åŸŸå†…ã®ã¿æç”»
        ctx.save();
        ctx.beginPath();
        ctx.rect(margin.left, margin.top, graphWidth, graphHeight);
        ctx.clip();
        
        if (dt > 0.001) {
            const slope = (x(tB) - x(tA)) / (tB - tA);
            ctx.strokeStyle = lineColor;
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            // ç›´ç·šã‚’ã‚°ãƒ©ãƒ•ç¯„å›²å¤–ã¾ã§å»¶é•·ï¼ˆã‚¯ãƒªãƒƒãƒ”ãƒ³ã‚°ã§è‡ªå‹•çš„ã«åˆ‡ã‚Šå–ã‚‰ã‚Œã‚‹ï¼‰
            const lineT1 = -1;
            const lineT2 = 6;
            const lineX1 = x(tA) + slope * (lineT1 - tA);
            const lineX2 = x(tA) + slope * (lineT2 - tA);
            
            ctx.moveTo(toCanvasX(lineT1), toCanvasY(lineX1));
            ctx.lineTo(toCanvasX(lineT2), toCanvasY(lineX2));
            ctx.stroke();
        } else {
            // dtãŒã»ã¼0ã®å ´åˆã¯ä¸­ç‚¹ã§ã®æ¥ç·šã‚’æç”»
            const midT = (tA + tB) / 2;
            const slope = instantVelocity(midT);
            ctx.strokeStyle = lineColor;
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            const lineT1 = -1;
            const lineT2 = 6;
            const lineX1 = x(midT) + slope * (lineT1 - midT);
            const lineX2 = x(midT) + slope * (lineT2 - midT);
            
            ctx.moveTo(toCanvasX(lineT1), toCanvasY(lineX1));
            ctx.lineTo(toCanvasX(lineT2), toCanvasY(lineX2));
            ctx.stroke();
        }
        
        ctx.restore();
        
        // ç‚¹Aã‚’æç”»
        ctx.fillStyle = '#e74c3c';
        ctx.beginPath();
        ctx.arc(toCanvasX(tA), toCanvasY(x(tA)), 10, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = 'white';
        ctx.font = 'bold 12px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('A', toCanvasX(tA), toCanvasY(x(tA)) + 4);
        
        // ç‚¹Bã‚’æç”»
        ctx.fillStyle = '#3498db';
        ctx.beginPath();
        ctx.arc(toCanvasX(tB), toCanvasY(x(tB)), 10, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = 'white';
        ctx.font = 'bold 12px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('B', toCanvasX(tB), toCanvasY(x(tB)) + 4);
        
        // ç‚¹ã®åº§æ¨™ã‚’è¡¨ç¤º
        ctx.font = '14px sans-serif';
        
        // ç‚¹Aã®ãƒ©ãƒ™ãƒ«ä½ç½®èª¿æ•´
        ctx.fillStyle = '#e74c3c';
        const labelAX = toCanvasX(tA) + 15;
        const labelAY = toCanvasY(x(tA)) - 10;
        ctx.textAlign = 'left';
        ctx.fillText(`A (${tA.toFixed(1)}, ${x(tA).toFixed(1)})`, labelAX, labelAY);
        
        // ç‚¹Bã®ãƒ©ãƒ™ãƒ«ä½ç½®èª¿æ•´
        ctx.fillStyle = '#3498db';
        const labelBX = toCanvasX(tB) + 15;
        const labelBY = toCanvasY(x(tB)) + 20;
        ctx.fillText(`B (${tB.toFixed(1)}, ${x(tB).toFixed(1)})`, labelBX, labelBY);
        
        // æƒ…å ±æ›´æ–°
        updateInfo();
    }
    
    // æƒ…å ±è¡¨ç¤ºã®æ›´æ–°
    function updateInfo() {
        const dt = Math.abs(tB - tA);
        const isInstant = dt <= INSTANT_THRESHOLD;
        
        // é€Ÿåº¦è¨ˆç®—
        let velocity;
        if (dt > 0.001) {
            velocity = (x(tB) - x(tA)) / (tB - tA);
        } else {
            // ã»ã¼åŒã˜ç‚¹ã®å ´åˆã¯ä¸­ç‚¹ã§ã®ç¬é–“é€Ÿåº¦
            velocity = instantVelocity((tA + tB) / 2);
        }
        
        // è¡¨ç¤ºæ›´æ–°
        document.getElementById('tADisplay').textContent = tA.toFixed(2);
        document.getElementById('tBDisplay').textContent = tB.toFixed(2);
        document.getElementById('dtDisplay').textContent = dt.toFixed(2);
        document.getElementById('velocityDisplay').textContent = velocity.toFixed(2);
        
        // é€Ÿåº¦ãƒ©ãƒ™ãƒ«ã¨è‰²ã®åˆ‡ã‚Šæ›¿ãˆ
        const velocityCard = document.getElementById('velocityCard');
        const velocityLabel = document.getElementById('velocityLabel');
        const legendLine = document.getElementById('legendLine');
        const legendText = document.getElementById('legendText');
        
        if (isInstant) {
            velocityCard.classList.add('instant-mode');
            velocityLabel.textContent = 'ç¬é–“ã®é€Ÿåº¦';
            legendLine.classList.add('instant-mode');
            legendText.textContent = 'æ¥ç·šï¼ˆç¬é–“ã®é€Ÿåº¦ï¼‰';
        } else {
            velocityCard.classList.remove('instant-mode');
            velocityLabel.textContent = 'å¹³å‡ã®é€Ÿåº¦';
            legendLine.classList.remove('instant-mode');
            legendText.textContent = 'å‰²ç·šï¼ˆå¹³å‡ã®é€Ÿåº¦ï¼‰';
        }
        
        // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®è¡¨ç¤ºã‚‚æ›´æ–°
        document.getElementById('t1Display').textContent = tA.toFixed(2) + ' s';
        document.getElementById('t2Display').textContent = tB.toFixed(2) + ' s';
    }
    
    // ç‚¹ã¨ã®è·é›¢ã‚’è¨ˆç®—
    function getDistanceToPoint(mouseX, mouseY, t) {
        const px = toCanvasX(t);
        const py = toCanvasY(x(t));
        return Math.sqrt((mouseX - px) ** 2 + (mouseY - py) ** 2);
    }
    
    // ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆ
    canvas.addEventListener('mousedown', function(e) {
        const rect = canvas.getBoundingClientRect();
        const mouseX = e.clientX - rect.left;
        const mouseY = e.clientY - rect.top;
        
        const distA = getDistanceToPoint(mouseX, mouseY, tA);
        const distB = getDistanceToPoint(mouseX, mouseY, tB);
        
        if (distA < 20 || distB < 20) {
            isDragging = true;
            // ã‚ˆã‚Šè¿‘ã„ç‚¹ã‚’ãƒ‰ãƒ©ãƒƒã‚°å¯¾è±¡ã«ã™ã‚‹
            dragTarget = distA < distB ? 'A' : 'B';
            canvas.style.cursor = 'grabbing';
        }
    });
    
    canvas.addEventListener('mousemove', function(e) {
        const rect = canvas.getBoundingClientRect();
        const mouseX = e.clientX - rect.left;
        const mouseY = e.clientY - rect.top;
        
        if (isDragging) {
            let newT = toGraphT(mouseX);
            newT = Math.max(0, Math.min(5, newT));
            
            if (dragTarget === 'A') {
                tA = newT;
                document.getElementById('t1Slider').value = tA;
            } else {
                tB = newT;
                document.getElementById('t2Slider').value = tB;
            }
            draw();
        } else {
            // ãƒ›ãƒãƒ¼æ™‚ã®ã‚«ãƒ¼ã‚½ãƒ«å¤‰æ›´
            const distA = getDistanceToPoint(mouseX, mouseY, tA);
            const distB = getDistanceToPoint(mouseX, mouseY, tB);
            canvas.style.cursor = (distA < 20 || distB < 20) ? 'grab' : 'default';
        }
    });
    
    canvas.addEventListener('mouseup', function() {
        isDragging = false;
        dragTarget = null;
        canvas.style.cursor = 'default';
    });
    
    canvas.addEventListener('mouseleave', function() {
        isDragging = false;
        dragTarget = null;
        canvas.style.cursor = 'default';
    });
    
    // ã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆï¼ˆãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œï¼‰
    canvas.addEventListener('touchstart', function(e) {
        e.preventDefault();
        const rect = canvas.getBoundingClientRect();
        const touch = e.touches[0];
        const touchX = touch.clientX - rect.left;
        const touchY = touch.clientY - rect.top;
        
        const distA = getDistanceToPoint(touchX, touchY, tA);
        const distB = getDistanceToPoint(touchX, touchY, tB);
        
        if (distA < 30 || distB < 30) {
            isDragging = true;
            dragTarget = distA < distB ? 'A' : 'B';
        }
    });
    
    canvas.addEventListener('touchmove', function(e) {
        e.preventDefault();
        if (isDragging) {
            const rect = canvas.getBoundingClientRect();
            const touch = e.touches[0];
            const touchX = touch.clientX - rect.left;
            
            let newT = toGraphT(touchX);
            newT = Math.max(0, Math.min(5, newT));
            
            if (dragTarget === 'A') {
                tA = newT;
                document.getElementById('t1Slider').value = tA;
            } else {
                tB = newT;
                document.getElementById('t2Slider').value = tB;
            }
            draw();
        }
    });
    
    canvas.addEventListener('touchend', function() {
        isDragging = false;
        dragTarget = null;
    });
    
    // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆ
    document.getElementById('t1Slider').addEventListener('input', function() {
        tA = parseFloat(this.value);
        draw();
    });
    
    document.getElementById('t2Slider').addEventListener('input', function() {
        tB = parseFloat(this.value);
        draw();
    });
    
    // ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³
    document.getElementById('resetBtn').addEventListener('click', function() {
        tA = 2.0;
        tB = 4.0;
        document.getElementById('t1Slider').value = tA;
        document.getElementById('t2Slider').value = tB;
        draw();
    });
    
    // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚µã‚¤ã‚ºå¯¾å¿œ
    window.addEventListener('resize', function() {
        resizeCanvas();
        draw();
    });
    
    // åˆæœŸåŒ–
    resizeCanvas();
    draw();
    </script>
</body>
</html>